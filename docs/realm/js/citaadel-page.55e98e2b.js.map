{"version":3,"sources":["webpack:///./src/components/CitaadelPage.vue","webpack:///./src/data/useParcelPrices.js","webpack:///./src/components/DataFetcherBaazaarListings.vue","webpack:///./src/components/DateFriendly.vue","webpack:///./node_modules/date-fns/esm/compareAsc/index.js","webpack:///./node_modules/date-fns/esm/_lib/assign/index.js","webpack:///./node_modules/date-fns/esm/_lib/cloneObject/index.js","webpack:///./node_modules/date-fns/esm/formatDistanceStrict/index.js","webpack:///./node_modules/date-fns/esm/max/index.js","webpack:///./src/data/useReactiveDate.js","webpack:///./src/components/DateFriendly.vue?e98a","webpack:///./src/components/DataFetcherBaazaarListings.vue?18e3","webpack:///./src/components/DataFetcherParcelOwners.vue","webpack:///./src/components/DataFetcherParcelOwners.vue?907e","webpack:///./src/components/FilterBaazaar.vue","webpack:///./src/components/FilterBaazaar.vue?c986","webpack:///./src/components/FilterOwners.vue","webpack:///./src/components/FilterOwners.vue?2057","webpack:///./src/components/CitaadelPage.vue?5f8a","webpack:///./src/components/CitaadelPage.vue?69b5","webpack:///./src/data/useBaazaarListings.js","webpack:///./src/data/useParcelOwners.js","webpack:///./src/components/FilterOwners.vue?643c"],"names":["style","class","sidebar","colorSchemeLabel","colorSchemeOptions","option","key","id","colorScheme","colorBy","type","name","value","label","size","lastPrice","scaleName","SCALE_NAMES","min","max","baazaarPrice","owner","whalePx","mapConfig","displayMode","filters","baazaar","walls","districts","parcelIds","parcelNames","boosts","owners","selectedParcel","selectedParcelId","parcelHash","sizeLabel","district","address","currentListing","href","target","priceInGhst","toString","lastSale","formattedDate","auctionPrice","hasBoost","fudBoost","fomoBoost","alphaBoost","kekBoost","main","viewMode","viewBox","aspectRatio","filterDisplayMode","parcels","parcelsToDisplay","parcelsMatchingFilters","parcelColors","onClickParcel","listParcelsToDisplay","length","listParcelsTotal","parcel","listingsByParcelId","salesByParcelId","listParcelsShowAll","useParcels","parcelsById","fetchParcelsStatus","fetchStatus","useBaazaarListings","useStatus","fetchAuctionPricesStatus","status","setLoading","auctionPricesById","isStale","setLoaded","setError","then","json","default","catch","error","console","pricesByParcelId","computed","prices","loaded","parcelId","useParcelPrices","date","lastFetchDate","disabled","canSubmitFetch","fetchListings","loading","errorMessage","friendlyDate","compareAsc","dirtyDateLeft","dirtyDateRight","requiredArgs","arguments","dateLeft","toDate","dateRight","diff","getTime","dirtyObject","TypeError","property","Object","prototype","hasOwnProperty","call","cloneObject","MILLISECONDS_IN_MINUTE","MINUTES_IN_DAY","MINUTES_IN_MONTH","MINUTES_IN_YEAR","formatDistanceStrict","dirtyDate","dirtyBaseDate","options","undefined","locale","formatDistance","RangeError","comparison","isNaN","localizeOptions","addSuffix","Boolean","roundingMethodFn","roundingMethod","String","Math","floor","ceil","round","unit","milliseconds","minutes","timezoneOffset","getTimezoneOffsetInMilliseconds","dstNormalizedMinutes","seconds","roundedMinutes","hours","days","months","years","dirtyDatesArray","datesArray","result","forEach","Date","NaN","Array","slice","currentDate","Number","tickerDate","ref","setInterval","props","required","setup","useReactiveDate","__exports__","components","DateFriendly","LoadingSpinner","fetchOwners","useParcelOwners","OPTIONS","checked","modelValue","$emit","getDefaultValue","getFilter","listingsByParcel","filterBaazaar","delimiterRegexp","$event","ownersByParcelId","idsArray","includes","TextareaList","PrereqParcels","LayoutMapWithFilters","DataFetcherBaazaarListings","DataFetcherParcelOwners","EthAddress","CitaadelMap","MapConfigDisplayMode","FilterBaazaar","FilterSize","FilterWalls","FilterDistricts","FilterParcelIds","FilterParcelNames","FilterBoosts","FilterOwners","baazaarListingsFetchStatus","fetchBaazaarListings","ownersFetchStatus","map","wall","humble","reasonable","spacious","parseInt","find","prereqBaazaarListings","prereqOwners","immediate","baazaarFilter","ownersFilter","lastPriceScalesBySize","scales","configBySize","config","baazaarPriceScalesBySize","ownerScale","TOP_OWNERS_N","topOwnerScale","whalePxScale","whalesPx","totalPerOwner","pxBySizeLabel","sortedWhalePx","entries","sort","a","b","parcelsFetchStatus","values","color","getColor","scale","toNumber","topOwners","item","topIndex","indexOf","fromEntries","idFilter","nameFilter","sizesFilter","wallsFilter","districtsFilter","boostsFilter","applyFilters","show","i","format","datePurchased","compareIds","parcelA","parcelB","compareDistricts","fallbackComparison","listParcels","filter","listingA","listingB","isEqualTo","isLessThan","SCALE_GRADIENTS","render","SUBGRAPH_URL","FETCH_PAGE_SIZE","resetListings","setListings","listings","listing","BigNumber","priceInWei","dividedBy","timePurchased","tokenId","dateCreated","timeCreated","skip","fetchListingsFromSubgraph","fetch","method","body","JSON","stringify","query","response","log","ok","responseJson","data","erc721Listings","concat","resetOwners","setOwners","lastIdNum","fetchOwnersFromSubgraph"],"mappings":"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","file":"js/citaadel-page.55e98e2b.js","sourcesContent":["<template>\n  <PrereqParcels>\n    <LayoutMapWithFilters>\n      <template #sidebar>\n        <h1>The Citaadel</h1>\n\n        <div style=\"margin-bottom: 20px;\">\n          <DataFetcherBaazaarListings style=\"margin-bottom: 10px;\" />\n          <DataFetcherParcelOwners style=\"margin-bottom: 10px;\" />\n        </div>\n\n        <details class=\"filter-container\">\n          <summary>\n            <h3>Color Scheme: {{ colorSchemeLabel }}</h3>\n          </summary>\n\n          <div style=\"margin-bottom: 10px\">\n            Color by:\n\n            <div\n              v-for=\"option in colorSchemeOptions\"\n              :key=\"option.id\"\n            >\n              <label>\n                <input\n                  v-model=\"colorScheme.colorBy\"\n                  type=\"radio\"\n                  name=\"colorBy\"\n                  :value=\"option.id\"\n                />\n                {{ option.label }}\n              </label>\n            </div>\n          </div>\n\n          <div v-if=\"colorScheme.colorBy === 'lastPrice'\">\n            <div\n              v-for=\"size in ['humble', 'reasonable', 'spacious']\"\n              :key=\"size\"\n              style=\"margin-bottom: 20px;\"\n            >\n              <h4 style=\"text-transform: capitalize;\">\n                {{ size }}:\n              </h4>\n              <div style=\"margin-bottom: 10px\">\n                <label>\n                  Color Scheme:\n                  <select v-model=\"colorScheme.lastPrice[size].scaleName\">\n                    <option\n                      v-for=\"scaleName in SCALE_NAMES\"\n                      :key=\"scaleName\"\n                      :value=\"scaleName\"\n                    >\n                      {{ scaleName }}\n                    </option>\n                  </select>\n                </label>\n                <div\n                  class=\"scale-color-display\"\n                  :style=\"{\n                    'background': SCALE_GRADIENTS[colorScheme.lastPrice[size].scaleName]\n                  }\"\n                />\n              </div>\n              <div>\n                <label>\n                  Min:\n                  <input\n                    v-model=\"colorScheme.lastPrice[size].min\"\n                    type=\"number\"\n                    class=\"range-input\"\n                  />\n                </label>\n                <label>\n                  Max:\n                  <input\n                    v-model=\"colorScheme.lastPrice[size].max\"\n                    type=\"number\"\n                    class=\"range-input\"\n                  />\n                </label>\n              </div>\n            </div>\n          </div>\n\n          <div v-if=\"colorScheme.colorBy === 'baazaarPrice'\">\n            <div\n              v-for=\"size in ['humble', 'reasonable', 'spacious']\"\n              :key=\"size\"\n              style=\"margin-bottom: 20px;\"\n            >\n              <h4 style=\"text-transform: capitalize;\">\n                {{ size }}:\n              </h4>\n              <div style=\"margin-bottom: 10px\">\n                <label>\n                  Color Scheme:\n                  <select v-model=\"colorScheme.baazaarPrice[size].scaleName\">\n                    <option\n                      v-for=\"scaleName in SCALE_NAMES\"\n                      :key=\"scaleName\"\n                      :value=\"scaleName\"\n                    >\n                      {{ scaleName }}\n                    </option>\n                  </select>\n                </label>\n                <div\n                  class=\"scale-color-display\"\n                  :style=\"{\n                    'background': SCALE_GRADIENTS[colorScheme.baazaarPrice[size].scaleName]\n                  }\"\n                />\n              </div>\n              <div>\n                <label>\n                  Min:\n                  <input\n                    v-model=\"colorScheme.baazaarPrice[size].min\"\n                    type=\"number\"\n                    class=\"range-input\"\n                  />\n                </label>\n                <label>\n                  Max:\n                  <input\n                    v-model=\"colorScheme.baazaarPrice[size].max\"\n                    type=\"number\"\n                    class=\"range-input\"\n                  />\n                </label>\n              </div>\n            </div>\n          </div>\n\n          <div v-if=\"colorScheme.colorBy === 'owner'\">\n            <div>\n              <label>\n                Color Scheme:\n                <select v-model=\"colorScheme.owner.scaleName\">\n                  <option\n                    v-for=\"scaleName in SCALE_NAMES\"\n                    :key=\"scaleName\"\n                    :value=\"scaleName\"\n                  >\n                    {{ scaleName }}\n                  </option>\n                </select>\n              </label>\n              <div\n                class=\"scale-color-display\"\n                :style=\"{\n                  'background': SCALE_GRADIENTS[colorScheme.owner.scaleName]\n                }\"\n              />\n            </div>\n          </div>\n\n          <div v-if=\"colorScheme.colorBy === 'whalePx'\">\n            <div>\n              <label>\n                Color Scheme:\n                <select v-model=\"colorScheme.whalePx.scaleName\">\n                  <option\n                    v-for=\"scaleName in SCALE_NAMES\"\n                    :key=\"scaleName\"\n                    :value=\"scaleName\"\n                  >\n                    {{ scaleName }}\n                  </option>\n                </select>\n              </label>\n              <div\n                class=\"scale-color-display\"\n                :style=\"{\n                  'background': SCALE_GRADIENTS[colorScheme.whalePx.scaleName]\n                }\"\n              />\n              <div\n                style=\"margin-top: 8px\"\n              >\n                <label>\n                  Min:\n                  <input\n                    v-model=\"colorScheme.whalePx.min\"\n                    type=\"number\"\n                    class=\"range-input\"\n                  />\n                </label>\n                <label>\n                  Max:\n                  <input\n                    v-model=\"colorScheme.whalePx.max\"\n                    type=\"number\"\n                    class=\"range-input\"\n                  />\n                </label>\n              </div>\n            </div>\n          </div>\n        </details>\n\n        <MapConfigDisplayMode v-model=\"mapConfig.displayMode\" />\n        <FilterBaazaar v-model=\"filters.baazaar\" />\n        <FilterSize v-model=\"filters.size\" />\n        <FilterWalls v-model=\"filters.walls\" />\n        <FilterDistricts v-model=\"filters.districts\" />\n        <FilterParcelIds v-model=\"filters.parcelIds\" />\n        <FilterParcelNames v-model=\"filters.parcelNames\" />\n        <FilterBoosts v-model=\"filters.boosts\" />\n        <FilterOwners v-model=\"filters.owners\" />\n\n        <section>\n          <div\n            v-if=\"selectedParcel\"\n            class=\"selected-parcel-details\"\n          >\n            <button\n              type=\"button\"\n              style=\"float: right\"\n              @click=\"selectedParcelId = null\"\n            >\n              Close\n            </button>\n\n            <h2>Selected Parcel details:</h2>\n\n            ID: {{ selectedParcel.id }}\n            <br>Name: {{ selectedParcel.parcelHash }}\n            <br>Size: {{ selectedParcel.sizeLabel }}\n            <br>District: {{ selectedParcel.district }}\n            <div v-if=\"selectedParcel.owner\">\n              Owner:\n              <EthAddress :address=\"selectedParcel.owner\" />\n            </div>\n            <div v-if=\"selectedParcel.currentListing\">\n              <a\n                :href=\"`https://aavegotchi.com/baazaar/erc721/${selectedParcel.currentListing.id}`\"\n                target=\"_blank\"\n              >\n                Currently listed on Baazaar for: {{ selectedParcel.currentListing.priceInGhst.toString() }} GHST\n              </a>\n            </div>\n            <div v-if=\"selectedParcel.lastSale\">\n              <a\n                :href=\"`https://aavegotchi.com/baazaar/erc721/${selectedParcel.lastSale.id}`\"\n                target=\"_blank\"\n              >\n                Last sold on Baazaar on {{ selectedParcel.lastSale.formattedDate }}\n                for: {{ selectedParcel.lastSale.priceInGhst.toString() }} GHST\n              </a>\n            </div>\n            <div v-if=\"selectedParcel.auctionPrice\">\n              Auction price: {{ selectedParcel.auctionPrice }} GHST\n            </div>\n            <div>\n              Boosts:\n              <div style=\"margin-left: 10px\">\n                <template v-if=\"selectedParcel.hasBoost\">\n                  <div v-if=\"selectedParcel.fudBoost !== '0'\">\n                    FUD: {{ selectedParcel.fudBoost }}\n                  </div>\n                  <div v-if=\"selectedParcel.fomoBoost !== '0'\">\n                    FOMO: {{ selectedParcel.fomoBoost }}\n                  </div>\n                  <div v-if=\"selectedParcel.alphaBoost !== '0'\">\n                    ALPHA: {{ selectedParcel.alphaBoost }}\n                  </div>\n                  <div v-if=\"selectedParcel.kekBoost !== '0'\">\n                    KEK: {{ selectedParcel.kekBoost }}\n                  </div>\n                </template>\n                <template v-else>\n                  None\n                </template>\n              </div>\n            </div>\n          </div>\n        </section>\n      </template>\n      <template #main=\"{ viewMode }\">\n        <CitaadelMap\n          v-show=\"viewMode === 'map'\"\n          :viewBox=\"mapConfig.viewBox\"\n          :aspectRatio=\"mapConfig.aspectRatio\"\n          :filterDisplayMode=\"mapConfig.displayMode\"\n          :parcels=\"parcelsToDisplay\"\n          :parcelsMatchingFilters=\"parcelsMatchingFilters\"\n          :parcelColors=\"parcelColors\"\n          :selectedParcel=\"selectedParcel\"\n          @click:parcel=\"onClickParcel\"\n        />\n        <div v-if=\"viewMode === 'list'\">\n          <template v-if=\"!listParcelsToDisplay.length\">\n            No parcels found.\n          </template>\n          <template v-else>\n            {{ listParcelsTotal }} parcels found.\n            <ul class=\"parcels-list\">\n              <li\n                v-for=\"parcel in listParcelsToDisplay\"\n                :key=\"parcel.id\"\n              >\n                <a\n                  href=\"#\"\n                  @click.prevent=\"onClickParcel(parcel)\"\n                >\n                  {{ parcel.id }}\n                </a>\n                {{ parcel.parcelHash }}\n                {{ parcel.sizeLabel }}\n                district {{ parcel.district }}\n                <span\n                  v-if=\"listingsByParcelId[parcel.id]\"\n                  style=\"margin: 0 10px;\"\n                >\n                  <a\n                    :href=\"`https://aavegotchi.com/baazaar/erc721/${listingsByParcelId[parcel.id].id}`\"\n                    target=\"_blank\"\n                  >\n                    Baazaar {{ listingsByParcelId[parcel.id].priceInGhst.toString() }} GHST\n                  </a>\n                </span>\n                <span v-if=\"salesByParcelId[parcel.id]\">\n                  Last sold on Baazaar on\n                  <a\n                    :href=\"`https://aavegotchi.com/baazaar/erc721/${salesByParcelId[parcel.id].id}`\"\n                    target=\"_blank\"\n                  >\n                    {{ salesByParcelId[parcel.id].formattedDate }}\n                    for {{ salesByParcelId[parcel.id].priceInGhst.toString() }} GHST\n                  </a>\n                </span>\n              </li>\n            </ul>\n          </template>\n          <div v-if=\"listParcelsTotal > listParcelsToDisplay.length && !listParcelsShowAll\">\n            <button\n              type=\"button\"\n              @click=\"listParcelsShowAll = true\"\n            >\n              Show all {{ listParcelsTotal }} parcels\n            </button>\n          </div>\n        </div>\n      </template>\n    </LayoutMapWithFilters>\n  </PrereqParcels>\n</template>\n\n<script>\nimport { ref, computed, watch } from 'vue'\nimport { format } from 'date-fns'\nimport useParcels from '@/data/useParcels'\nimport useBaazaarListings from '@/data/useBaazaarListings'\nimport useParcelPrices from '@/data/useParcelPrices'\nimport useParcelOwners from '@/data/useParcelOwners'\nimport { WALLS } from '@/data/walls'\nimport { SCALE_NAMES, SCALE_GRADIENTS, getSequentialScale } from './colorScales'\nimport DataFetcherBaazaarListings from './DataFetcherBaazaarListings.vue'\nimport DataFetcherParcelOwners from './DataFetcherParcelOwners.vue'\nimport PrereqParcels from './PrereqParcels.vue'\nimport LayoutMapWithFilters from './LayoutMapWithFilters.vue'\nimport EthAddress from './EthAddress.vue'\nimport CitaadelMap from './CitaadelMap.vue'\nimport MapConfigDisplayMode from './MapConfigDisplayMode.vue'\nimport FilterBaazaar, { getDefaultValue as getDefaultBaazarValue, getFilter as getBaazaarFilter } from './FilterBaazaar.vue'\nimport FilterSize, { SIZES, getFilter as getSizesFilter } from './FilterSize.vue'\nimport FilterWalls, { getFilter as getWallsFilter } from './FilterWalls.vue'\nimport FilterDistricts, { DISTRICTS, getDefaultValue as getDefaultDistrictsValue, getFilter as getDistrictsFilter } from './FilterDistricts.vue'\nimport FilterParcelIds, { getFilter as getParcelIdsFilter } from './FilterParcelIds.vue'\nimport FilterParcelNames, { getFilter as getParcelNamesFilter } from './FilterParcelNames.vue'\nimport FilterBoosts, { getDefaultValue as getDefaultBoostsValue, getFilter as getBoostsFilter } from './FilterBoosts.vue'\nimport FilterOwners, { getFilter as getOwnersFilter } from './FilterOwners.vue'\n\nexport default {\n  components: {\n    PrereqParcels,\n    LayoutMapWithFilters,\n    DataFetcherBaazaarListings,\n    DataFetcherParcelOwners,\n    EthAddress,\n    CitaadelMap,\n    MapConfigDisplayMode,\n    FilterBaazaar,\n    FilterSize,\n    FilterWalls,\n    FilterDistricts,\n    FilterParcelIds,\n    FilterParcelNames,\n    FilterBoosts,\n    FilterOwners\n  },\n  setup () {\n    const {\n      listingsByParcelId,\n      salesByParcelId,\n      fetchStatus: baazaarListingsFetchStatus,\n      fetchListings: fetchBaazaarListings\n    } = useBaazaarListings()\n\n    const { pricesByParcelId } = useParcelPrices()\n    const {\n      ownersByParcelId,\n      fetchStatus: ownersFetchStatus,\n      fetchOwners\n    } = useParcelOwners()\n\n    const mapConfig = ref({\n      displayMode: 'outline',\n      viewBox: '0 0 9000 6000',\n      aspectRatio: '9 / 6'\n    })\n    const filters = ref({\n      baazaar: getDefaultBaazarValue(),\n      size: [...SIZES],\n      walls: WALLS.map(wall => wall.id),\n      districts: getDefaultDistrictsValue([...DISTRICTS]),\n      parcelIds: [],\n      parcelNames: [],\n      boosts: getDefaultBoostsValue(),\n      owners: []\n    })\n    const colorSchemeOptions = [\n      { id: 'lastPrice', label: 'Last Sold Price (GHST)' },\n      { id: 'baazaarPrice', label: 'Baazaar Listing Price (GHST)' },\n      { id: 'owner', label: 'Owner Address' },\n      { id: 'whalePx', label: 'Whales (total pixel area)' }\n    ]\n    const colorScheme = ref({\n      colorBy: 'lastPrice',\n      lastPrice: {\n        humble: {\n          min: 88,\n          max: 500,\n          scaleName: 'viridis'\n        },\n        reasonable: {\n          min: 180,\n          max: 1000,\n          scaleName: 'viridis'\n        },\n        spacious: {\n          min: 1025,\n          max: 3000,\n          scaleName: 'viridis'\n        }\n      },\n      baazaarPrice: {\n        humble: {\n          min: 88,\n          max: 500,\n          scaleName: 'viridis'\n        },\n        reasonable: {\n          min: 180,\n          max: 1000,\n          scaleName: 'viridis'\n        },\n        spacious: {\n          min: 1025,\n          max: 3000,\n          scaleName: 'viridis'\n        }\n      },\n      owner: {\n        scaleName: 'rainbow',\n        min: 0,\n        max: parseInt('0xffffffffffffffffffffffffffffffffffffffff', 16)\n      },\n      whalePx: {\n        scaleName: 'inferno',\n        min: 0,\n        max: 150_000\n      }\n    })\n    const colorSchemeLabel = computed(() => colorSchemeOptions.find(option => option.id === colorScheme.value.colorBy)?.label)\n\n    // Watch for settings that require extra data to be fetched,\n    // and fetch that data if necessary\n    const prereqBaazaarListings = function () {\n      if (!baazaarListingsFetchStatus.value.loaded && !baazaarListingsFetchStatus.value.loading) {\n        fetchBaazaarListings()\n      }\n    }\n    const prereqOwners = function () {\n      if (!ownersFetchStatus.value.loaded && !ownersFetchStatus.value.loading) {\n        fetchOwners()\n      }\n    }\n    watch(\n      () => colorScheme.value.colorBy,\n      colorBy => {\n        if (['baazaarPrice', 'lastPrice'].includes(colorBy)) {\n          // these color schemes require baazaar listings\n          // make sure it's fetched at least once\n          prereqBaazaarListings()\n        }\n        if (['owner', 'whalePx'].includes(colorBy)) {\n          prereqOwners()\n        }\n      },\n      { immediate: true }\n    )\n    watch(\n      () => filters.value.baazaar,\n      baazaarFilter => {\n        if (baazaarFilter !== 'all') {\n          prereqBaazaarListings()\n        }\n      }\n    )\n    watch(\n      () => filters.value.owners,\n      ownersFilter => {\n        if (ownersFilter?.length) {\n          prereqOwners()\n        }\n      }\n    )\n\n    const lastPriceScalesBySize = computed(() => {\n      const scales = {}\n      const configBySize = colorScheme.value.lastPrice\n      for (const key in configBySize) {\n        const config = configBySize[key]\n        scales[key] = getSequentialScale(config)\n      }\n      return scales\n    })\n\n    const baazaarPriceScalesBySize = computed(() => {\n      const scales = {}\n      const configBySize = colorScheme.value.baazaarPrice\n      for (const key in configBySize) {\n        const config = configBySize[key]\n        scales[key] = getSequentialScale(config)\n      }\n      return scales\n    })\n\n    const ownerScale = computed(() => {\n      return getSequentialScale(colorScheme.value.owner)\n    })\n    const TOP_OWNERS_N = 10\n    const topOwnerScale = computed(() => {\n      return getSequentialScale({\n        scaleName: colorScheme.value.owner.scaleName,\n        min: 0,\n        max: TOP_OWNERS_N\n      })\n    })\n\n    const whalePxScale = computed(() => {\n      return getSequentialScale(colorScheme.value.whalePx)\n    })\n\n    const whalesPx = computed(() => {\n      const totalPerOwner = {}\n      const pxBySizeLabel = {\n        humble: 8 * 8,\n        reasonable: 16 * 16,\n        spacious: 32 * 64\n      }\n      for (const parcelId in ownersByParcelId.value) {\n        const owner = ownersByParcelId.value[parcelId]\n        if (!totalPerOwner[owner]) {\n          totalPerOwner[owner] = 0\n        }\n        const parcel = parcelsById.value[parcelId]\n        if (parcel) {\n          totalPerOwner[owner] += (pxBySizeLabel[parcel.sizeLabel] || 0)\n        }\n      }\n\n      return totalPerOwner\n    })\n\n    const sortedWhalePx = computed(() =>\n      Object.entries(whalesPx.value).sort((a, b) => {\n        if (a[1] === b[1]) { return 0 }\n        return a[1] < b[1] ? 1 : -1\n      })\n    )\n\n    const { parcelsById, fetchStatus: parcelsFetchStatus } = useParcels()\n\n    const parcelsToDisplay = computed(() =>\n      Object.values(parcelsById.value)\n        .map(\n          parcel => ({\n            ...parcel,\n            color: null\n          })\n        )\n    )\n\n    const parcelColors = computed(() => {\n      // console.time('parcelColors')\n      const colorBy = colorScheme.value.colorBy\n      let getColor = () => null\n      if (colorBy === 'lastPrice') {\n        getColor = parcel => {\n          const scale = lastPriceScalesBySize.value[parcel.sizeLabel]\n          if (!scale) { return null }\n          const lastPrice = pricesByParcelId.value[parcel.id]?.lastPrice\n          if (lastPrice) {\n            return scale(lastPrice - 0)\n          }\n          return null\n        }\n      } else if (colorBy === 'baazaarPrice') {\n        getColor = parcel => {\n          const scale = baazaarPriceScalesBySize.value[parcel.sizeLabel]\n          if (!scale) { return null }\n          const currentListing = listingsByParcelId.value[parcel.id]\n          if (currentListing) {\n            return scale(currentListing.priceInGhst.toNumber())\n          }\n          return null\n        }\n      } else if (colorBy === 'owner') {\n        const topOwners = sortedWhalePx.value.slice(0, TOP_OWNERS_N).map(item => item[0])\n        getColor = parcel => {\n          const owner = ownersByParcelId.value[parcel.id]\n          const topIndex = topOwners.indexOf(owner)\n          if (topIndex !== -1) {\n            // try to ensure the top px owners have different colors from each other,\n            // as they cover more of the map\n            return topOwnerScale.value(topIndex)\n          }\n          return ownerScale.value(parseInt(owner, 16))\n        }\n      } else if (colorBy === 'whalePx') {\n        getColor = parcel => {\n          const owner = ownersByParcelId.value[parcel.id]\n          return whalePxScale.value(whalesPx.value[owner] || 0)\n        }\n      }\n      const result = Object.fromEntries(\n        parcelsToDisplay.value.map(parcel => [\n          parcel.id,\n          getColor(parcel) || null\n        ])\n      )\n      // console.timeEnd('parcelColors')\n      return result\n    })\n\n    const parcelsMatchingFilters = computed(() => {\n      // console.time('parcelsMatchingFilters')\n      const idFilter = getParcelIdsFilter(filters.value.parcelIds)\n      const nameFilter = getParcelNamesFilter(filters.value.parcelNames)\n      const baazaarFilter = getBaazaarFilter(listingsByParcelId.value, filters.value.baazaar)\n      const sizesFilter = getSizesFilter(filters.value.size)\n      const wallsFilter = getWallsFilter(filters.value.walls)\n      const districtsFilter = getDistrictsFilter(DISTRICTS, filters.value.districts)\n      const boostsFilter = getBoostsFilter(filters.value.boosts)\n      const ownersFilter = getOwnersFilter(ownersByParcelId.value, filters.value.owners)\n\n      const applyFilters = [idFilter, nameFilter, baazaarFilter, ownersFilter, sizesFilter, wallsFilter, districtsFilter, boostsFilter]\n\n      const result = Object.fromEntries(\n        parcelsToDisplay.value.map(parcel => {\n          let show = true\n          for (let i = 0; show && i < applyFilters.length; i++) {\n            if (!applyFilters[i](parcel)) {\n              show = false\n            }\n          }\n          return [parcel.id, show]\n        })\n      )\n      // console.timeEnd('parcelsMatchingFilters')\n      return result\n    })\n\n    const selectedParcelId = ref(null)\n    const selectedParcel = computed(() => {\n      const parcelId = selectedParcelId.value\n      if (!parcelId) { return null }\n      const currentListing = listingsByParcelId.value[parcelId]\n      const lastSale = salesByParcelId.value[parcelId]\n      if (lastSale) {\n        lastSale.formattedDate = format(lastSale.datePurchased, 'yyyy/MM/dd HH:mm:ss')\n      }\n      const auctionPrice = pricesByParcelId.value[parcelId]?.auctionPrice\n      const owner = ownersByParcelId.value[parcelId]\n      return {\n        ...parcelsById.value[parcelId],\n        currentListing,\n        lastSale,\n        auctionPrice,\n        owner\n      }\n    })\n    const onClickParcel = (parcel) => {\n      selectedParcelId.value = parcel.id\n    }\n\n    const compareIds = function (parcelA, parcelB) {\n      if (parcelA.id === parcelB.id) {\n        return 0\n      }\n      return (parcelA.id - 0) < (parcelB.id - 0) ? -1 : 1\n    }\n\n    const compareDistricts = function (parcelA, parcelB, fallbackComparison) {\n      if (parcelA.district === parcelB.district) {\n        if (fallbackComparison) {\n          return fallbackComparison(parcelA, parcelB)\n        }\n        return 0\n      }\n      return (parcelA.district - 0) < (parcelB.district - 0) ? -1 : 1\n    }\n\n    const listParcels = computed(() => {\n      // console.time('listParcels')\n      const parcels = parcelsToDisplay.value.filter(parcel => parcelsMatchingFilters.value[parcel.id])\n      parcels.sort((a, b) => {\n        const listingA = listingsByParcelId.value[a.id]\n        const listingB = listingsByParcelId.value[b.id]\n        if (!listingA && !listingB) {\n          // fallback with districts, then ids\n          return compareDistricts(a, b, compareIds)\n        }\n        if (listingA && !listingB) {\n          return -1\n        }\n        if (listingB && !listingA) {\n          return 1\n        }\n        if (listingA.priceInGhst.isEqualTo(listingB.priceInGhst)) {\n          // fallback with districts, then ids\n          return compareDistricts(a, b, compareIds)\n        }\n        return listingA.priceInGhst.isLessThan(listingB.priceInGhst) ? -1 : 1\n      })\n      // console.timeEnd('listParcels')\n      return parcels\n    })\n\n    const listParcelsShowAll = ref(false)\n\n    const listParcelsTotal = computed(() => listParcels.value.length)\n\n    watch(\n      () => listParcelsTotal.value,\n      () => { listParcelsShowAll.value = false }\n    )\n\n    const listParcelsToDisplay = computed(() => {\n      if (listParcelsShowAll.value) {\n        return listParcels.value\n      }\n      return listParcels.value.slice(0, 100)\n    })\n\n    return {\n      parcelsFetchStatus,\n      mapConfig,\n      filters,\n      colorScheme,\n      colorSchemeLabel,\n      colorSchemeOptions,\n      SCALE_NAMES,\n      SCALE_GRADIENTS,\n      baazaarListingsFetchStatus,\n      parcelsToDisplay,\n      parcelsMatchingFilters,\n      parcelColors,\n      onClickParcel,\n      selectedParcelId,\n      selectedParcel,\n      listParcelsShowAll,\n      listParcelsToDisplay,\n      listParcelsTotal,\n      listingsByParcelId,\n      salesByParcelId\n    }\n  }\n}\n</script>\n\n<style scoped>\n  .scale-color-display {\n    margin-top: 5px;\n    width: 80%;\n    height: 20px;\n  }\n  .range-input {\n    width: 60px;\n  }\n\n  .selected-parcel-details {\n    margin: 0 10px 20px 0;\n    border: 1px solid #ccc;\n    padding: 10px;\n  }\n</style>\n","import { computed } from 'vue'\nimport useStatus from '@/data/useStatus'\nimport useParcels from './useParcels'\nimport useBaazaarListings from './useBaazaarListings'\n\nconst { parcelsById, fetchStatus: fetchParcelsStatus } = useParcels()\nconst { salesByParcelId } = useBaazaarListings()\n\nconst { status: fetchAuctionPricesStatus, setLoading } = useStatus()\nlet auctionPricesById = {} // doesn't need to be reactive\nconst [isStale, setLoaded, setError] = setLoading()\nimport(\n  /* webpackChunkName: \"auctionpricesjson\" */\n  './auctions/parcelAuctionPrices.json'\n).then(({ default: json }) => {\n  if (isStale()) { return }\n  auctionPricesById = json\n  setLoaded()\n}).catch(error => {\n  console.error(error)\n  setError('Error loading auction prices')\n})\n\nconst pricesByParcelId = computed(() => {\n  const prices = {}\n  if (!fetchParcelsStatus.value.loaded || !fetchAuctionPricesStatus.value.loaded) {\n    return prices\n  }\n  for (const parcelId in parcelsById.value) {\n    const lastPrice = salesByParcelId.value[parcelId]?.priceInGhst.toString() ||\n      auctionPricesById[parcelId] ||\n      null\n    prices[parcelId] = {\n      lastPrice: lastPrice ? lastPrice - 0 : null,\n      auctionPrice: auctionPricesById[parcelId]\n    }\n  }\n  return prices\n})\n\nexport default function useParcelPrices () {\n  return {\n    pricesByParcelId\n  }\n}\n","<template>\n  <div>\n    <div\n      v-if=\"fetchStatus.loaded\"\n      style=\"margin-bottom: 5px; font-style: italic; font-size: 0.95em;\"\n    >\n      Baazaar listings fetched\n      <DateFriendly :date=\"lastFetchDate\" />\n    </div>\n\n    <div>\n      <button\n        type=\"button\"\n        :disabled=\"!canSubmitFetch\"\n        @click=\"fetchListings\"\n      >\n        Get Latest Baazaar Listings\n      </button>\n      <div style=\"margin-top: 5px;\">\n        <span v-if=\"fetchStatus.loading\">\n          <LoadingSpinner style=\"position: relative; top: 2px; margin-right: 2px;\" />\n          loading listings...\n        </span>\n        <span v-if=\"fetchStatus.error\">\n          Error loading listings: {{ fetchStatus.errorMessage }}\n        </span>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport useBaazaarListings from '@/data/useBaazaarListings'\nimport DateFriendly from './DateFriendly'\nimport LoadingSpinner from './LoadingSpinner.vue'\n\nexport default {\n  components: {\n    DateFriendly,\n    LoadingSpinner\n  },\n  setup (props) {\n    const {\n      canSubmitFetch,\n      fetchStatus,\n      fetchListings,\n      lastFetchDate\n    } = useBaazaarListings()\n\n    return {\n      canSubmitFetch,\n      fetchStatus,\n      fetchListings,\n      lastFetchDate\n    }\n  }\n}\n</script>\n\n<style scoped>\n</style>\n","<template>\n  <span>\n    {{ friendlyDate }}\n  </span>\n</template>\n\n<script>\nimport { computed } from 'vue'\nimport { formatDistanceStrict, max } from 'date-fns'\nimport useReactiveDate from '@/data/useReactiveDate'\n\nexport default {\n  props: {\n    date: { type: Date, required: true }\n  },\n  setup (props) {\n    const { tickerDate } = useReactiveDate()\n    const friendlyDate = computed(() => formatDistanceStrict(\n      props.date,\n      max([tickerDate.value, new Date()]),\n      { addSuffix: true }\n    ))\n\n    return {\n      friendlyDate\n    }\n  }\n}\n</script>\n\n<style scoped>\n</style>\n","import toDate from \"../toDate/index.js\";\nimport requiredArgs from \"../_lib/requiredArgs/index.js\";\n/**\n * @name compareAsc\n * @category Common Helpers\n * @summary Compare the two dates and return -1, 0 or 1.\n *\n * @description\n * Compare the two dates and return 1 if the first date is after the second,\n * -1 if the first date is before the second or 0 if dates are equal.\n *\n * ### v2.0.0 breaking changes:\n *\n * - [Changes that are common for the whole library](https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#Common-Changes).\n *\n * @param {Date|Number} dateLeft - the first date to compare\n * @param {Date|Number} dateRight - the second date to compare\n * @returns {Number} the result of the comparison\n * @throws {TypeError} 2 arguments required\n *\n * @example\n * // Compare 11 February 1987 and 10 July 1989:\n * const result = compareAsc(new Date(1987, 1, 11), new Date(1989, 6, 10))\n * //=> -1\n *\n * @example\n * // Sort the array of dates:\n * const result = [\n *   new Date(1995, 6, 2),\n *   new Date(1987, 1, 11),\n *   new Date(1989, 6, 10)\n * ].sort(compareAsc)\n * //=> [\n * //   Wed Feb 11 1987 00:00:00,\n * //   Mon Jul 10 1989 00:00:00,\n * //   Sun Jul 02 1995 00:00:00\n * // ]\n */\n\nexport default function compareAsc(dirtyDateLeft, dirtyDateRight) {\n  requiredArgs(2, arguments);\n  var dateLeft = toDate(dirtyDateLeft);\n  var dateRight = toDate(dirtyDateRight);\n  var diff = dateLeft.getTime() - dateRight.getTime();\n\n  if (diff < 0) {\n    return -1;\n  } else if (diff > 0) {\n    return 1; // Return 0 if diff is 0; return NaN if diff is NaN\n  } else {\n    return diff;\n  }\n}","export default function assign(target, dirtyObject) {\n  if (target == null) {\n    throw new TypeError('assign requires that input parameter not be null or undefined');\n  }\n\n  dirtyObject = dirtyObject || {};\n\n  for (var property in dirtyObject) {\n    if (Object.prototype.hasOwnProperty.call(dirtyObject, property)) {\n      target[property] = dirtyObject[property];\n    }\n  }\n\n  return target;\n}","import assign from \"../assign/index.js\";\nexport default function cloneObject(dirtyObject) {\n  return assign({}, dirtyObject);\n}","import getTimezoneOffsetInMilliseconds from \"../_lib/getTimezoneOffsetInMilliseconds/index.js\";\nimport compareAsc from \"../compareAsc/index.js\";\nimport toDate from \"../toDate/index.js\";\nimport cloneObject from \"../_lib/cloneObject/index.js\";\nimport defaultLocale from \"../locale/en-US/index.js\";\nimport requiredArgs from \"../_lib/requiredArgs/index.js\";\nvar MILLISECONDS_IN_MINUTE = 1000 * 60;\nvar MINUTES_IN_DAY = 60 * 24;\nvar MINUTES_IN_MONTH = MINUTES_IN_DAY * 30;\nvar MINUTES_IN_YEAR = MINUTES_IN_DAY * 365;\n/**\n * @name formatDistanceStrict\n * @category Common Helpers\n * @summary Return the distance between the given dates in words.\n *\n * @description\n * Return the distance between the given dates in words, using strict units.\n * This is like `formatDistance`, but does not use helpers like 'almost', 'over',\n * 'less than' and the like.\n *\n * | Distance between dates | Result              |\n * |------------------------|---------------------|\n * | 0 ... 59 secs          | [0..59] seconds     |\n * | 1 ... 59 mins          | [1..59] minutes     |\n * | 1 ... 23 hrs           | [1..23] hours       |\n * | 1 ... 29 days          | [1..29] days        |\n * | 1 ... 11 months        | [1..11] months      |\n * | 1 ... N years          | [1..N]  years       |\n *\n * ### v2.0.0 breaking changes:\n *\n * - [Changes that are common for the whole library](https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#Common-Changes).\n *\n * - The function was renamed from `distanceInWordsStrict` to `formatDistanceStrict`\n *   to make its name consistent with `format` and `formatRelative`.\n *\n * - The order of arguments is swapped to make the function\n *   consistent with `differenceIn...` functions.\n *\n *   ```javascript\n *   // Before v2.0.0\n *\n *   distanceInWordsStrict(\n *     new Date(2015, 0, 2),\n *     new Date(2014, 6, 2)\n *   ) //=> '6 months'\n *\n *   // v2.0.0 onward\n *\n *   formatDistanceStrict(\n *     new Date(2014, 6, 2),\n *     new Date(2015, 0, 2)\n *   ) //=> '6 months'\n *   ```\n *\n * - `partialMethod` option is renamed to `roundingMethod`.\n *\n *   ```javascript\n *   // Before v2.0.0\n *\n *   distanceInWordsStrict(\n *     new Date(1986, 3, 4, 10, 32, 0),\n *     new Date(1986, 3, 4, 10, 33, 1),\n *     { partialMethod: 'ceil' }\n *   ) //=> '2 minutes'\n *\n *   // v2.0.0 onward\n *\n *   formatDistanceStrict(\n *     new Date(1986, 3, 4, 10, 33, 1),\n *     new Date(1986, 3, 4, 10, 32, 0),\n *     { roundingMethod: 'ceil' }\n *   ) //=> '2 minutes'\n *   ```\n *\n * - If `roundingMethod` is not specified, it now defaults to `round` instead of `floor`.\n *\n * - `unit` option now accepts one of the strings:\n *   'second', 'minute', 'hour', 'day', 'month' or 'year' instead of 's', 'm', 'h', 'd', 'M' or 'Y'\n *\n *   ```javascript\n *   // Before v2.0.0\n *\n *   distanceInWordsStrict(\n *     new Date(1986, 3, 4, 10, 32, 0),\n *     new Date(1986, 3, 4, 10, 33, 1),\n *     { unit: 'm' }\n *   )\n *\n *   // v2.0.0 onward\n *\n *   formatDistanceStrict(\n *     new Date(1986, 3, 4, 10, 33, 1),\n *     new Date(1986, 3, 4, 10, 32, 0),\n *     { unit: 'minute' }\n *   )\n *   ```\n *\n * @param {Date|Number} date - the date\n * @param {Date|Number} baseDate - the date to compare with\n * @param {Object} [options] - an object with options.\n * @param {Boolean} [options.addSuffix=false] - result indicates if the second date is earlier or later than the first\n * @param {'second'|'minute'|'hour'|'day'|'month'|'year'} [options.unit] - if specified, will force a unit\n * @param {'floor'|'ceil'|'round'} [options.roundingMethod='round'] - which way to round partial units\n * @param {Locale} [options.locale=defaultLocale] - the locale object. See [Locale]{@link https://date-fns.org/docs/Locale}\n * @returns {String} the distance in words\n * @throws {TypeError} 2 arguments required\n * @throws {RangeError} `date` must not be Invalid Date\n * @throws {RangeError} `baseDate` must not be Invalid Date\n * @throws {RangeError} `options.roundingMethod` must be 'floor', 'ceil' or 'round'\n * @throws {RangeError} `options.unit` must be 'second', 'minute', 'hour', 'day', 'month' or 'year'\n * @throws {RangeError} `options.locale` must contain `formatDistance` property\n *\n * @example\n * // What is the distance between 2 July 2014 and 1 January 2015?\n * const result = formatDistanceStrict(new Date(2014, 6, 2), new Date(2015, 0, 2))\n * //=> '6 months'\n *\n * @example\n * // What is the distance between 1 January 2015 00:00:15\n * // and 1 January 2015 00:00:00?\n * const result = formatDistanceStrict(\n *   new Date(2015, 0, 1, 0, 0, 15),\n *   new Date(2015, 0, 1, 0, 0, 0)\n * )\n * //=> '15 seconds'\n *\n * @example\n * // What is the distance from 1 January 2016\n * // to 1 January 2015, with a suffix?\n * const result = formatDistanceStrict(new Date(2015, 0, 1), new Date(2016, 0, 1), {\n *   addSuffix: true\n * })\n * //=> '1 year ago'\n *\n * @example\n * // What is the distance from 1 January 2016\n * // to 1 January 2015, in minutes?\n * const result = formatDistanceStrict(new Date(2016, 0, 1), new Date(2015, 0, 1), {\n *   unit: 'minute'\n * })\n * //=> '525600 minutes'\n *\n * @example\n * // What is the distance from 1 January 2015\n * // to 28 January 2015, in months, rounded up?\n * const result = formatDistanceStrict(new Date(2015, 0, 28), new Date(2015, 0, 1), {\n *   unit: 'month',\n *   roundingMethod: 'ceil'\n * })\n * //=> '1 month'\n *\n * @example\n * // What is the distance between 1 August 2016 and 1 January 2015 in Esperanto?\n * import { eoLocale } from 'date-fns/locale/eo'\n * const result = formatDistanceStrict(new Date(2016, 7, 1), new Date(2015, 0, 1), {\n *   locale: eoLocale\n * })\n * //=> '1 jaro'\n */\n\nexport default function formatDistanceStrict(dirtyDate, dirtyBaseDate) {\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  requiredArgs(2, arguments);\n  var locale = options.locale || defaultLocale;\n\n  if (!locale.formatDistance) {\n    throw new RangeError('locale must contain localize.formatDistance property');\n  }\n\n  var comparison = compareAsc(dirtyDate, dirtyBaseDate);\n\n  if (isNaN(comparison)) {\n    throw new RangeError('Invalid time value');\n  }\n\n  var localizeOptions = cloneObject(options);\n  localizeOptions.addSuffix = Boolean(options.addSuffix);\n  localizeOptions.comparison = comparison;\n  var dateLeft;\n  var dateRight;\n\n  if (comparison > 0) {\n    dateLeft = toDate(dirtyBaseDate);\n    dateRight = toDate(dirtyDate);\n  } else {\n    dateLeft = toDate(dirtyDate);\n    dateRight = toDate(dirtyBaseDate);\n  }\n\n  var roundingMethod = options.roundingMethod == null ? 'round' : String(options.roundingMethod);\n  var roundingMethodFn;\n\n  if (roundingMethod === 'floor') {\n    roundingMethodFn = Math.floor;\n  } else if (roundingMethod === 'ceil') {\n    roundingMethodFn = Math.ceil;\n  } else if (roundingMethod === 'round') {\n    roundingMethodFn = Math.round;\n  } else {\n    throw new RangeError(\"roundingMethod must be 'floor', 'ceil' or 'round'\");\n  }\n\n  var milliseconds = dateRight.getTime() - dateLeft.getTime();\n  var minutes = milliseconds / MILLISECONDS_IN_MINUTE;\n  var timezoneOffset = getTimezoneOffsetInMilliseconds(dateRight) - getTimezoneOffsetInMilliseconds(dateLeft); // Use DST-normalized difference in minutes for years, months and days;\n  // use regular difference in minutes for hours, minutes and seconds.\n\n  var dstNormalizedMinutes = (milliseconds - timezoneOffset) / MILLISECONDS_IN_MINUTE;\n  var unit;\n\n  if (options.unit == null) {\n    if (minutes < 1) {\n      unit = 'second';\n    } else if (minutes < 60) {\n      unit = 'minute';\n    } else if (minutes < MINUTES_IN_DAY) {\n      unit = 'hour';\n    } else if (dstNormalizedMinutes < MINUTES_IN_MONTH) {\n      unit = 'day';\n    } else if (dstNormalizedMinutes < MINUTES_IN_YEAR) {\n      unit = 'month';\n    } else {\n      unit = 'year';\n    }\n  } else {\n    unit = String(options.unit);\n  } // 0 up to 60 seconds\n\n\n  if (unit === 'second') {\n    var seconds = roundingMethodFn(milliseconds / 1000);\n    return locale.formatDistance('xSeconds', seconds, localizeOptions); // 1 up to 60 mins\n  } else if (unit === 'minute') {\n    var roundedMinutes = roundingMethodFn(minutes);\n    return locale.formatDistance('xMinutes', roundedMinutes, localizeOptions); // 1 up to 24 hours\n  } else if (unit === 'hour') {\n    var hours = roundingMethodFn(minutes / 60);\n    return locale.formatDistance('xHours', hours, localizeOptions); // 1 up to 30 days\n  } else if (unit === 'day') {\n    var days = roundingMethodFn(dstNormalizedMinutes / MINUTES_IN_DAY);\n    return locale.formatDistance('xDays', days, localizeOptions); // 1 up to 12 months\n  } else if (unit === 'month') {\n    var months = roundingMethodFn(dstNormalizedMinutes / MINUTES_IN_MONTH);\n    return months === 12 && options.unit !== 'month' ? locale.formatDistance('xYears', 1, localizeOptions) : locale.formatDistance('xMonths', months, localizeOptions); // 1 year up to max Date\n  } else if (unit === 'year') {\n    var years = roundingMethodFn(dstNormalizedMinutes / MINUTES_IN_YEAR);\n    return locale.formatDistance('xYears', years, localizeOptions);\n  }\n\n  throw new RangeError(\"unit must be 'second', 'minute', 'hour', 'day', 'month' or 'year'\");\n}","import toDate from \"../toDate/index.js\";\nimport requiredArgs from \"../_lib/requiredArgs/index.js\";\n/**\n * @name max\n * @category Common Helpers\n * @summary Return the latest of the given dates.\n *\n * @description\n * Return the latest of the given dates.\n *\n * ### v2.0.0 breaking changes:\n *\n * - [Changes that are common for the whole library](https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#Common-Changes).\n *\n * - `max` function now accepts an array of dates rather than spread arguments.\n *\n *   ```javascript\n *   // Before v2.0.0\n *   var date1 = new Date(1989, 6, 10)\n *   var date2 = new Date(1987, 1, 11)\n *   var maxDate = max(date1, date2)\n *\n *   // v2.0.0 onward:\n *   var dates = [new Date(1989, 6, 10), new Date(1987, 1, 11)]\n *   var maxDate = max(dates)\n *   ```\n *\n * @param {Date[]|Number[]} datesArray - the dates to compare\n * @returns {Date} the latest of the dates\n * @throws {TypeError} 1 argument required\n *\n * @example\n * // Which of these dates is the latest?\n * var result = max([\n *   new Date(1989, 6, 10),\n *   new Date(1987, 1, 11),\n *   new Date(1995, 6, 2),\n *   new Date(1990, 0, 1)\n * ])\n * //=> Sun Jul 02 1995 00:00:00\n */\n\nexport default function max(dirtyDatesArray) {\n  requiredArgs(1, arguments);\n  var datesArray; // `dirtyDatesArray` is Array, Set or Map, or object with custom `forEach` method\n\n  if (dirtyDatesArray && typeof dirtyDatesArray.forEach === 'function') {\n    datesArray = dirtyDatesArray; // If `dirtyDatesArray` is Array-like Object, convert to Array.\n  } else if (typeof dirtyDatesArray === 'object' && dirtyDatesArray !== null) {\n    datesArray = Array.prototype.slice.call(dirtyDatesArray);\n  } else {\n    // `dirtyDatesArray` is non-iterable, return Invalid Date\n    return new Date(NaN);\n  }\n\n  var result;\n  datesArray.forEach(function (dirtyDate) {\n    var currentDate = toDate(dirtyDate);\n\n    if (result === undefined || result < currentDate || isNaN(Number(currentDate))) {\n      result = currentDate;\n    }\n  });\n  return result || new Date(NaN);\n}","import { ref } from 'vue'\n\nconst tickerDate = ref(new Date())\n\n// This date object is updated every 15 seconds\n// So it's not an accurate 'now', but will change frequently enough\n// that it can be used as a reactive trigger for relative date displays\nsetInterval(() => { tickerDate.value = new Date() }, 15_000)\n\nexport default function () {\n  return {\n    tickerDate\n  }\n}\n","import { render } from \"./DateFriendly.vue?vue&type=template&id=789d7969\"\nimport script from \"./DateFriendly.vue?vue&type=script&lang=js\"\nexport * from \"./DateFriendly.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/media/riven/projects/aavegotchi/realm/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./DataFetcherBaazaarListings.vue?vue&type=template&id=5c8cde2e\"\nimport script from \"./DataFetcherBaazaarListings.vue?vue&type=script&lang=js\"\nexport * from \"./DataFetcherBaazaarListings.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/media/riven/projects/aavegotchi/realm/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <div>\n    <div\n      v-if=\"fetchStatus.loaded\"\n      style=\"margin-bottom: 5px; font-style: italic; font-size: 0.95em;\"\n    >\n      Parcel owners fetched\n      <DateFriendly :date=\"lastFetchDate\" />\n    </div>\n\n    <div>\n      <button\n        type=\"button\"\n        :disabled=\"!canSubmitFetch\"\n        @click=\"fetchOwners\"\n      >\n        Get Latest Parcel Owners\n      </button>\n      <div style=\"margin-top: 5px;\">\n        <span v-if=\"fetchStatus.loading\">\n          <LoadingSpinner style=\"position: relative; top: 2px; margin-right: 2px;\" />\n          loading owners...\n        </span>\n        <span v-if=\"fetchStatus.error\">\n          Error loading owners: {{ fetchStatus.errorMessage }}\n        </span>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport useParcelOwners from '@/data/useParcelOwners'\nimport DateFriendly from './DateFriendly'\nimport LoadingSpinner from './LoadingSpinner.vue'\n\nexport default {\n  components: {\n    DateFriendly,\n    LoadingSpinner\n  },\n  setup (props) {\n    const {\n      canSubmitFetch,\n      fetchStatus,\n      fetchOwners,\n      lastFetchDate\n    } = useParcelOwners()\n\n    return {\n      canSubmitFetch,\n      fetchStatus,\n      fetchOwners,\n      lastFetchDate\n    }\n  }\n}\n</script>\n\n<style scoped>\n</style>\n","import { render } from \"./DataFetcherParcelOwners.vue?vue&type=template&id=4a1881da\"\nimport script from \"./DataFetcherParcelOwners.vue?vue&type=script&lang=js\"\nexport * from \"./DataFetcherParcelOwners.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/media/riven/projects/aavegotchi/realm/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <details class=\"filter-container\">\n    <summary>\n      <h3>Filter by Baazaar Listings</h3>\n    </summary>\n\n    <div\n      v-for=\"{ id, label } in OPTIONS\"\n      :key=\"id\"\n    >\n      <label>\n        <input\n          type=\"radio\"\n          :value=\"id\"\n          name=\"baazaarFilterOptions\"\n          :checked=\"modelValue === id\"\n          @change=\"$emit('update:modelValue', id)\"\n        />\n        <span>\n          {{ label }}\n        </span>\n      </label>\n    </div>\n  </details>\n</template>\n\n<script>\n\nconst OPTIONS = [\n  { id: 'all', label: 'All parcels' },\n  { id: 'listed', label: 'Parcels listed on Baazaar' },\n  { id: 'unlisted', label: 'Parcels that are not listed on Baazaar' }\n]\n\nconst getDefaultValue = () => 'all'\n\nconst getFilter = function (listingsByParcel, filterBaazaar) {\n  return function (parcel) {\n    if (filterBaazaar === 'all') { return true }\n    if (filterBaazaar === 'listed') { return !!listingsByParcel[parcel.id] }\n    return !listingsByParcel[parcel.id]\n  }\n}\nexport { getDefaultValue, getFilter }\n\nexport default {\n  props: {\n    modelValue: { type: String, default: 'all' }\n  },\n  computed: {\n    OPTIONS () { return OPTIONS }\n  }\n}\n</script>\n\n<style scoped>\n</style>\n","import { render } from \"./FilterBaazaar.vue?vue&type=template&id=1f1dc203\"\nimport script from \"./FilterBaazaar.vue?vue&type=script&lang=js\"\nexport * from \"./FilterBaazaar.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/media/riven/projects/aavegotchi/realm/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <details class=\"filter-container\">\n    <summary>\n      <h3>Filter by Owner</h3>\n    </summary>\n\n    <label>\n      <div>\n        Owner addresses\n      </div>\n      <TextareaList\n        class=\"addresses-textarea\"\n        :modelValue=\"modelValue\"\n        :delimiterRegexp=\"/[^x0-9a-f]+/\"\n        @update:modelValue=\"$emit('update:modelValue', $event)\"\n      />\n    </label>\n  </details>\n</template>\n\n<script>\nimport TextareaList from './TextareaList.vue'\n\nconst getFilter = function (ownersByParcelId, idsArray) {\n  if (idsArray?.length) {\n    return (parcel) => {\n      const owner = ownersByParcelId[parcel.id]\n      return owner && idsArray.includes(owner)\n    }\n  }\n  return () => true\n}\nexport { getFilter }\n\nexport default {\n  components: {\n    TextareaList\n  },\n  props: {\n    modelValue: { type: Array, default: () => [] }\n  }\n}\n</script>\n\n<style scoped>\n  label {\n    margin-top: 10px;\n  }\n  .addresses-textarea {\n    width: 90%;\n    height: 70px;\n    margin-top: 5px;\n  }\n</style>\n","import { render } from \"./FilterOwners.vue?vue&type=template&id=efddcedc&scoped=true\"\nimport script from \"./FilterOwners.vue?vue&type=script&lang=js\"\nexport * from \"./FilterOwners.vue?vue&type=script&lang=js\"\n\nimport \"./FilterOwners.vue?vue&type=style&index=0&id=efddcedc&scoped=true&lang=css\"\n\nimport exportComponent from \"/media/riven/projects/aavegotchi/realm/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-efddcedc\"]])\n\nexport default __exports__","import { render } from \"./CitaadelPage.vue?vue&type=template&id=433119fc&scoped=true\"\nimport script from \"./CitaadelPage.vue?vue&type=script&lang=js\"\nexport * from \"./CitaadelPage.vue?vue&type=script&lang=js\"\n\nimport \"./CitaadelPage.vue?vue&type=style&index=0&id=433119fc&scoped=true&lang=css\"\n\nimport exportComponent from \"/media/riven/projects/aavegotchi/realm/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-433119fc\"]])\n\nexport default __exports__","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./CitaadelPage.vue?vue&type=style&index=0&id=433119fc&scoped=true&lang=css\"","import { ref, computed } from 'vue'\nimport useStatus from '@/data/useStatus'\nimport BigNumber from 'bignumber.js'\n\n// We need to fetch all listings in full to get accurate info.\n// Use cached results just for development\n// import initialListings from './baazaar/listings.json'\n// import initialSales from './baazaar/sales.json'\n// Object.values(initialListings).map(item => {\n//   item.priceInGhst = new BigNumber(item.priceInGhst)\n//   item.dateCreated = new Date(item.dateCreated)\n// })\n// Object.values(initialSales).map(item => {\n//   item.priceInGhst = new BigNumber(item.priceInGhst)\n//   item.datePurchased = new Date(item.datePurchased)\n// })\n// const listingsByParcelId = ref(initialListings)\n// const salesByParcelId = ref(initialSales)\n\nconst listingsByParcelId = ref({})\nconst salesByParcelId = ref({})\n\nconst SUBGRAPH_URL = 'https://api.thegraph.com/subgraphs/name/aavegotchi/aavegotchi-core-matic'\nconst FETCH_PAGE_SIZE = 1000\n\nconst resetListings = function () {\n  listingsByParcelId.value = {}\n  salesByParcelId.value = {}\n  lastFetchDate.value = null\n}\n\nconst setListings = function (listings) {\n  for (const listing of listings) {\n    const priceInGhst = (new BigNumber(listing.priceInWei)).dividedBy(10e17)\n    if (listing.timePurchased !== '0') {\n      salesByParcelId.value[listing.tokenId] = {\n        id: listing.id,\n        priceInGhst,\n        datePurchased: new Date(listing.timePurchased * 1000)\n      }\n    } else {\n      listingsByParcelId.value[listing.tokenId] = {\n        id: listing.id,\n        priceInGhst,\n        dateCreated: new Date(listing.timeCreated * 1000)\n      }\n    }\n  }\n}\n\nconst { status: fetchStatus, setLoading } = useStatus()\n\nconst canSubmitFetch = computed(() => !fetchStatus.value.loading)\nconst lastFetchDate = ref(null)\n\nconst fetchListings = function () {\n  const [isStale, setLoaded, setError] = setLoading()\n  let skip = 0\n  let listings = []\n  const fetchListingsFromSubgraph = function () {\n    fetch(SUBGRAPH_URL, {\n      method: 'POST',\n      body: JSON.stringify({\n        query: `{\n          erc721Listings(first: ${FETCH_PAGE_SIZE}, skip: ${skip}, orderBy: timeCreated, where: { category: \"4\", cancelled: false }) {\n            id\n            tokenId\n            timeCreated\n            timePurchased\n            priceInWei\n          }\n        }`\n      })\n    }).then(async response => {\n      if (isStale()) { console.log('Stale request, ignoring'); return }\n      if (!response.ok) {\n        setError('There was an error fetching listings')\n        return\n      }\n      const responseJson = await response.json()\n      if (responseJson.data?.erc721Listings) {\n        listings = listings.concat(responseJson.data.erc721Listings)\n        if (responseJson.data.erc721Listings.length < FETCH_PAGE_SIZE) {\n          // finished fetching all pages\n          resetListings()\n          setListings(listings)\n          lastFetchDate.value = new Date()\n          setLoaded()\n          return\n        }\n        // fetch the next page of results\n        skip += FETCH_PAGE_SIZE\n        fetchListingsFromSubgraph()\n      } else {\n        setError('Unexpected response')\n      }\n    }).catch(error => {\n      console.error(error)\n      setError('There was an error fetching listings')\n    })\n  }\n\n  fetchListingsFromSubgraph()\n}\n\nexport default function useBaazaarListings () {\n  return {\n    listingsByParcelId,\n    salesByParcelId,\n    canSubmitFetch,\n    fetchStatus,\n    fetchListings,\n    lastFetchDate\n  }\n}\n","import { ref, computed } from 'vue'\nimport useStatus from '@/data/useStatus'\n\n// We need to fetch all parcels in full to get accurate info.\n// Use cached results just for development\n// import initialOwners from './parcels/parcelOwners.json'\n// const ownersByParcelId = ref(initialOwners)\n\nconst ownersByParcelId = ref({})\n\nconst SUBGRAPH_URL = 'https://api.thegraph.com/subgraphs/name/aavegotchi/aavegotchi-core-matic'\nconst FETCH_PAGE_SIZE = 1000\n\nconst resetOwners = function () {\n  ownersByParcelId.value = {}\n  lastFetchDate.value = null\n}\n\nconst setOwners = function (parcels) {\n  for (const parcel of parcels) {\n    ownersByParcelId.value[parcel.tokenId] = parcel.owner?.id\n  }\n}\n\nconst { status: fetchStatus, setLoading } = useStatus()\n\nconst canSubmitFetch = computed(() => !fetchStatus.value.loading)\nconst lastFetchDate = ref(null)\n\nconst fetchOwners = function () {\n  const [isStale, setLoaded, setError] = setLoading()\n  let lastIdNum = 0\n  let parcels = []\n  const fetchOwnersFromSubgraph = function () {\n    fetch(SUBGRAPH_URL, {\n      method: 'POST',\n      body: JSON.stringify({\n        query: `{\n          parcels(first: ${FETCH_PAGE_SIZE}, orderBy: tokenId, where: { tokenId_gt: ${lastIdNum} }) {\n            tokenId\n            owner {\n              id\n            }\n          }\n        }`\n      })\n    }).then(async response => {\n      if (isStale()) { console.log('Stale request, ignoring'); return }\n      if (!response.ok) {\n        setError('There was an error fetching parcel owners')\n        return\n      }\n      const responseJson = await response.json()\n      if (responseJson.data?.parcels) {\n        parcels = parcels.concat(responseJson.data.parcels)\n        if (responseJson.data.parcels.length < FETCH_PAGE_SIZE) {\n          // finished fetching all pages\n          resetOwners()\n          setOwners(parcels)\n          lastFetchDate.value = new Date()\n          setLoaded()\n          return\n        }\n        // fetch the next page of results\n        lastIdNum = responseJson.data.parcels[responseJson.data.parcels.length - 1].tokenId - 0\n        fetchOwnersFromSubgraph()\n      } else {\n        setError('Unexpected response')\n      }\n    }).catch(error => {\n      console.error(error)\n      setError('There was an error fetching parcel owners')\n    })\n  }\n\n  fetchOwnersFromSubgraph()\n}\n\nexport default function useParcelOwners () {\n  return {\n    ownersByParcelId,\n    canSubmitFetch,\n    fetchStatus,\n    fetchOwners,\n    lastFetchDate\n  }\n}\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./FilterOwners.vue?vue&type=style&index=0&id=efddcedc&scoped=true&lang=css\""],"sourceRoot":""}