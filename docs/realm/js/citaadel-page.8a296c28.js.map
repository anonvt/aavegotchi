{"version":3,"sources":["webpack:///./src/components/CitaadelPage.vue","webpack:///./node_modules/fast-sort/dist/sort.es.js","webpack:///./src/data/useParcelPrices.js","webpack:///./src/components/DataFetcherBaazaarListings.vue","webpack:///./src/components/DateFriendly.vue","webpack:///./node_modules/date-fns/esm/compareAsc/index.js","webpack:///./node_modules/date-fns/esm/_lib/assign/index.js","webpack:///./node_modules/date-fns/esm/_lib/cloneObject/index.js","webpack:///./node_modules/date-fns/esm/formatDistanceStrict/index.js","webpack:///./node_modules/date-fns/esm/max/index.js","webpack:///./src/data/useReactiveDate.js","webpack:///./src/components/DateFriendly.vue?e98a","webpack:///./src/components/DataFetcherBaazaarListings.vue?18e3","webpack:///./src/components/DataFetcherParcelOwners.vue","webpack:///./src/components/DataFetcherParcelOwners.vue?907e","webpack:///./src/components/FilterBaazaar.vue","webpack:///./src/components/FilterBaazaar.vue?c986","webpack:///./src/components/FilterOwners.vue","webpack:///./src/components/FilterOwners.vue?2057","webpack:///./src/components/CitaadelPage.vue?5f8a","webpack:///./src/components/CitaadelPage.vue?e5fa","webpack:///./src/data/useBaazaarListings.js","webpack:///./src/data/useParcelOwners.js","webpack:///./src/components/FilterOwners.vue?643c"],"names":["style","class","sidebar","colorSchemeLabel","colorSchemeOptions","option","key","id","colorScheme","colorBy","type","name","value","label","size","lastPrice","scaleName","SCALE_NAMES","min","max","baazaarPrice","owner","whalePx","highlight","debouncedSetHighlight","$event","target","mapConfig","filters","baazaar","walls","districts","roads","parcelIds","parcelNames","boosts","owners","selectedParcel","selectedParcelId","parcelHash","sizeLabel","district","address","currentListing","href","priceInGhst","toString","lastSale","formattedDate","auctionPrice","hasBoost","fudBoost","fomoBoost","alphaBoost","kekBoost","top","numParcelsMatchingFilters","numParcelsToDisplay","percentParcelsMatchingFilters","main","viewMode","parcels","parcelsToDisplay","parcelsMatchingFilters","result","parcelColors","onClickParcel","listParcelsToDisplay","length","parcel","listingsByParcelId","salesByParcelId","listParcelsShowAll","castComparer","comparer","a","b","order","throwInvalidConfigErrorIfTrue","condition","context","Error","unpackObjectSorter","sortByObj","_a","asc","desc","sortBy","multiPropertySorterProvider","defaultComparer","multiPropertySorter","sortByArr","depth","valA","valB","objectSorterConfig","equality","getSortStrategy","undefined","includes","Array","isArray","multiPropSorter_1","sortArray","ctx","sort","createNewSortInstance","opts","_ctx","inPlaceSorting","slice","by","inPlaceSort","useParcels","parcelsById","fetchParcelsStatus","fetchStatus","useBaazaarListings","useStatus","fetchAuctionPricesStatus","status","setLoading","auctionPricesById","isStale","setLoaded","setError","then","json","default","catch","error","console","pricesByParcelId","computed","prices","loaded","parcelId","useParcelPrices","date","lastFetchDate","disabled","canSubmitFetch","fetchListings","loading","errorMessage","friendlyDate","compareAsc","dirtyDateLeft","dirtyDateRight","requiredArgs","arguments","dateLeft","toDate","dateRight","diff","getTime","dirtyObject","TypeError","property","Object","prototype","hasOwnProperty","call","cloneObject","MILLISECONDS_IN_MINUTE","MINUTES_IN_DAY","MINUTES_IN_MONTH","MINUTES_IN_YEAR","formatDistanceStrict","dirtyDate","dirtyBaseDate","options","locale","formatDistance","RangeError","comparison","isNaN","localizeOptions","addSuffix","Boolean","roundingMethodFn","roundingMethod","String","Math","floor","ceil","round","unit","milliseconds","minutes","timezoneOffset","getTimezoneOffsetInMilliseconds","dstNormalizedMinutes","seconds","roundedMinutes","hours","days","months","years","dirtyDatesArray","datesArray","forEach","Date","NaN","currentDate","Number","tickerDate","ref","setInterval","props","required","setup","useReactiveDate","__exports__","components","DateFriendly","LoadingSpinner","fetchOwners","useParcelOwners","OPTIONS","checked","modelValue","$emit","getDefaultValue","getFilter","listingsByParcel","filterBaazaar","delimiterRegexp","ownersByParcelId","idsArray","TextareaList","PrereqParcels","LayoutMapWithFilters","DataFetcherBaazaarListings","DataFetcherParcelOwners","EthAddress","CitaadelMap","MapConfig","FilterBaazaar","FilterSize","FilterWalls","FilterDistricts","FilterRoads","FilterParcelIds","FilterParcelNames","FilterBoosts","FilterOwners","baazaarListingsFetchStatus","fetchBaazaarListings","ownersFetchStatus","map","wall","humble","reasonable","spacious","parseInt","find","color","prereqBaazaarListings","prereqOwners","immediate","baazaarFilter","ownersFilter","lastPriceScalesBySize","scales","configBySize","config","baazaarPriceScalesBySize","ownerScale","TOP_OWNERS_N","topOwnerScale","whalePxScale","whalesPx","totalPerOwner","pxBySizeLabel","sortedWhalePx","entries","parcelsFetchStatus","values","getColor","scale","toNumber","topOwners","item","topIndex","indexOf","fromEntries","idFilter","nameFilter","sizesFilter","wallsFilter","districtsFilter","roadsFilter","boostsFilter","applyFilters","numMatches","show","i","percent","rounded","format","datePurchased","listParcels","filter","p","priceInGhstJsNum","SCALE_GRADIENTS","render","SUBGRAPH_URL","FETCH_PAGE_SIZE","resetListings","setListings","listings","listing","BigNumber","priceInWei","dividedBy","timePurchased","tokenId","dateCreated","timeCreated","lastTimeCreated","fetchListingsFromSubgraph","fetch","method","body","JSON","stringify","query","response","log","ok","responseJson","data","erc721Listings","concat","resetOwners","setOwners","lastIdNum","fetchOwnersFromSubgraph"],"mappings":"kQAIQ,eAAqB,UAAjB,gBAAY,M,GAEXA,MAAA,0B,GAKIC,MAAM,oB,GAKRD,MAAA,0B,iBAA4B,e,yBAyBzBA,MAAA,iC,GAGCA,MAAA,0B,iBACI,mB,uDAoBA,U,2CAQA,U,uCAkBLA,MAAA,iC,GAGCA,MAAA,0B,iBACI,mB,uDAoBA,U,2CAQA,U,qDAcF,mB,uCAuBA,mB,eAmBLA,MAAA,sB,iBAEO,U,iBAQA,U,2BAaJ,mB,qBAyBPC,MAAM,2B,uBAUN,eAAiC,UAA7B,4BAAwB,M,uBAG5B,eAAI,sB,uBACJ,eAAI,sB,uBACJ,eAAI,sB,2BAC6B,Y,uEAwB5B,a,IAEED,MAAA,wB,8DAec,U,6BA8BuB,uB,UAIxCC,MAAM,gB,yBAgBJD,MAAA,mB,yCASsC,6B,kpBAtVtD,eA8WgB,S,wBA7Wd,iBA4WuB,CA5WvB,eA4WuB,SA3WVE,QAAO,gBAChB,iBAAqB,CAArB,EAEA,eAGM,MAHN,EAGM,CAFJ,eAA2D,IAA/BF,MAAA,2BAC5B,eAAwD,IAA/BA,MAAA,6BAG3B,eAwMU,UAxMV,EAwMU,CAvMR,eAEU,gBADR,eAA6C,UAAzC,iBAAc,eAAG,EAAAG,kBAAgB,KAGvC,eAiBM,MAjBN,EAiBM,C,sBAdJ,eAaM,2BAZa,EAAAC,oBAAkB,SAA5BC,G,wBADT,eAaM,OAXHC,IAAKD,EAAOE,I,CAEb,eAQQ,c,eAPN,eAKE,S,qDAJS,EAAAC,YAAYC,QAAO,IAC5BC,KAAK,QACLC,KAAK,UACJC,MAAOP,EAAOE,I,mBAHN,EAAAC,YAAYC,W,eAIrB,IACF,eAAGJ,EAAOQ,OAAK,U,QAKS,cAAnB,EAAAL,YAAYC,S,iBAAvB,eAgDM,U,iBA/CJ,eA8CM,2BA7CW,CAAC,SAAU,aAAc,aAAW,SAA5CK,G,OADT,eA8CM,OA5CHR,IAAKQ,EACNd,MAAA,0B,CAEA,eAEK,KAFL,EAEK,eADAc,GAAO,KACZ,GACA,eAmBM,MAnBN,EAmBM,CAlBJ,eAWQ,c,iBATN,eAQS,U,yCARQ,EAAAN,YAAYO,UAAUD,GAAME,UAAS,I,qBACpD,eAMS,2BALa,EAAAC,aAAW,SAAxBD,G,wBADT,eAMS,UAJNV,IAAKU,EACLJ,MAAOI,G,eAELA,GAAS,Q,qBANC,EAAAR,YAAYO,UAAUD,GAAME,eAU/C,eAKE,OAJAf,MAAM,sBACLD,MAAK,gB,WAAsC,kBAAgB,cAAY,UAAU,GAAM,c,UAK5F,eAiBM,YAhBJ,eAOQ,c,iBALN,eAIE,S,yCAHS,EAAAQ,YAAYO,UAAUD,GAAMI,IAAG,GACxCR,KAAK,SACLT,MAAM,e,mBAFG,EAAAO,YAAYO,UAAUD,GAAMI,SAKzC,eAOQ,c,iBALN,eAIE,S,yCAHS,EAAAV,YAAYO,UAAUD,GAAMK,IAAG,GACxCT,KAAK,SACLT,MAAM,e,mBAFG,EAAAO,YAAYO,UAAUD,GAAMK,gB,8BASjB,iBAAnB,EAAAX,YAAYC,S,iBAAvB,eAgDM,U,iBA/CJ,eA8CM,2BA7CW,CAAC,SAAU,aAAc,aAAW,SAA5CK,G,OADT,eA8CM,OA5CHR,IAAKQ,EACNd,MAAA,0B,CAEA,eAEK,KAFL,EAEK,eADAc,GAAO,KACZ,GACA,eAmBM,MAnBN,EAmBM,CAlBJ,eAWQ,c,iBATN,eAQS,U,yCARQ,EAAAN,YAAYY,aAAaN,GAAME,UAAS,I,qBACvD,eAMS,2BALa,EAAAC,aAAW,SAAxBD,G,wBADT,eAMS,UAJNV,IAAKU,EACLJ,MAAOI,G,eAELA,GAAS,Q,qBANC,EAAAR,YAAYY,aAAaN,GAAME,eAUlD,eAKE,OAJAf,MAAM,sBACLD,MAAK,gB,WAAsC,kBAAgB,cAAY,aAAa,GAAM,c,UAK/F,eAiBM,YAhBJ,eAOQ,c,iBALN,eAIE,S,yCAHS,EAAAQ,YAAYY,aAAaN,GAAMI,IAAG,GAC3CR,KAAK,SACLT,MAAM,e,mBAFG,EAAAO,YAAYY,aAAaN,GAAMI,SAK5C,eAOQ,c,iBALN,eAIE,S,yCAHS,EAAAV,YAAYY,aAAaN,GAAMK,IAAG,GAC3CT,KAAK,SACLT,MAAM,e,mBAFG,EAAAO,YAAYY,aAAaN,GAAMK,gB,8BASpB,UAAnB,EAAAX,YAAYC,S,iBAAvB,eAqBM,SApBJ,eAmBM,YAlBJ,eAWQ,c,iBATN,eAQS,U,qDARQ,EAAAD,YAAYa,MAAML,UAAS,K,qBAC1C,eAMS,2BALa,EAAAC,aAAW,SAAxBD,G,wBADT,eAMS,UAJNV,IAAKU,EACLJ,MAAOI,G,eAELA,GAAS,Q,qBANC,EAAAR,YAAYa,MAAML,eAUrC,eAKE,OAJAf,MAAM,sBACLD,MAAK,gB,WAAoC,kBAAgB,cAAY,MAAM,c,mCAOpD,YAAnB,EAAAQ,YAAYC,S,iBAAvB,eAyCM,SAxCJ,eAuCM,YAtCJ,eAWQ,c,iBATN,eAQS,U,qDARQ,EAAAD,YAAYc,QAAQN,UAAS,K,qBAC5C,eAMS,2BALa,EAAAC,aAAW,SAAxBD,G,wBADT,eAMS,UAJNV,IAAKU,EACLJ,MAAOI,G,eAELA,GAAS,Q,qBANC,EAAAR,YAAYc,QAAQN,eAUvC,eAKE,OAJAf,MAAM,sBACLD,MAAK,gB,WAAoC,kBAAgB,cAAY,QAAQ,c,QAIhF,eAmBM,MAnBN,EAmBM,CAhBJ,eAOQ,c,iBALN,eAIE,S,qDAHS,EAAAQ,YAAYc,QAAQJ,IAAG,IAChCR,KAAK,SACLT,MAAM,e,mBAFG,EAAAO,YAAYc,QAAQJ,SAKjC,eAOQ,c,iBALN,eAIE,S,qDAHS,EAAAV,YAAYc,QAAQH,IAAG,IAChCT,KAAK,SACLT,MAAM,e,mBAFG,EAAAO,YAAYc,QAAQH,gB,sBAST,cAAnB,EAAAX,YAAYC,S,iBAAvB,eASM,SARJ,eAOQ,c,EALN,eAIC,SAHCC,KAAK,QACJE,MAAO,EAAAJ,YAAYe,UACnB,QAAK,+BAAE,EAAAC,sBAAsBC,EAAOC,OAAOd,U,wCAMpD,eAAiC,I,WAAb,EAAAe,U,qDAAA,EAAAA,UAAS,K,uBAC7B,eAA2C,I,WAAnB,EAAAC,QAAQC,Q,qDAAR,EAAAD,QAAQC,QAAO,K,uBACvC,eAAqC,I,WAAhB,EAAAD,QAAQd,K,qDAAR,EAAAc,QAAQd,KAAI,K,uBACjC,eAAuC,I,WAAjB,EAAAc,QAAQE,M,qDAAR,EAAAF,QAAQE,MAAK,K,uBACnC,eAA+C,I,WAArB,EAAAF,QAAQG,U,uDAAR,EAAAH,QAAQG,UAAS,K,uBAC3C,eAAuC,I,WAAjB,EAAAH,QAAQI,M,uDAAR,EAAAJ,QAAQI,MAAK,K,uBACnC,eAA+C,I,WAArB,EAAAJ,QAAQK,U,uDAAR,EAAAL,QAAQK,UAAS,K,uBAC3C,eAAmD,I,WAAvB,EAAAL,QAAQM,Y,uDAAR,EAAAN,QAAQM,YAAW,K,uBAC/C,eAAyC,I,WAAlB,EAAAN,QAAQO,O,uDAAR,EAAAP,QAAQO,OAAM,K,uBACrC,eAAyC,I,WAAlB,EAAAP,QAAQQ,O,uDAAR,EAAAR,QAAQQ,OAAM,K,uBAErC,eAkEU,gBAhEA,EAAAC,gB,iBADR,eAgEM,MAhEN,EAgEM,CA5DJ,eAMS,UALP3B,KAAK,SACLV,MAAA,gBACC,QAAK,iCAAE,EAAAsC,iBAAgB,QACzB,WAID,E,eAAiC,QAE7B,eAAG,EAAAD,eAAe9B,IAAK,IAC3B,K,eAAI,SAAM,eAAG,EAAA8B,eAAeE,YAAa,IACzC,K,eAAI,SAAM,eAAG,EAAAF,eAAeG,WAAY,IACxC,K,eAAI,aAAU,eAAG,EAAAH,eAAeI,UAAW,IAC3C,GAAW,EAAAJ,eAAehB,O,iBAA1B,eAGM,S,EADJ,eAA8C,IAAjCqB,QAAS,EAAAL,eAAehB,O,6CAE5B,EAAAgB,eAAeM,gB,iBAA1B,eAOM,SANJ,eAKI,KAJDC,KAAI,gDAA2C,EAAAP,eAAeM,eAAepC,IAC9EmB,OAAO,UACR,qCACkC,eAAG,EAAAW,eAAeM,eAAeE,YAAYC,YAAa,SAC7F,Q,sBAES,EAAAT,eAAeU,U,iBAA1B,eAQM,SAPJ,eAMI,KALDH,KAAI,gDAA2C,EAAAP,eAAeU,SAASxC,IACxEmB,OAAO,UACR,4BACyB,eAAG,EAAAW,eAAeU,SAASC,eAAgB,SAC9D,eAAG,EAAAX,eAAeU,SAASF,YAAYC,YAAa,SAC3D,Q,sBAES,EAAAT,eAAeY,c,iBAA1B,eAEM,SAFkC,mBACvB,eAAG,EAAAZ,eAAeY,cAAe,SAClD,I,sBACA,eAqBM,Y,GAnBJ,eAkBM,MAlBN,GAkBM,CAjBY,EAAAZ,eAAea,U,iBAA/B,eAaW,gBAZyB,MAAvB,EAAAb,eAAec,U,iBAA1B,eAEM,SAFsC,SACrC,eAAG,EAAAd,eAAec,UAAQ,I,sBAEE,MAAxB,EAAAd,eAAee,W,iBAA1B,eAEM,SAFuC,UACrC,eAAG,EAAAf,eAAee,WAAS,I,sBAEC,MAAzB,EAAAf,eAAegB,Y,iBAA1B,eAEM,SAFwC,WACrC,eAAG,EAAAhB,eAAegB,YAAU,I,sBAEH,MAAvB,EAAAhB,eAAeiB,U,iBAA1B,eAEM,SAFsC,SACrC,eAAG,EAAAjB,eAAeiB,UAAQ,I,8CAGnC,eAEW,gB,4CAMVC,IAAG,gBACZ,iBAEW,CAFK,EAAAC,4BAA8B,EAAAC,qB,iBAA9C,eAEW,gB,eAFwD,gBACrD,eAAG,EAAAD,2BAA4B,YAC7C,I,KAC8C,IAAzB,EAAAA,2B,iBAArB,eAEW,gB,eAF2C,4CACZ,eAAG,EAAAC,qBAAsB,YACnE,I,uBACA,eAEW,gB,eAFM,YACP,eAAG,EAAAD,2BAA4B,aAAU,eAAG,EAAAE,+BAAgC,QAAK,eAAG,EAAAD,qBAAsB,yBACpH,I,SAESE,KAAI,gBACb,gBADiBC,EACjB,EADiBA,SACjB,MADyB,C,eACzB,eAQE,IANCjC,UAAW,EAAAA,UACXkC,QAAS,EAAAC,iBACTC,uBAAwB,EAAAA,uBAAuBC,OAC/CC,aAAc,EAAAA,aACd5B,eAAgB,EAAAA,eAChB,iBAAc,EAAA6B,e,mHANM,QAAbN,KAQc,SAAbA,G,iBAAX,eAmDM,UAlDa,EAAAO,qBAAqBC,Q,iBAIpC,eAoCK,KApCL,GAoCK,E,mBAnCH,eAkCK,2BAjCc,EAAAD,sBAAoB,SAA9BE,G,wBADT,eAkCK,MAhCF/D,IAAK+D,EAAO9D,I,CAEb,eAKI,KAJFqC,KAAK,IACJ,QAAK,mCAAU,EAAAsB,cAAcG,KAAM,c,eAEjCA,EAAO9D,IAAE,M,eACV,IACJ,eAAG8D,EAAO9B,YAAa,IACvB,eAAG8B,EAAO7B,WAAY,aACb,eAAG6B,EAAO5B,UAAW,IAC9B,GACQ,EAAA6B,mBAAmBD,EAAO9D,K,iBADlC,eAUO,OAVP,GAUO,CANL,eAKI,KAJDqC,KAAI,gDAA2C,EAAA0B,mBAAmBD,EAAO9D,IAAIA,IAC9EmB,OAAO,UACR,YACS,eAAG,EAAA4C,mBAAmBD,EAAO9D,IAAIsC,YAAYC,YAAa,SACpE,S,sBAEU,EAAAyB,gBAAgBF,EAAO9D,K,iBAAnC,eASO,W,GAPL,eAMI,KALDqC,KAAI,gDAA2C,EAAA2B,gBAAgBF,EAAO9D,IAAIA,IAC3EmB,OAAO,U,eAEJ,EAAA6C,gBAAgBF,EAAO9D,IAAIyC,eAAgB,QAC1C,eAAG,EAAAuB,gBAAgBF,EAAO9D,IAAIsC,YAAYC,YAAa,SAC7D,S,sDArCR,eAEW,gB,SAwCA,EAAAU,0BAA4B,EAAAW,qBAAqBC,SAAW,EAAAI,oB,iBAAvE,eAOM,UANJ,eAKS,UAJP9D,KAAK,SACJ,QAAK,iCAAE,EAAA8D,oBAAkB,KAC3B,aACU,eAAG,EAAAhB,2BAA4B,qBAC1C,M,0MCxWRiB,GAAe,SAAUC,GAAY,OAAO,SAAUC,EAAGC,EAAGC,GAAS,OAAOH,EAASC,EAAGC,EAAGC,GAASA,IACpGC,GAAgC,SAAUC,EAAWC,GACrD,GAAID,EACA,MAAME,MAAM,wBAA0BD,IAE1CE,GAAqB,SAAUC,GAC/B,IAAIC,EAAKD,GAAa,GAAIE,EAAMD,EAAGC,IAAKC,EAAOF,EAAGE,KAC9CT,EAAQQ,EAAM,GAAK,EACnBE,EAAUF,GAAOC,EAErBR,IAA+BS,EAAQ,qCACvCT,GAA8BO,GAAOC,EAAM,4DAC3C,IAAIZ,EAAWS,EAAUT,UAAYD,GAAaU,EAAUT,UAC5D,MAAO,CAAEG,MAAOA,EAAOU,OAAQA,EAAQb,SAAUA,IAGjDc,GAA8B,SAAUC,GACxC,OAAO,SAASC,EAAoBH,EAAQI,EAAWC,EAAOf,EAAOH,EAAUC,EAAGC,GAC9E,IAAIiB,EACAC,EACJ,GAAsB,kBAAXP,EACPM,EAAOlB,EAAEY,GACTO,EAAOlB,EAAEW,OAER,IAAsB,oBAAXA,EAIX,CACD,IAAIQ,EAAqBb,GAAmBK,GAC5C,OAAOG,EAAoBK,EAAmBR,OAAQI,EAAWC,EAAOG,EAAmBlB,MAAOkB,EAAmBrB,UAAYe,EAAiBd,EAAGC,GALrJiB,EAAON,EAAOZ,GACdmB,EAAOP,EAAOX,GAMlB,IAAIoB,EAAWtB,EAASmB,EAAMC,EAAMjB,GACpC,OAAkB,IAAbmB,GAA2B,MAARH,GAAwB,MAARC,IACpCH,EAAUvB,OAASwB,EACZF,EAAoBC,EAAUC,GAAQD,EAAWC,EAAQ,EAAGf,EAAOH,EAAUC,EAAGC,GAEpFoB,IAGf,SAASC,GAAgBV,EAAQb,EAAUG,GAEvC,QAAeqB,IAAXX,IAAmC,IAAXA,EACxB,OAAO,SAAUZ,EAAGC,GAAK,OAAOF,EAASC,EAAGC,EAAGC,IAGnD,GAAsB,kBAAXU,EAEP,OADAT,GAA8BS,EAAOY,SAAS,KAAM,oDAC7C,SAAUxB,EAAGC,GAAK,OAAOF,EAASC,EAAEY,GAASX,EAAEW,GAASV,IAGnE,GAAsB,oBAAXU,EACP,OAAO,SAAUZ,EAAGC,GAAK,OAAOF,EAASa,EAAOZ,GAAIY,EAAOX,GAAIC,IAGnE,GAAIuB,MAAMC,QAAQd,GAAS,CACvB,IAAIe,EAAoBd,GAA4Bd,GACpD,OAAO,SAAUC,EAAGC,GAAK,OAAO0B,EAAkBf,EAAO,GAAIA,EAAQ,EAAGV,EAAOH,EAAUC,EAAGC,IAGhG,IAAImB,EAAqBb,GAAmBK,GAC5C,OAAOU,GAAgBF,EAAmBR,OAAQQ,EAAmBrB,UAAYA,EAAUqB,EAAmBlB,OAElH,IAAI0B,GAAY,SAAU1B,EAAO2B,EAAKjB,EAAQb,GAC1C,IAAIU,EACJ,OAAKgB,MAAMC,QAAQG,IAIfJ,MAAMC,QAAQd,IAAWA,EAAOnB,OAAS,IACzCgB,EAAKG,EAAQA,EAASH,EAAG,IAEtBoB,EAAIC,KAAKR,GAAgBV,EAAQb,EAAUG,KANvC2B,GAQf,SAASE,GAAsBC,GAC3B,IAAIjC,EAAWD,GAAakC,EAAKjC,UACjC,OAAO,SAAUkC,GACb,IAAIJ,EAAMJ,MAAMC,QAAQO,KAAUD,EAAKE,eACjCD,EAAKE,QACLF,EACN,MAAO,CACHvB,IAAK,SAAUE,GACX,OAAOgB,GAAU,EAAGC,EAAKjB,EAAQb,IAErCY,KAAM,SAAUC,GACZ,OAAOgB,IAAW,EAAGC,EAAKjB,EAAQb,IAEtCqC,GAAI,SAAUxB,GACV,OAAOgB,GAAU,EAAGC,EAAKjB,EAAQb,MAKjD,IAAIe,GAAkB,SAAUd,EAAGC,EAAGC,GAClC,OAAS,MAALF,EACOE,EACF,MAALD,GACQC,EACRF,EAAIC,GACI,EACRD,IAAMC,EACC,EACJ,GAKPoC,IAHON,GAAsB,CAC7BhC,SAAUe,KAEIiB,GAAsB,CACpChC,SAAUe,GACVoB,gBAAgB,K,kGC1GpB,GAAyDI,kBAAjDC,GAAR,GAAQA,YAA0BC,GAAlC,GAAqBC,YACrB,GAA4BC,kBAApB9C,GAAR,GAAQA,gBAER,GAAyD+C,kBAAzCC,GAAhB,GAAQC,OAAkCC,GAA1C,GAA0CA,WACtCC,GAAoB,GACxB,GAAuCD,KAAvC,yBAAOE,GAAP,MAAgBC,GAAhB,MAA2BC,GAA3B,MACA,uDAGEC,MAAK,YAAuB,IAAXC,EAAW,EAApBC,QACJL,OACJD,GAAoBK,EACpBH,SACCK,OAAM,SAAAC,GACPC,QAAQD,MAAMA,GACdL,GAAS,mCAGX,IAAMO,GAAmBC,gBAAS,WAChC,IAAMC,EAAS,GACf,IAAKnB,GAAmBvG,MAAM2H,SAAWhB,GAAyB3G,MAAM2H,OACtE,OAAOD,EAET,IAAK,IAAME,KAAYtB,GAAYtG,MAAO,OAClCG,GAAY,UAAAwD,GAAgB3D,MAAM4H,UAAtB,eAAiC3F,YAAYC,aAC7D4E,GAAkBc,IAClB,KACFF,EAAOE,GAAY,CACjBzH,UAAWA,EAAYA,EAAY,EAAI,KACvCkC,aAAcyE,GAAkBc,IAGpC,OAAOF,KAGM,SAASG,KACtB,MAAO,CACLL,qB,qDCtCEpI,MAAA,oE,kBACD,8B,oBAaMA,MAAA,sB,6BAE0E,yB,oIAnBnF,eA2BM,YAzBI,EAAAoH,YAAYmB,Q,iBADpB,eAMM,MANN,GAMM,C,GADJ,eAAsC,GAAvBG,KAAM,EAAAC,eAAa,oB,sBAGpC,eAiBM,YAhBJ,eAMS,UALPjI,KAAK,SACJkI,UAAW,EAAAC,eACX,QAAK,8BAAE,EAAAC,eAAA,EAAAA,cAAA,sBACT,gCAED,MACA,eAQM,MARN,GAQM,CAPQ,EAAA1B,YAAY2B,S,iBAAxB,eAGO,WAFL,eAA2E,GAA3D/I,MAAA,uD,4BAGN,EAAAoH,YAAYc,O,iBAAxB,eAEO,UAFwB,4BACL,eAAG,EAAAd,YAAY4B,cAAY,I,6ECvB3D,eAEO,2BADF,EAAAC,cAAY,G,2CCqCJ,SAASC,GAAWC,EAAeC,GAChD,OAAAC,GAAA,MAAa,EAAGC,WAChB,IAAIC,EAAW,OAAAC,GAAA,MAAOL,GAClBM,EAAY,OAAAD,GAAA,MAAOJ,GACnBM,EAAOH,EAASI,UAAYF,EAAUE,UAE1C,OAAID,EAAO,GACD,EACCA,EAAO,EACT,EAEAA,EClDI,SAAS,GAAOhI,EAAQkI,GACrC,GAAc,MAAVlI,EACF,MAAM,IAAImI,UAAU,iEAKtB,IAAK,IAAIC,KAFTF,EAAcA,GAAe,GAERA,EACfG,OAAOC,UAAUC,eAAeC,KAAKN,EAAaE,KACpDpI,EAAOoI,GAAYF,EAAYE,IAInC,OAAOpI,ECZM,SAASyI,GAAYP,GAClC,OAAO,GAAO,GAAIA,G,iBCIhBQ,GAAyB,IACzBC,GAAiB,KACjBC,GAAoC,GAAjBD,GACnBE,GAAmC,IAAjBF,GAwJP,SAASG,GAAqBC,EAAWC,GACtD,IAAIC,EAAUrB,UAAUlF,OAAS,QAAsB8B,IAAjBoD,UAAU,GAAmBA,UAAU,GAAK,GAClF,OAAAD,GAAA,MAAa,EAAGC,WAChB,IAAIsB,EAASD,EAAQC,QAAU,QAE/B,IAAKA,EAAOC,eACV,MAAM,IAAIC,WAAW,wDAGvB,IAAIC,EAAa7B,GAAWuB,EAAWC,GAEvC,GAAIM,MAAMD,GACR,MAAM,IAAID,WAAW,sBAGvB,IAGIvB,EACAE,EAJAwB,EAAkBd,GAAYQ,GAClCM,EAAgBC,UAAYC,QAAQR,EAAQO,WAC5CD,EAAgBF,WAAaA,EAIzBA,EAAa,GACfxB,EAAW,OAAAC,GAAA,MAAOkB,GAClBjB,EAAY,OAAAD,GAAA,MAAOiB,KAEnBlB,EAAW,OAAAC,GAAA,MAAOiB,GAClBhB,EAAY,OAAAD,GAAA,MAAOkB,IAGrB,IACIU,EADAC,EAA2C,MAA1BV,EAAQU,eAAyB,QAAUC,OAAOX,EAAQU,gBAG/E,GAAuB,UAAnBA,EACFD,EAAmBG,KAAKC,WACnB,GAAuB,SAAnBH,EACTD,EAAmBG,KAAKE,SACnB,IAAuB,UAAnBJ,EAGT,MAAM,IAAIP,WAAW,qDAFrBM,EAAmBG,KAAKG,MAK1B,IAMIC,EANAC,EAAenC,EAAUE,UAAYJ,EAASI,UAC9CkC,EAAUD,EAAexB,GACzB0B,EAAiB,OAAAC,GAAA,MAAgCtC,GAAa,OAAAsC,GAAA,MAAgCxC,GAG9FyC,GAAwBJ,EAAeE,GAAkB1B,GAsB7D,GAjBIuB,EAFgB,MAAhBhB,EAAQgB,KACNE,EAAU,EACL,SACEA,EAAU,GACZ,SACEA,EAAUxB,GACZ,OACE2B,EAAuB1B,GACzB,MACE0B,EAAuBzB,GACzB,QAEA,OAGFe,OAAOX,EAAQgB,MAIX,WAATA,EAAmB,CACrB,IAAIM,EAAUb,EAAiBQ,EAAe,KAC9C,OAAOhB,EAAOC,eAAe,WAAYoB,EAAShB,GAC7C,GAAa,WAATU,EAAmB,CAC5B,IAAIO,EAAiBd,EAAiBS,GACtC,OAAOjB,EAAOC,eAAe,WAAYqB,EAAgBjB,GACpD,GAAa,SAATU,EAAiB,CAC1B,IAAIQ,EAAQf,EAAiBS,EAAU,IACvC,OAAOjB,EAAOC,eAAe,SAAUsB,EAAOlB,GACzC,GAAa,QAATU,EAAgB,CACzB,IAAIS,EAAOhB,EAAiBY,EAAuB3B,IACnD,OAAOO,EAAOC,eAAe,QAASuB,EAAMnB,GACvC,GAAa,UAATU,EAAkB,CAC3B,IAAIU,EAASjB,EAAiBY,EAAuB1B,IACrD,OAAkB,KAAX+B,GAAkC,UAAjB1B,EAAQgB,KAAmBf,EAAOC,eAAe,SAAU,EAAGI,GAAmBL,EAAOC,eAAe,UAAWwB,EAAQpB,GAC7I,GAAa,SAATU,EAAiB,CAC1B,IAAIW,EAAQlB,EAAiBY,EAAuBzB,IACpD,OAAOK,EAAOC,eAAe,SAAUyB,EAAOrB,GAGhD,MAAM,IAAIH,WAAW,qEChNR,SAAS3J,GAAIoL,GAE1B,IAAIC,EAWAxI,EATJ,GAHA,OAAAqF,GAAA,MAAa,EAAGC,WAGZiD,GAAsD,oBAA5BA,EAAgBE,QAC5CD,EAAaD,MACR,IAA+B,kBAApBA,GAAoD,OAApBA,EAIhD,OAAO,IAAIG,KAAKC,KAHhBH,EAAapG,MAAM4D,UAAUlD,MAAMoD,KAAKqC,GAc1C,OAPAC,EAAWC,SAAQ,SAAUhC,GAC3B,IAAImC,EAAc,OAAApD,GAAA,MAAOiB,SAEVvE,IAAXlC,GAAwBA,EAAS4I,GAAe5B,MAAM6B,OAAOD,OAC/D5I,EAAS4I,MAGN5I,GAAU,IAAI0I,KAAKC,KC7D5B,IAAMG,GAAaC,eAAI,IAAIL,MAK3BM,aAAY,WAAQF,GAAWlM,MAAQ,IAAI8L,OAAU,MAEtC,kBACb,MAAO,CACLI,gBNAW,IACbG,MAAO,CACLvE,KAAM,CAAEhI,KAAMgM,KAAMQ,UAAU,IAEhCC,MAJa,SAINF,GACL,MAAuBG,KAAfN,EAAR,EAAQA,WACF7D,EAAe,gBAAS,kBAAMuB,GAClCyC,EAAMvE,KACNvH,GAAI,CAAC2L,EAAWlM,MAAO,IAAI8L,OAC3B,CAAExB,WAAW,OAGf,MAAO,CACLjC,kB,wBOnBN,MAAMoE,GAA2B,KAAgB,GAAQ,CAAC,CAAC,SAAS,MAErD,U,aR6BA,IACbC,WAAY,CACVC,gBACAC,kBAAA,MAEFL,MALa,SAKNF,GACL,MAKI,OAAA5F,GAAA,QAJFwB,EADF,EACEA,eACAzB,EAFF,EAEEA,YACA0B,EAHF,EAGEA,cACAH,EAJF,EAIEA,cAGF,MAAO,CACLE,iBACAzB,cACA0B,gBACAH,mBShDN,MAAM,GAA2B,KAAgB,GAAQ,CAAC,CAAC,SAAS,MAErD,U,UCHT3I,MAAA,oE,kBACD,2B,oBAaMA,MAAA,sB,6BAE0E,uB,oIAnBnF,eA2BM,YAzBI,EAAAoH,YAAYmB,Q,iBADpB,eAMM,MANN,GAMM,C,GADJ,eAAsC,GAAvBG,KAAM,EAAAC,eAAa,oB,sBAGpC,eAiBM,YAhBJ,eAMS,UALPjI,KAAK,SACJkI,UAAW,EAAAC,eACX,QAAK,8BAAE,EAAA4E,aAAA,EAAAA,YAAA,sBACT,6BAED,MACA,eAQM,MARN,GAQM,CAPQ,EAAArG,YAAY2B,S,iBAAxB,eAGO,WAFL,eAA2E,GAA3D/I,MAAA,uD,4BAGN,EAAAoH,YAAYc,O,iBAAxB,eAEO,UAFwB,0BACP,eAAG,EAAAd,YAAY4B,cAAY,I,4BAY5C,QACbsE,WAAY,CACVC,gBACAC,kBAAA,MAEFL,MALa,SAKNF,GACL,MAKI,OAAAS,GAAA,QAJF7E,EADF,EACEA,eACAzB,EAFF,EAEEA,YACAqG,EAHF,EAGEA,YACA9E,EAJF,EAIEA,cAGF,MAAO,CACLE,iBACAzB,cACAqG,cACA9E,mBChDN,MAAM,GAA2B,KAAgB,GAAQ,CAAC,CAAC,SAAS,MAErD,U,qECNJ1I,MAAM,oB,GACb,eAEU,gBADR,eAAmC,UAA/B,gC,sFAFR,eAsBU,UAtBV,GAsBU,CArBR,I,mBAIA,eAgBM,2BAfoB,EAAA0N,SAAO,YAAb,IAATpN,EAAS,EAATA,GAAIM,EAAK,EAALA,M,wBADf,eAgBM,OAdHP,IAAKC,GAAE,CAER,eAWQ,cAVN,eAME,SALAG,KAAK,QACJE,MAAOL,EACRI,KAAK,uBACJiN,QAAS,EAAAC,aAAetN,EACxB,SAAM,mBAAE,EAAAuN,MAAK,oBAAsBvN,K,YAEtC,eAEO,2BADFM,GAAK,U,QASlB,IAAM,GAAU,CACd,CAAEN,GAAI,MAAOM,MAAO,eACpB,CAAEN,GAAI,SAAUM,MAAO,6BACvB,CAAEN,GAAI,WAAYM,MAAO,2CAGrBkN,GAAkB,iBAAM,OAExBC,GAAY,SAAUC,EAAkBC,GAC5C,OAAO,SAAU7J,GACf,MAAsB,QAAlB6J,IACkB,WAAlBA,IAAuCD,EAAiB5J,EAAO9D,KAC3D0N,EAAiB5J,EAAO9D,OAKrB,IACb0M,MAAO,CACLY,WAAY,CAAEnN,KAAM4K,OAAQtD,QAAS,QAEvCK,SAAU,CACRsF,QADQ,WACK,OAAO,MC7CxB,MAAM,GAA2B,KAAgB,GAAQ,CAAC,CAAC,SAAS,MAErD,U,iLCNJ1N,MAAM,oB,yBACb,eAEU,gBADR,eAAwB,UAApB,qB,+BAIJ,eAEM,WAFD,qBAEL,M,sFARJ,eAgBU,UAhBV,GAgBU,CAfR,GAIA,eAUQ,cATN,GAGA,eAKE,GAJAA,MAAM,qBACL4N,WAAY,EAAAA,WACZM,gBAAiB,cACjB,sBAAiB,+BAAE,EAAAL,MAAK,oBAAsBrM,M,sDASjD,GAAY,SAAU2M,EAAkBC,GAC5C,cAAIA,QAAJ,IAAIA,KAAUjK,OACL,SAACC,GACN,IAAMhD,EAAQ+M,EAAiB/J,EAAO9D,IACtC,OAAOc,GAASgN,EAASlI,SAAS9E,IAG/B,kBAAM,IAIA,IACbiM,WAAY,CACVgB,gBAAA,MAEFrB,MAAO,CACLY,WAAY,CAAEnN,KAAM0F,MAAO4B,QAAS,iBAAM,O,UChC9C,MAAM,GAA2B,KAAgB,GAAQ,CAAC,CAAC,SAAS,IAAQ,CAAC,YAAY,qBAE1E,UlBqYA,IACbsF,WAAY,CACViB,iBAAA,KACAC,wBAAA,KACAC,8BACAC,2BACAC,cAAA,KACAC,eAAA,KACAC,aAAA,KACAC,iBACAC,cAAA,KACAC,eAAA,KACAC,mBAAA,KACAC,eAAA,KACAC,mBAAA,KACAC,qBAAA,KACAC,gBAAA,KACAC,iBAEFnC,MAnBa,WAoBX,MAKI,OAAA9F,GAAA,QAJF/C,EADF,EACEA,mBACAC,EAFF,EAEEA,gBACagL,EAHf,EAGEnI,YACeoI,EAJjB,EAIE1G,cAGF,EAA6BL,KAArBL,EAAR,EAAQA,iBACR,EAII,OAAAsF,GAAA,QAHFU,EADF,EACEA,iBACaqB,EAFf,EAEErI,YACAqG,EAHF,EAGEA,YAGI9L,EAAY,eAAI,mBAChBC,EAAU,eAAI,CAClBC,QAAS,KACTf,KAAM,gBAAI,SACVgB,MAAO,QAAM4N,KAAI,SAAAC,GAAG,OAAKA,EAAKpP,MAC9BwB,UAAW,gBAAyB,gBAAI,UACxCC,MAAO,kBACPC,UAAW,GACXC,YAAa,GACbC,OAAQ,kBACRC,OAAQ,KAEJhC,EAAqB,CACzB,CAAEG,GAAI,YAAaM,MAAO,0BAC1B,CAAEN,GAAI,eAAgBM,MAAO,gCAC7B,CAAEN,GAAI,QAASM,MAAO,iBACtB,CAAEN,GAAI,UAAWM,MAAO,6BACxB,CAAEN,GAAI,YAAaM,MAAO,qBAEtBL,EAAc,eAAI,CACtBC,QAAS,YACTM,UAAW,CACT6O,OAAQ,CACN1O,IAAK,GACLC,IAAK,IACLH,UAAW,WAEb6O,WAAY,CACV3O,IAAK,IACLC,IAAK,IACLH,UAAW,WAEb8O,SAAU,CACR5O,IAAK,KACLC,IAAK,IACLH,UAAW,YAGfI,aAAc,CACZwO,OAAQ,CACN1O,IAAK,GACLC,IAAK,IACLH,UAAW,WAEb6O,WAAY,CACV3O,IAAK,IACLC,IAAK,IACLH,UAAW,WAEb8O,SAAU,CACR5O,IAAK,KACLC,IAAK,IACLH,UAAW,YAGfK,MAAO,CACLL,UAAW,UACXE,IAAK,EACLC,IAAK4O,SAAS,6CAA8C,KAE9DzO,QAAS,CACPN,UAAW,UACXE,IAAK,EACLC,IAAK,MAEPI,UAAW,YAEPpB,EAAmB,gBAAS,kCAAMC,EAAmB4P,MAAK,SAAA3P,GAAK,OAAKA,EAAOE,KAAOC,EAAYI,MAAMH,kBAAxE,aAAM,EAA4EI,SAC9GW,EAAwB,MAAS,SAACyO,GACtCzP,EAAYI,MAAMW,UAAY0O,IAC7B,KAIGC,EAAwB,WACvBX,EAA2B3O,MAAM2H,QAAWgH,EAA2B3O,MAAMmI,SAChFyG,KAGEW,EAAe,WACdV,EAAkB7O,MAAM2H,QAAWkH,EAAkB7O,MAAMmI,SAC9D0E,KAGJ,gBACE,kBAAMjN,EAAYI,MAAMH,WACxB,SAAAA,GACM,CAAC,eAAgB,aAAa0F,SAAS1F,IAGzCyP,IAEE,CAAC,QAAS,WAAW/J,SAAS1F,IAChC0P,MAGJ,CAAEC,WAAW,IAEf,gBACE,kBAAMxO,EAAQhB,MAAMiB,WACpB,SAAAwO,GACwB,QAAlBA,GACFH,OAIN,gBACE,kBAAMtO,EAAQhB,MAAMwB,UACpB,SAAAkO,GACE,OAAIA,QAAJ,IAAIA,KAAclM,QAChB+L,OAKN,IAAMI,EAAwB,gBAAS,WACrC,IAAMC,EAAS,GACTC,EAAejQ,EAAYI,MAAMG,UACvC,IAAK,IAAMT,KAAOmQ,EAAc,CAC9B,IAAMC,EAASD,EAAanQ,GAC5BkQ,EAAOlQ,GAAO,gBAAmBoQ,GAEnC,OAAOF,KAGHG,EAA2B,gBAAS,WACxC,IAAMH,EAAS,GACTC,EAAejQ,EAAYI,MAAMQ,aACvC,IAAK,IAAMd,KAAOmQ,EAAc,CAC9B,IAAMC,EAASD,EAAanQ,GAC5BkQ,EAAOlQ,GAAO,gBAAmBoQ,GAEnC,OAAOF,KAGHI,EAAa,gBAAS,WAC1B,OAAO,gBAAmBpQ,EAAYI,MAAMS,UAExCwP,EAAe,GACfC,EAAgB,gBAAS,WAC7B,OAAO,gBAAmB,CACxB9P,UAAWR,EAAYI,MAAMS,MAAML,UACnCE,IAAK,EACLC,IAAK0P,OAIHE,EAAe,gBAAS,WAC5B,OAAO,gBAAmBvQ,EAAYI,MAAMU,YAGxC0P,EAAW,gBAAS,WACxB,IAAMC,EAAgB,GAChBC,EAAgB,CACpBtB,OAAQ,GACRC,WAAY,IACZC,SAAU,MAEZ,IAAK,IAAMtH,KAAY4F,EAAiBxN,MAAO,CAC7C,IAAMS,EAAQ+M,EAAiBxN,MAAM4H,GAChCyI,EAAc5P,KACjB4P,EAAc5P,GAAS,GAEzB,IAAMgD,EAAS6C,EAAYtG,MAAM4H,GAC7BnE,IACF4M,EAAc5P,IAAW6P,EAAc7M,EAAO7B,YAAc,GAIhE,OAAOyO,KAGHE,EAAgB,gBAAS,kBAC7BpH,OAAOqH,QAAQJ,EAASpQ,OAAO6F,MAAK,SAAC9B,EAAGC,GACtC,OAAID,EAAE,KAAOC,EAAE,GAAa,EACrBD,EAAE,GAAKC,EAAE,GAAK,GAAK,QAI9B,EAAyD,OAAAqC,GAAA,QAAjDC,EAAR,EAAQA,YAA0BmK,EAAlC,EAAqBjK,YAEftD,EAAmB,gBAAS,kBAAMiG,OAAOuH,OAAOpK,EAAYtG,UAC5D6C,EAAsB,gBAAS,kBAAMK,EAAiBlD,MAAMwD,UAE5DH,EAAe,gBAAS,WAE5B,IAAMxD,EAAUD,EAAYI,MAAMH,QAC9B8Q,EAAW,kBAAM,MACrB,GAAgB,cAAZ9Q,EACF8Q,EAAW,SAAAlN,GAAU,MACbmN,EAAQjB,EAAsB3P,MAAMyD,EAAO7B,WACjD,IAAKgP,EAAS,OAAO,KACrB,IAAMzQ,EAAQ,UAAIqH,EAAiBxH,MAAMyD,EAAO9D,WAAlC,aAAI,EAAmCQ,UACrD,OAAIA,EACKyQ,EAAMzQ,EAAY,GAEpB,WAEJ,GAAgB,iBAAZN,EACT8Q,EAAW,SAAAlN,GACT,IAAMmN,EAAQb,EAAyB/P,MAAMyD,EAAO7B,WACpD,IAAKgP,EAAS,OAAO,KACrB,IAAM7O,EAAiB2B,EAAmB1D,MAAMyD,EAAO9D,IACvD,OAAIoC,EACK6O,EAAM7O,EAAeE,YAAY4O,YAEnC,WAEJ,GAAgB,UAAZhR,EAAqB,CAC9B,IAAMiR,EAAYP,EAAcvQ,MAAMkG,MAAM,EAAG+J,GAAcnB,KAAI,SAAAiC,GAAG,OAAKA,EAAK,MAC9EJ,EAAW,SAAAlN,GACT,IAAMhD,EAAQ+M,EAAiBxN,MAAMyD,EAAO9D,IACtCqR,EAAWF,EAAUG,QAAQxQ,GACnC,OAAkB,IAAduQ,EAGKd,EAAclQ,MAAMgR,GAEtBhB,EAAWhQ,MAAMmP,SAAS1O,EAAO,UAErB,YAAZZ,EACT8Q,EAAW,SAAAlN,GACT,IAAMhD,EAAQ+M,EAAiBxN,MAAMyD,EAAO9D,IAC5C,OAAOwQ,EAAanQ,MAAMoQ,EAASpQ,MAAMS,IAAU,IAEhC,cAAZZ,IACT8Q,EAAW,SAAAlN,GAAK,OAAK7D,EAAYI,MAAMW,YAEzC,IAAMyC,EAAS+F,OAAO+H,YACpBhO,EAAiBlD,MAAM8O,KAAI,SAAArL,GAAK,MAAK,CACnCA,EAAO9D,GACPgR,EAASlN,IAAW,UAIxB,OAAOL,KAGHD,EAAyB,gBAAS,WAGtC,IAAMgO,EAAW,gBAAmBnQ,EAAQhB,MAAMqB,WAC5C+P,EAAa,gBAAqBpQ,EAAQhB,MAAMsB,aAChDmO,EAAgB,GAAiB/L,EAAmB1D,MAAOgB,EAAQhB,MAAMiB,SACzEoQ,EAAc,gBAAerQ,EAAQhB,MAAME,MAC3CoR,EAAc,gBAAetQ,EAAQhB,MAAMkB,OAC3CqQ,EAAkB,gBAAmB,QAAWvQ,EAAQhB,MAAMmB,WAC9DqQ,EAAc,gBAAexQ,EAAQhB,MAAMoB,OAC3CqQ,EAAe,gBAAgBzQ,EAAQhB,MAAMuB,QAC7CmO,EAAe,GAAgBlC,EAAiBxN,MAAOgB,EAAQhB,MAAMwB,QAErEkQ,EAAe,CAACP,EAAUC,EAAY3B,EAAeC,EAAc2B,EAAaC,EAAaC,EAAiBC,EAAaC,GAE7HE,EAAa,EACXvO,EAAS+F,OAAO+H,YACpBhO,EAAiBlD,MAAM8O,KAAI,SAAArL,GAEzB,IADA,IAAImO,GAAO,EACFC,EAAI,EAAGD,GAAQC,EAAIH,EAAalO,OAAQqO,IAC1CH,EAAaG,GAAGpO,KACnBmO,GAAO,GAIX,OADIA,GAAQD,IACL,CAAClO,EAAO9D,GAAIiS,OAIvB,MAAO,CAAExO,SAAQuO,iBAGb/O,EAA4B,gBAAS,kBAAMO,EAAuBnD,MAAM2R,cACxE7O,EAAgC,gBAAS,WAC7C,IAAMgP,EAAWlP,EAA0B5C,MAAQ6C,EAAoB7C,MAAS,IAC1E+R,EAAUpH,KAAKG,MAAMgH,GAC3B,OAAIC,EAAU,EACLA,EAGFpH,KAAKG,MAAM,IAAMgH,GAAW,OAG/BpQ,EAAmB,eAAI,MACvBD,EAAiB,gBAAS,WAAM,MAC9BmG,EAAWlG,EAAiB1B,MAClC,IAAK4H,EAAY,OAAO,KACxB,IAAM7F,EAAiB2B,EAAmB1D,MAAM4H,GAC1CzF,EAAWwB,EAAgB3D,MAAM4H,GACnCzF,IACFA,EAASC,cAAgB,OAAA4P,GAAA,MAAO7P,EAAS8P,cAAe,wBAE1D,IAAM5P,EAAW,UAAImF,EAAiBxH,MAAM4H,UAA3B,aAAI,EAAkCvF,aACjD5B,EAAQ+M,EAAiBxN,MAAM4H,GACrC,0CACKtB,EAAYtG,MAAM4H,IADvB,IAEE7F,iBACAI,WACAE,eACA5B,aAGE6C,EAAgB,SAACG,GACrB/B,EAAiB1B,MAAQyD,EAAO9D,IAG5BuS,EAAc,gBAAS,WAG3B,IAAMjP,EAAUC,EAAiBlD,MAAMmS,QAAO,SAAA1O,GAAK,OAAKN,EAAuBnD,MAAMoD,OAAOK,EAAO9D,OAQnG,OANAyG,GAAYnD,GAASkD,GAAG,CACtB,CAAE1B,IAAK,SAAA2N,GAAA,uBAAK1O,EAAmB1D,MAAMoS,EAAEzS,WAAhC,aAAK,EAAgC0S,mBAC5C,CAAE5N,IAAK,SAAA2N,GAAA,OAAKA,EAAEvQ,SAAW,IACzB,CAAE4C,IAAK,SAAA2N,GAAA,OAAKA,EAAEzS,GAAK,MAGdsD,KAGHW,EAAqB,gBAAI,GAE/B,gBACE,kBAAMhB,EAA0B5C,SAChC,WAAQ4D,EAAmB5D,OAAQ,KAGrC,IAAMuD,EAAuB,gBAAS,WACpC,OAAIK,EAAmB5D,MACdkS,EAAYlS,MAEdkS,EAAYlS,MAAMkG,MAAM,EAAG,QAGpC,MAAO,CACLuK,qBACA1P,YACAC,UACApB,cACAL,mBACAC,qBACAoB,wBACAP,YAAA,QACAiS,gBAAA,QACA3D,6BACAzL,mBACAC,yBACAN,sBACAD,4BACAE,gCACAO,eACAC,gBACA5B,mBACAD,iBACAmC,qBACAL,uBACAG,qBACAC,qB,UmB5wBN,MAAM,GAA2B,KAAgB,GAAQ,CAAC,CAAC,SAAS4O,IAAQ,CAAC,YAAY,qBAE1E,iB,oCCTf,W,8NCmBM7O,EAAqByI,eAAI,IACzBxI,EAAkBwI,eAAI,IAEtBqG,EAAe,2EACfC,EAAkB,IAElBC,EAAgB,WACpBhP,EAAmB1D,MAAQ,GAC3B2D,EAAgB3D,MAAQ,GACxB+H,EAAc/H,MAAQ,MAGlB2S,EAAc,SAAUC,GAAU,uBAChBA,GADgB,IACtC,2BAAgC,KAArBC,EAAqB,QACxB5Q,EAAe,IAAI6Q,IAAUD,EAAQE,YAAaC,UAAU,MACpC,MAA1BH,EAAQI,cACVtP,EAAgB3D,MAAM6S,EAAQK,SAAW,CACvCvT,GAAIkT,EAAQlT,GACZsC,cACAoQ,iBAAkBpQ,EAAY4O,WAC9BoB,cAAe,IAAInG,KAA6B,IAAxB+G,EAAQI,gBAGlCvP,EAAmB1D,MAAM6S,EAAQK,SAAW,CAC1CvT,GAAIkT,EAAQlT,GACZsC,cACAoQ,iBAAkBpQ,EAAY4O,WAC9BsC,YAAa,IAAIrH,KAA2B,IAAtB+G,EAAQO,eAfE,gCAqBxC,EAA4C1M,iBAA5BF,EAAhB,EAAQI,OAAqBC,EAA7B,EAA6BA,WAEvBoB,EAAiBR,gBAAS,kBAAOjB,EAAYxG,MAAMmI,WACnDJ,EAAgBoE,eAAI,MAEpBjE,EAAgB,WACpB,MAAuCrB,IAAvC,sBAAOE,EAAP,KAAgBC,EAAhB,KAA2BC,EAA3B,KACI2L,EAAW,GACXS,EAAkB,EAChBC,EAA4B,SAA5BA,IACJC,MAAMf,EAAc,CAClBgB,OAAQ,OACRC,KAAMC,KAAKC,UAAU,CACnBC,MAAO,sCAAF,OACqBnB,EADrB,6DACyFY,EADzF,uLAUNnM,KAbH,yDAaQ,WAAM2M,GAAN,6FACF9M,IADE,uBACWQ,QAAQuM,IAAI,2BADvB,6BAEDD,EAASE,GAFR,uBAGJ9M,EAAS,wCAHL,0CAMqB4M,EAAS1M,OAN9B,UAMA6M,EANA,iBAOFA,EAAaC,YAPX,QAOF,EAAmBC,eAPjB,oBAQJtB,EAAWA,EAASuB,OAAOH,EAAaC,KAAKC,kBACzCF,EAAaC,KAAKC,eAAe1Q,OAASiP,GAT1C,wBAWFC,IACAC,EAAYC,GACZ7K,EAAc/H,MAAQ,IAAI8L,KAC1B9E,IAdE,2BAkBJqM,EAAkBT,EAASA,EAASpP,OAAS,GAAG4P,YAChDE,IAnBI,wBAqBJrM,EAAS,uBArBL,4CAbR,uDAoCGI,OAAM,SAAAC,GACPC,QAAQD,MAAMA,GACdL,EAAS,4CAIbqM,KAGa,SAAS7M,IACtB,MAAO,CACL/C,qBACAC,kBACAsE,iBACAzB,cACA0B,gBACAH,mB,8KC1GEyF,EAAmBrB,eAAI,IAEvBqG,EAAe,2EACfC,EAAkB,IAElB2B,EAAc,WAClB5G,EAAiBxN,MAAQ,GACzB+H,EAAc/H,MAAQ,MAGlBqU,EAAY,SAAUpR,GAAS,uBACdA,GADc,IACnC,2BAA8B,OAAnBQ,EAAmB,QAC5B+J,EAAiBxN,MAAMyD,EAAOyP,SAA9B,UAAyCzP,EAAOhD,aAAhD,aAAyC,EAAcd,IAFtB,gCAMrC,EAA4C+G,iBAA5BF,EAAhB,EAAQI,OAAqBC,EAA7B,EAA6BA,WAEvBoB,EAAiBR,gBAAS,kBAAOjB,EAAYxG,MAAMmI,WACnDJ,EAAgBoE,eAAI,MAEpBU,EAAc,WAClB,MAAuChG,IAAvC,sBAAOE,EAAP,KAAgBC,EAAhB,KAA2BC,EAA3B,KACIqN,EAAY,EACZrR,EAAU,GACRsR,EAA0B,SAA1BA,IACJhB,MAAMf,EAAc,CAClBgB,OAAQ,OACRC,KAAMC,KAAKC,UAAU,CACnBC,MAAO,+BAAF,OACcnB,EADd,oDACyE6B,EADzE,gHASNpN,KAZH,yDAYQ,WAAM2M,GAAN,6FACF9M,IADE,uBACWQ,QAAQuM,IAAI,2BADvB,6BAEDD,EAASE,GAFR,uBAGJ9M,EAAS,6CAHL,0CAMqB4M,EAAS1M,OAN9B,UAMA6M,EANA,iBAOFA,EAAaC,YAPX,QAOF,EAAmBhR,QAPjB,oBAQJA,EAAUA,EAAQkR,OAAOH,EAAaC,KAAKhR,WACvC+Q,EAAaC,KAAKhR,QAAQO,OAASiP,GATnC,wBAWF2B,IACAC,EAAUpR,GACV8E,EAAc/H,MAAQ,IAAI8L,KAC1B9E,IAdE,2BAkBJsN,EAAYN,EAAaC,KAAKhR,QAAQ+Q,EAAaC,KAAKhR,QAAQO,OAAS,GAAG0P,QAAU,EACtFqB,IAnBI,wBAqBJtN,EAAS,uBArBL,4CAZR,uDAmCGI,OAAM,SAAAC,GACPC,QAAQD,MAAMA,GACdL,EAAS,iDAIbsN,KAGa,SAASzH,IACtB,MAAO,CACLU,mBACAvF,iBACAzB,cACAqG,cACA9E,mB,kCCpFJ,W","file":"js/citaadel-page.8a296c28.js","sourcesContent":["<template>\n  <PrereqParcels>\n    <LayoutMapWithFilters>\n      <template #sidebar>\n        <h1>The Citaadel</h1>\n\n        <div style=\"margin-bottom: 20px;\">\n          <DataFetcherBaazaarListings style=\"margin-bottom: 10px;\" />\n          <DataFetcherParcelOwners style=\"margin-bottom: 10px;\" />\n        </div>\n\n        <details class=\"filter-container\">\n          <summary>\n            <h3>Color Scheme: {{ colorSchemeLabel }}</h3>\n          </summary>\n\n          <div style=\"margin-bottom: 10px\">\n            Color by:\n\n            <div\n              v-for=\"option in colorSchemeOptions\"\n              :key=\"option.id\"\n            >\n              <label>\n                <input\n                  v-model=\"colorScheme.colorBy\"\n                  type=\"radio\"\n                  name=\"colorBy\"\n                  :value=\"option.id\"\n                />\n                {{ option.label }}\n              </label>\n            </div>\n          </div>\n\n          <div v-if=\"colorScheme.colorBy === 'lastPrice'\">\n            <div\n              v-for=\"size in ['humble', 'reasonable', 'spacious']\"\n              :key=\"size\"\n              style=\"margin-bottom: 20px;\"\n            >\n              <h4 style=\"text-transform: capitalize;\">\n                {{ size }}:\n              </h4>\n              <div style=\"margin-bottom: 10px\">\n                <label>\n                  Color Scheme:\n                  <select v-model=\"colorScheme.lastPrice[size].scaleName\">\n                    <option\n                      v-for=\"scaleName in SCALE_NAMES\"\n                      :key=\"scaleName\"\n                      :value=\"scaleName\"\n                    >\n                      {{ scaleName }}\n                    </option>\n                  </select>\n                </label>\n                <div\n                  class=\"scale-color-display\"\n                  :style=\"{\n                    'background': SCALE_GRADIENTS[colorScheme.lastPrice[size].scaleName]\n                  }\"\n                />\n              </div>\n              <div>\n                <label>\n                  Min:\n                  <input\n                    v-model=\"colorScheme.lastPrice[size].min\"\n                    type=\"number\"\n                    class=\"range-input\"\n                  />\n                </label>\n                <label>\n                  Max:\n                  <input\n                    v-model=\"colorScheme.lastPrice[size].max\"\n                    type=\"number\"\n                    class=\"range-input\"\n                  />\n                </label>\n              </div>\n            </div>\n          </div>\n\n          <div v-if=\"colorScheme.colorBy === 'baazaarPrice'\">\n            <div\n              v-for=\"size in ['humble', 'reasonable', 'spacious']\"\n              :key=\"size\"\n              style=\"margin-bottom: 20px;\"\n            >\n              <h4 style=\"text-transform: capitalize;\">\n                {{ size }}:\n              </h4>\n              <div style=\"margin-bottom: 10px\">\n                <label>\n                  Color Scheme:\n                  <select v-model=\"colorScheme.baazaarPrice[size].scaleName\">\n                    <option\n                      v-for=\"scaleName in SCALE_NAMES\"\n                      :key=\"scaleName\"\n                      :value=\"scaleName\"\n                    >\n                      {{ scaleName }}\n                    </option>\n                  </select>\n                </label>\n                <div\n                  class=\"scale-color-display\"\n                  :style=\"{\n                    'background': SCALE_GRADIENTS[colorScheme.baazaarPrice[size].scaleName]\n                  }\"\n                />\n              </div>\n              <div>\n                <label>\n                  Min:\n                  <input\n                    v-model=\"colorScheme.baazaarPrice[size].min\"\n                    type=\"number\"\n                    class=\"range-input\"\n                  />\n                </label>\n                <label>\n                  Max:\n                  <input\n                    v-model=\"colorScheme.baazaarPrice[size].max\"\n                    type=\"number\"\n                    class=\"range-input\"\n                  />\n                </label>\n              </div>\n            </div>\n          </div>\n\n          <div v-if=\"colorScheme.colorBy === 'owner'\">\n            <div>\n              <label>\n                Color Scheme:\n                <select v-model=\"colorScheme.owner.scaleName\">\n                  <option\n                    v-for=\"scaleName in SCALE_NAMES\"\n                    :key=\"scaleName\"\n                    :value=\"scaleName\"\n                  >\n                    {{ scaleName }}\n                  </option>\n                </select>\n              </label>\n              <div\n                class=\"scale-color-display\"\n                :style=\"{\n                  'background': SCALE_GRADIENTS[colorScheme.owner.scaleName]\n                }\"\n              />\n            </div>\n          </div>\n\n          <div v-if=\"colorScheme.colorBy === 'whalePx'\">\n            <div>\n              <label>\n                Color Scheme:\n                <select v-model=\"colorScheme.whalePx.scaleName\">\n                  <option\n                    v-for=\"scaleName in SCALE_NAMES\"\n                    :key=\"scaleName\"\n                    :value=\"scaleName\"\n                  >\n                    {{ scaleName }}\n                  </option>\n                </select>\n              </label>\n              <div\n                class=\"scale-color-display\"\n                :style=\"{\n                  'background': SCALE_GRADIENTS[colorScheme.whalePx.scaleName]\n                }\"\n              />\n              <div\n                style=\"margin-top: 8px\"\n              >\n                <label>\n                  Min:\n                  <input\n                    v-model=\"colorScheme.whalePx.min\"\n                    type=\"number\"\n                    class=\"range-input\"\n                  />\n                </label>\n                <label>\n                  Max:\n                  <input\n                    v-model=\"colorScheme.whalePx.max\"\n                    type=\"number\"\n                    class=\"range-input\"\n                  />\n                </label>\n              </div>\n            </div>\n          </div>\n\n          <div v-if=\"colorScheme.colorBy === 'highlight'\">\n            <label>\n              Parcel color:\n              <input\n                type=\"color\"\n                :value=\"colorScheme.highlight\"\n                @input=\"debouncedSetHighlight($event.target.value)\"\n              >\n            </label>\n          </div>\n        </details>\n\n        <MapConfig v-model=\"mapConfig\" />\n        <FilterBaazaar v-model=\"filters.baazaar\" />\n        <FilterSize v-model=\"filters.size\" />\n        <FilterWalls v-model=\"filters.walls\" />\n        <FilterDistricts v-model=\"filters.districts\" />\n        <FilterRoads v-model=\"filters.roads\" />\n        <FilterParcelIds v-model=\"filters.parcelIds\" />\n        <FilterParcelNames v-model=\"filters.parcelNames\" />\n        <FilterBoosts v-model=\"filters.boosts\" />\n        <FilterOwners v-model=\"filters.owners\" />\n\n        <section>\n          <div\n            v-if=\"selectedParcel\"\n            class=\"selected-parcel-details\"\n          >\n            <button\n              type=\"button\"\n              style=\"float: right\"\n              @click=\"selectedParcelId = null\"\n            >\n              Close\n            </button>\n\n            <h2>Selected Parcel details:</h2>\n\n            ID: {{ selectedParcel.id }}\n            <br>Name: {{ selectedParcel.parcelHash }}\n            <br>Size: {{ selectedParcel.sizeLabel }}\n            <br>District: {{ selectedParcel.district }}\n            <div v-if=\"selectedParcel.owner\">\n              Owner:\n              <EthAddress :address=\"selectedParcel.owner\" />\n            </div>\n            <div v-if=\"selectedParcel.currentListing\">\n              <a\n                :href=\"`https://aavegotchi.com/baazaar/erc721/${selectedParcel.currentListing.id}`\"\n                target=\"_blank\"\n              >\n                Currently listed on Baazaar for: {{ selectedParcel.currentListing.priceInGhst.toString() }} GHST\n              </a>\n            </div>\n            <div v-if=\"selectedParcel.lastSale\">\n              <a\n                :href=\"`https://aavegotchi.com/baazaar/erc721/${selectedParcel.lastSale.id}`\"\n                target=\"_blank\"\n              >\n                Last sold on Baazaar on {{ selectedParcel.lastSale.formattedDate }}\n                for: {{ selectedParcel.lastSale.priceInGhst.toString() }} GHST\n              </a>\n            </div>\n            <div v-if=\"selectedParcel.auctionPrice\">\n              Auction price: {{ selectedParcel.auctionPrice }} GHST\n            </div>\n            <div>\n              Boosts:\n              <div style=\"margin-left: 10px\">\n                <template v-if=\"selectedParcel.hasBoost\">\n                  <div v-if=\"selectedParcel.fudBoost !== '0'\">\n                    FUD: {{ selectedParcel.fudBoost }}\n                  </div>\n                  <div v-if=\"selectedParcel.fomoBoost !== '0'\">\n                    FOMO: {{ selectedParcel.fomoBoost }}\n                  </div>\n                  <div v-if=\"selectedParcel.alphaBoost !== '0'\">\n                    ALPHA: {{ selectedParcel.alphaBoost }}\n                  </div>\n                  <div v-if=\"selectedParcel.kekBoost !== '0'\">\n                    KEK: {{ selectedParcel.kekBoost }}\n                  </div>\n                </template>\n                <template v-else>\n                  None\n                </template>\n              </div>\n            </div>\n          </div>\n        </section>\n      </template>\n      <template #top>\n        <template v-if=\"numParcelsMatchingFilters === numParcelsToDisplay\">\n          Matched all {{ numParcelsMatchingFilters }} parcels\n        </template>\n        <template v-else-if=\"numParcelsMatchingFilters === 0\">\n          No parcels matched your filters, out of {{ numParcelsToDisplay }} parcels\n        </template>\n        <template v-else>\n          Matched {{ numParcelsMatchingFilters }} parcels ({{ percentParcelsMatchingFilters }}% of {{ numParcelsToDisplay }} currently available)\n        </template>\n      </template>\n      <template #main=\"{ viewMode }\">\n        <CitaadelMap\n          v-show=\"viewMode === 'map'\"\n          :mapConfig=\"mapConfig\"\n          :parcels=\"parcelsToDisplay\"\n          :parcelsMatchingFilters=\"parcelsMatchingFilters.result\"\n          :parcelColors=\"parcelColors\"\n          :selectedParcel=\"selectedParcel\"\n          @click:parcel=\"onClickParcel\"\n        />\n        <div v-if=\"viewMode === 'list'\">\n          <template v-if=\"!listParcelsToDisplay.length\">\n            No parcels found.\n          </template>\n          <template v-else>\n            <ul class=\"parcels-list\">\n              <li\n                v-for=\"parcel in listParcelsToDisplay\"\n                :key=\"parcel.id\"\n              >\n                <a\n                  href=\"#\"\n                  @click.prevent=\"onClickParcel(parcel)\"\n                >\n                  {{ parcel.id }}\n                </a>\n                {{ parcel.parcelHash }}\n                {{ parcel.sizeLabel }}\n                district {{ parcel.district }}\n                <span\n                  v-if=\"listingsByParcelId[parcel.id]\"\n                  style=\"margin: 0 10px;\"\n                >\n                  <a\n                    :href=\"`https://aavegotchi.com/baazaar/erc721/${listingsByParcelId[parcel.id].id}`\"\n                    target=\"_blank\"\n                  >\n                    Baazaar {{ listingsByParcelId[parcel.id].priceInGhst.toString() }} GHST\n                  </a>\n                </span>\n                <span v-if=\"salesByParcelId[parcel.id]\">\n                  Last sold on Baazaar on\n                  <a\n                    :href=\"`https://aavegotchi.com/baazaar/erc721/${salesByParcelId[parcel.id].id}`\"\n                    target=\"_blank\"\n                  >\n                    {{ salesByParcelId[parcel.id].formattedDate }}\n                    for {{ salesByParcelId[parcel.id].priceInGhst.toString() }} GHST\n                  </a>\n                </span>\n              </li>\n            </ul>\n          </template>\n          <div v-if=\"numParcelsMatchingFilters > listParcelsToDisplay.length && !listParcelsShowAll\">\n            <button\n              type=\"button\"\n              @click=\"listParcelsShowAll = true\"\n            >\n              Show all {{ numParcelsMatchingFilters }} matching parcels\n            </button>\n          </div>\n        </div>\n      </template>\n    </LayoutMapWithFilters>\n  </PrereqParcels>\n</template>\n\n<script>\nimport { ref, computed, watch } from 'vue'\nimport { format } from 'date-fns'\nimport { inPlaceSort } from 'fast-sort'\nimport debounce from 'lodash.debounce'\nimport useParcels from '@/data/useParcels'\nimport useBaazaarListings from '@/data/useBaazaarListings'\nimport useParcelPrices from '@/data/useParcelPrices'\nimport useParcelOwners from '@/data/useParcelOwners'\nimport { WALLS } from '@/data/walls'\nimport { SCALE_NAMES, SCALE_GRADIENTS, getSequentialScale } from './colorScales'\nimport DataFetcherBaazaarListings from './DataFetcherBaazaarListings.vue'\nimport DataFetcherParcelOwners from './DataFetcherParcelOwners.vue'\nimport PrereqParcels from './PrereqParcels.vue'\nimport LayoutMapWithFilters from './LayoutMapWithFilters.vue'\nimport EthAddress from './EthAddress.vue'\nimport CitaadelMap from './CitaadelMap.vue'\nimport MapConfig, { getDefaultValue as getDefaultMapConfigValue } from './MapConfig.vue'\nimport FilterBaazaar, { getDefaultValue as getDefaultBaazarValue, getFilter as getBaazaarFilter } from './FilterBaazaar.vue'\nimport FilterSize, { SIZES, getFilter as getSizesFilter } from './FilterSize.vue'\nimport FilterWalls, { getFilter as getWallsFilter } from './FilterWalls.vue'\nimport FilterDistricts, { DISTRICTS, getDefaultValue as getDefaultDistrictsValue, getFilter as getDistrictsFilter } from './FilterDistricts.vue'\nimport FilterRoads, { getDefaultValue as getDefaultRoadsValue, getFilter as getRoadsFilter } from './FilterRoads.vue'\nimport FilterParcelIds, { getFilter as getParcelIdsFilter } from './FilterParcelIds.vue'\nimport FilterParcelNames, { getFilter as getParcelNamesFilter } from './FilterParcelNames.vue'\nimport FilterBoosts, { getDefaultValue as getDefaultBoostsValue, getFilter as getBoostsFilter } from './FilterBoosts.vue'\nimport FilterOwners, { getFilter as getOwnersFilter } from './FilterOwners.vue'\n\nexport default {\n  components: {\n    PrereqParcels,\n    LayoutMapWithFilters,\n    DataFetcherBaazaarListings,\n    DataFetcherParcelOwners,\n    EthAddress,\n    CitaadelMap,\n    MapConfig,\n    FilterBaazaar,\n    FilterSize,\n    FilterWalls,\n    FilterDistricts,\n    FilterRoads,\n    FilterParcelIds,\n    FilterParcelNames,\n    FilterBoosts,\n    FilterOwners\n  },\n  setup () {\n    const {\n      listingsByParcelId,\n      salesByParcelId,\n      fetchStatus: baazaarListingsFetchStatus,\n      fetchListings: fetchBaazaarListings\n    } = useBaazaarListings()\n\n    const { pricesByParcelId } = useParcelPrices()\n    const {\n      ownersByParcelId,\n      fetchStatus: ownersFetchStatus,\n      fetchOwners\n    } = useParcelOwners()\n\n    const mapConfig = ref(getDefaultMapConfigValue())\n    const filters = ref({\n      baazaar: getDefaultBaazarValue(),\n      size: [...SIZES],\n      walls: WALLS.map(wall => wall.id),\n      districts: getDefaultDistrictsValue([...DISTRICTS]),\n      roads: getDefaultRoadsValue(),\n      parcelIds: [],\n      parcelNames: [],\n      boosts: getDefaultBoostsValue(),\n      owners: []\n    })\n    const colorSchemeOptions = [\n      { id: 'lastPrice', label: 'Last Sold Price (GHST)' },\n      { id: 'baazaarPrice', label: 'Baazaar Listing Price (GHST)' },\n      { id: 'owner', label: 'Owner Address' },\n      { id: 'whalePx', label: 'Whales (total pixel area)' },\n      { id: 'highlight', label: 'Simple highlight' }\n    ]\n    const colorScheme = ref({\n      colorBy: 'lastPrice',\n      lastPrice: {\n        humble: {\n          min: 88,\n          max: 500,\n          scaleName: 'viridis'\n        },\n        reasonable: {\n          min: 180,\n          max: 1000,\n          scaleName: 'viridis'\n        },\n        spacious: {\n          min: 1025,\n          max: 3000,\n          scaleName: 'viridis'\n        }\n      },\n      baazaarPrice: {\n        humble: {\n          min: 88,\n          max: 500,\n          scaleName: 'viridis'\n        },\n        reasonable: {\n          min: 180,\n          max: 1000,\n          scaleName: 'viridis'\n        },\n        spacious: {\n          min: 1025,\n          max: 3000,\n          scaleName: 'viridis'\n        }\n      },\n      owner: {\n        scaleName: 'rainbow',\n        min: 0,\n        max: parseInt('0xffffffffffffffffffffffffffffffffffffffff', 16)\n      },\n      whalePx: {\n        scaleName: 'inferno',\n        min: 0,\n        max: 150_000\n      },\n      highlight: '#ffa500'\n    })\n    const colorSchemeLabel = computed(() => colorSchemeOptions.find(option => option.id === colorScheme.value.colorBy)?.label)\n    const debouncedSetHighlight = debounce((color) => {\n      colorScheme.value.highlight = color\n    }, 300)\n\n    // Watch for settings that require extra data to be fetched,\n    // and fetch that data if necessary\n    const prereqBaazaarListings = function () {\n      if (!baazaarListingsFetchStatus.value.loaded && !baazaarListingsFetchStatus.value.loading) {\n        fetchBaazaarListings()\n      }\n    }\n    const prereqOwners = function () {\n      if (!ownersFetchStatus.value.loaded && !ownersFetchStatus.value.loading) {\n        fetchOwners()\n      }\n    }\n    watch(\n      () => colorScheme.value.colorBy,\n      colorBy => {\n        if (['baazaarPrice', 'lastPrice'].includes(colorBy)) {\n          // these color schemes require baazaar listings\n          // make sure it's fetched at least once\n          prereqBaazaarListings()\n        }\n        if (['owner', 'whalePx'].includes(colorBy)) {\n          prereqOwners()\n        }\n      },\n      { immediate: true }\n    )\n    watch(\n      () => filters.value.baazaar,\n      baazaarFilter => {\n        if (baazaarFilter !== 'all') {\n          prereqBaazaarListings()\n        }\n      }\n    )\n    watch(\n      () => filters.value.owners,\n      ownersFilter => {\n        if (ownersFilter?.length) {\n          prereqOwners()\n        }\n      }\n    )\n\n    const lastPriceScalesBySize = computed(() => {\n      const scales = {}\n      const configBySize = colorScheme.value.lastPrice\n      for (const key in configBySize) {\n        const config = configBySize[key]\n        scales[key] = getSequentialScale(config)\n      }\n      return scales\n    })\n\n    const baazaarPriceScalesBySize = computed(() => {\n      const scales = {}\n      const configBySize = colorScheme.value.baazaarPrice\n      for (const key in configBySize) {\n        const config = configBySize[key]\n        scales[key] = getSequentialScale(config)\n      }\n      return scales\n    })\n\n    const ownerScale = computed(() => {\n      return getSequentialScale(colorScheme.value.owner)\n    })\n    const TOP_OWNERS_N = 10\n    const topOwnerScale = computed(() => {\n      return getSequentialScale({\n        scaleName: colorScheme.value.owner.scaleName,\n        min: 0,\n        max: TOP_OWNERS_N\n      })\n    })\n\n    const whalePxScale = computed(() => {\n      return getSequentialScale(colorScheme.value.whalePx)\n    })\n\n    const whalesPx = computed(() => {\n      const totalPerOwner = {}\n      const pxBySizeLabel = {\n        humble: 8 * 8,\n        reasonable: 16 * 16,\n        spacious: 32 * 64\n      }\n      for (const parcelId in ownersByParcelId.value) {\n        const owner = ownersByParcelId.value[parcelId]\n        if (!totalPerOwner[owner]) {\n          totalPerOwner[owner] = 0\n        }\n        const parcel = parcelsById.value[parcelId]\n        if (parcel) {\n          totalPerOwner[owner] += (pxBySizeLabel[parcel.sizeLabel] || 0)\n        }\n      }\n\n      return totalPerOwner\n    })\n\n    const sortedWhalePx = computed(() =>\n      Object.entries(whalesPx.value).sort((a, b) => {\n        if (a[1] === b[1]) { return 0 }\n        return a[1] < b[1] ? 1 : -1\n      })\n    )\n\n    const { parcelsById, fetchStatus: parcelsFetchStatus } = useParcels()\n\n    const parcelsToDisplay = computed(() => Object.values(parcelsById.value))\n    const numParcelsToDisplay = computed(() => parcelsToDisplay.value.length)\n\n    const parcelColors = computed(() => {\n      // console.time('parcelColors')\n      const colorBy = colorScheme.value.colorBy\n      let getColor = () => null\n      if (colorBy === 'lastPrice') {\n        getColor = parcel => {\n          const scale = lastPriceScalesBySize.value[parcel.sizeLabel]\n          if (!scale) { return null }\n          const lastPrice = pricesByParcelId.value[parcel.id]?.lastPrice\n          if (lastPrice) {\n            return scale(lastPrice - 0)\n          }\n          return null\n        }\n      } else if (colorBy === 'baazaarPrice') {\n        getColor = parcel => {\n          const scale = baazaarPriceScalesBySize.value[parcel.sizeLabel]\n          if (!scale) { return null }\n          const currentListing = listingsByParcelId.value[parcel.id]\n          if (currentListing) {\n            return scale(currentListing.priceInGhst.toNumber())\n          }\n          return null\n        }\n      } else if (colorBy === 'owner') {\n        const topOwners = sortedWhalePx.value.slice(0, TOP_OWNERS_N).map(item => item[0])\n        getColor = parcel => {\n          const owner = ownersByParcelId.value[parcel.id]\n          const topIndex = topOwners.indexOf(owner)\n          if (topIndex !== -1) {\n            // try to ensure the top px owners have different colors from each other,\n            // as they cover more of the map\n            return topOwnerScale.value(topIndex)\n          }\n          return ownerScale.value(parseInt(owner, 16))\n        }\n      } else if (colorBy === 'whalePx') {\n        getColor = parcel => {\n          const owner = ownersByParcelId.value[parcel.id]\n          return whalePxScale.value(whalesPx.value[owner] || 0)\n        }\n      } else if (colorBy === 'highlight') {\n        getColor = parcel => colorScheme.value.highlight\n      }\n      const result = Object.fromEntries(\n        parcelsToDisplay.value.map(parcel => [\n          parcel.id,\n          getColor(parcel) || null\n        ])\n      )\n      // console.timeEnd('parcelColors')\n      return result\n    })\n\n    const parcelsMatchingFilters = computed(() => {\n      // console.time('parcelsMatchingFilters')\n      // console.log('start parcelsMatchingFilters')\n      const idFilter = getParcelIdsFilter(filters.value.parcelIds)\n      const nameFilter = getParcelNamesFilter(filters.value.parcelNames)\n      const baazaarFilter = getBaazaarFilter(listingsByParcelId.value, filters.value.baazaar)\n      const sizesFilter = getSizesFilter(filters.value.size)\n      const wallsFilter = getWallsFilter(filters.value.walls)\n      const districtsFilter = getDistrictsFilter(DISTRICTS, filters.value.districts)\n      const roadsFilter = getRoadsFilter(filters.value.roads)\n      const boostsFilter = getBoostsFilter(filters.value.boosts)\n      const ownersFilter = getOwnersFilter(ownersByParcelId.value, filters.value.owners)\n\n      const applyFilters = [idFilter, nameFilter, baazaarFilter, ownersFilter, sizesFilter, wallsFilter, districtsFilter, roadsFilter, boostsFilter]\n\n      let numMatches = 0\n      const result = Object.fromEntries(\n        parcelsToDisplay.value.map(parcel => {\n          let show = true\n          for (let i = 0; show && i < applyFilters.length; i++) {\n            if (!applyFilters[i](parcel)) {\n              show = false\n            }\n          }\n          if (show) { numMatches++ }\n          return [parcel.id, show]\n        })\n      )\n      // console.timeEnd('parcelsMatchingFilters')\n      return { result, numMatches }\n    })\n\n    const numParcelsMatchingFilters = computed(() => parcelsMatchingFilters.value.numMatches)\n    const percentParcelsMatchingFilters = computed(() => {\n      const percent = (numParcelsMatchingFilters.value / numParcelsToDisplay.value) * 100\n      const rounded = Math.round(percent)\n      if (rounded > 5) {\n        return rounded\n      }\n      // add more decimals if percent is small\n      return Math.round(100 * percent) / 100\n    })\n\n    const selectedParcelId = ref(null)\n    const selectedParcel = computed(() => {\n      const parcelId = selectedParcelId.value\n      if (!parcelId) { return null }\n      const currentListing = listingsByParcelId.value[parcelId]\n      const lastSale = salesByParcelId.value[parcelId]\n      if (lastSale) {\n        lastSale.formattedDate = format(lastSale.datePurchased, 'yyyy/MM/dd HH:mm:ss')\n      }\n      const auctionPrice = pricesByParcelId.value[parcelId]?.auctionPrice\n      const owner = ownersByParcelId.value[parcelId]\n      return {\n        ...parcelsById.value[parcelId],\n        currentListing,\n        lastSale,\n        auctionPrice,\n        owner\n      }\n    })\n    const onClickParcel = (parcel) => {\n      selectedParcelId.value = parcel.id\n    }\n\n    const listParcels = computed(() => {\n      // console.time('listParcels')\n      // console.log('start listParcels')\n      const parcels = parcelsToDisplay.value.filter(parcel => parcelsMatchingFilters.value.result[parcel.id])\n      // console.timeLog('listParcels')\n      inPlaceSort(parcels).by([\n        { asc: p => listingsByParcelId.value[p.id]?.priceInGhstJsNum },\n        { asc: p => p.district - 0 },\n        { asc: p => p.id - 0 }\n      ])\n      // console.timeEnd('listParcels')\n      return parcels\n    })\n\n    const listParcelsShowAll = ref(false)\n\n    watch(\n      () => numParcelsMatchingFilters.value,\n      () => { listParcelsShowAll.value = false }\n    )\n\n    const listParcelsToDisplay = computed(() => {\n      if (listParcelsShowAll.value) {\n        return listParcels.value\n      }\n      return listParcels.value.slice(0, 100)\n    })\n\n    return {\n      parcelsFetchStatus,\n      mapConfig,\n      filters,\n      colorScheme,\n      colorSchemeLabel,\n      colorSchemeOptions,\n      debouncedSetHighlight,\n      SCALE_NAMES,\n      SCALE_GRADIENTS,\n      baazaarListingsFetchStatus,\n      parcelsToDisplay,\n      parcelsMatchingFilters,\n      numParcelsToDisplay,\n      numParcelsMatchingFilters,\n      percentParcelsMatchingFilters,\n      parcelColors,\n      onClickParcel,\n      selectedParcelId,\n      selectedParcel,\n      listParcelsShowAll,\n      listParcelsToDisplay,\n      listingsByParcelId,\n      salesByParcelId\n    }\n  }\n}\n</script>\n\n<style scoped>\n  .scale-color-display {\n    margin-top: 5px;\n    width: 80%;\n    height: 20px;\n  }\n  .range-input {\n    width: 60px;\n  }\n\n  .selected-parcel-details {\n    margin: 0 10px 20px 0;\n    border: 1px solid #ccc;\n    padding: 10px;\n  }\n</style>\n","// >>> INTERFACES <<<\r\n// >>> HELPERS <<<\r\nvar castComparer = function (comparer) { return function (a, b, order) { return comparer(a, b, order) * order; }; };\r\nvar throwInvalidConfigErrorIfTrue = function (condition, context) {\r\n    if (condition)\r\n        throw Error(\"Invalid sort config: \" + context);\r\n};\r\nvar unpackObjectSorter = function (sortByObj) {\r\n    var _a = sortByObj || {}, asc = _a.asc, desc = _a.desc;\r\n    var order = asc ? 1 : -1;\r\n    var sortBy = (asc || desc);\r\n    // Validate object config\r\n    throwInvalidConfigErrorIfTrue(!sortBy, 'Expected `asc` or `desc` property');\r\n    throwInvalidConfigErrorIfTrue(asc && desc, 'Ambiguous object with `asc` and `desc` config properties');\r\n    var comparer = sortByObj.comparer && castComparer(sortByObj.comparer);\r\n    return { order: order, sortBy: sortBy, comparer: comparer };\r\n};\r\n// >>> SORTERS <<<\r\nvar multiPropertySorterProvider = function (defaultComparer) {\r\n    return function multiPropertySorter(sortBy, sortByArr, depth, order, comparer, a, b) {\r\n        var valA;\r\n        var valB;\r\n        if (typeof sortBy === 'string') {\r\n            valA = a[sortBy];\r\n            valB = b[sortBy];\r\n        }\r\n        else if (typeof sortBy === 'function') {\r\n            valA = sortBy(a);\r\n            valB = sortBy(b);\r\n        }\r\n        else {\r\n            var objectSorterConfig = unpackObjectSorter(sortBy);\r\n            return multiPropertySorter(objectSorterConfig.sortBy, sortByArr, depth, objectSorterConfig.order, objectSorterConfig.comparer || defaultComparer, a, b);\r\n        }\r\n        var equality = comparer(valA, valB, order);\r\n        if ((equality === 0 || (valA == null && valB == null)) &&\r\n            sortByArr.length > depth) {\r\n            return multiPropertySorter(sortByArr[depth], sortByArr, depth + 1, order, comparer, a, b);\r\n        }\r\n        return equality;\r\n    };\r\n};\r\nfunction getSortStrategy(sortBy, comparer, order) {\r\n    // Flat array sorter\r\n    if (sortBy === undefined || sortBy === true) {\r\n        return function (a, b) { return comparer(a, b, order); };\r\n    }\r\n    // Sort list of objects by single object key\r\n    if (typeof sortBy === 'string') {\r\n        throwInvalidConfigErrorIfTrue(sortBy.includes('.'), 'String syntax not allowed for nested properties.');\r\n        return function (a, b) { return comparer(a[sortBy], b[sortBy], order); };\r\n    }\r\n    // Sort list of objects by single function sorter\r\n    if (typeof sortBy === 'function') {\r\n        return function (a, b) { return comparer(sortBy(a), sortBy(b), order); };\r\n    }\r\n    // Sort by multiple properties\r\n    if (Array.isArray(sortBy)) {\r\n        var multiPropSorter_1 = multiPropertySorterProvider(comparer);\r\n        return function (a, b) { return multiPropSorter_1(sortBy[0], sortBy, 1, order, comparer, a, b); };\r\n    }\r\n    // Unpack object config to get actual sorter strategy\r\n    var objectSorterConfig = unpackObjectSorter(sortBy);\r\n    return getSortStrategy(objectSorterConfig.sortBy, objectSorterConfig.comparer || comparer, objectSorterConfig.order);\r\n}\r\nvar sortArray = function (order, ctx, sortBy, comparer) {\r\n    var _a;\r\n    if (!Array.isArray(ctx)) {\r\n        return ctx;\r\n    }\r\n    // Unwrap sortBy if array with only 1 value to get faster sort strategy\r\n    if (Array.isArray(sortBy) && sortBy.length < 2) {\r\n        _a = sortBy, sortBy = _a[0];\r\n    }\r\n    return ctx.sort(getSortStrategy(sortBy, comparer, order));\r\n};\r\nfunction createNewSortInstance(opts) {\r\n    var comparer = castComparer(opts.comparer);\r\n    return function (_ctx) {\r\n        var ctx = Array.isArray(_ctx) && !opts.inPlaceSorting\r\n            ? _ctx.slice()\r\n            : _ctx;\r\n        return {\r\n            asc: function (sortBy) {\r\n                return sortArray(1, ctx, sortBy, comparer);\r\n            },\r\n            desc: function (sortBy) {\r\n                return sortArray(-1, ctx, sortBy, comparer);\r\n            },\r\n            by: function (sortBy) {\r\n                return sortArray(1, ctx, sortBy, comparer);\r\n            },\r\n        };\r\n    };\r\n}\r\nvar defaultComparer = function (a, b, order) {\r\n    if (a == null)\r\n        return order;\r\n    if (b == null)\r\n        return -order;\r\n    if (a < b)\r\n        return -1;\r\n    if (a === b)\r\n        return 0;\r\n    return 1;\r\n};\r\nvar sort = createNewSortInstance({\r\n    comparer: defaultComparer,\r\n});\r\nvar inPlaceSort = createNewSortInstance({\r\n    comparer: defaultComparer,\r\n    inPlaceSorting: true,\r\n});\n\nexport { createNewSortInstance, inPlaceSort, sort };\n","import { computed } from 'vue'\nimport useStatus from '@/data/useStatus'\nimport useParcels from './useParcels'\nimport useBaazaarListings from './useBaazaarListings'\n\nconst { parcelsById, fetchStatus: fetchParcelsStatus } = useParcels()\nconst { salesByParcelId } = useBaazaarListings()\n\nconst { status: fetchAuctionPricesStatus, setLoading } = useStatus()\nlet auctionPricesById = {} // doesn't need to be reactive\nconst [isStale, setLoaded, setError] = setLoading()\nimport(\n  /* webpackChunkName: \"auctionpricesjson\" */\n  './auctions/parcelAuctionPrices.json'\n).then(({ default: json }) => {\n  if (isStale()) { return }\n  auctionPricesById = json\n  setLoaded()\n}).catch(error => {\n  console.error(error)\n  setError('Error loading auction prices')\n})\n\nconst pricesByParcelId = computed(() => {\n  const prices = {}\n  if (!fetchParcelsStatus.value.loaded || !fetchAuctionPricesStatus.value.loaded) {\n    return prices\n  }\n  for (const parcelId in parcelsById.value) {\n    const lastPrice = salesByParcelId.value[parcelId]?.priceInGhst.toString() ||\n      auctionPricesById[parcelId] ||\n      null\n    prices[parcelId] = {\n      lastPrice: lastPrice ? lastPrice - 0 : null,\n      auctionPrice: auctionPricesById[parcelId]\n    }\n  }\n  return prices\n})\n\nexport default function useParcelPrices () {\n  return {\n    pricesByParcelId\n  }\n}\n","<template>\n  <div>\n    <div\n      v-if=\"fetchStatus.loaded\"\n      style=\"margin-bottom: 5px; font-style: italic; font-size: 0.95em;\"\n    >\n      Baazaar listings fetched\n      <DateFriendly :date=\"lastFetchDate\" />\n    </div>\n\n    <div>\n      <button\n        type=\"button\"\n        :disabled=\"!canSubmitFetch\"\n        @click=\"fetchListings\"\n      >\n        Get Latest Baazaar Listings\n      </button>\n      <div style=\"margin-top: 5px;\">\n        <span v-if=\"fetchStatus.loading\">\n          <LoadingSpinner style=\"position: relative; top: 2px; margin-right: 2px;\" />\n          loading listings...\n        </span>\n        <span v-if=\"fetchStatus.error\">\n          Error loading listings: {{ fetchStatus.errorMessage }}\n        </span>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport useBaazaarListings from '@/data/useBaazaarListings'\nimport DateFriendly from './DateFriendly'\nimport LoadingSpinner from './LoadingSpinner.vue'\n\nexport default {\n  components: {\n    DateFriendly,\n    LoadingSpinner\n  },\n  setup (props) {\n    const {\n      canSubmitFetch,\n      fetchStatus,\n      fetchListings,\n      lastFetchDate\n    } = useBaazaarListings()\n\n    return {\n      canSubmitFetch,\n      fetchStatus,\n      fetchListings,\n      lastFetchDate\n    }\n  }\n}\n</script>\n\n<style scoped>\n</style>\n","<template>\n  <span>\n    {{ friendlyDate }}\n  </span>\n</template>\n\n<script>\nimport { computed } from 'vue'\nimport { formatDistanceStrict, max } from 'date-fns'\nimport useReactiveDate from '@/data/useReactiveDate'\n\nexport default {\n  props: {\n    date: { type: Date, required: true }\n  },\n  setup (props) {\n    const { tickerDate } = useReactiveDate()\n    const friendlyDate = computed(() => formatDistanceStrict(\n      props.date,\n      max([tickerDate.value, new Date()]),\n      { addSuffix: true }\n    ))\n\n    return {\n      friendlyDate\n    }\n  }\n}\n</script>\n\n<style scoped>\n</style>\n","import toDate from \"../toDate/index.js\";\nimport requiredArgs from \"../_lib/requiredArgs/index.js\";\n/**\n * @name compareAsc\n * @category Common Helpers\n * @summary Compare the two dates and return -1, 0 or 1.\n *\n * @description\n * Compare the two dates and return 1 if the first date is after the second,\n * -1 if the first date is before the second or 0 if dates are equal.\n *\n * ### v2.0.0 breaking changes:\n *\n * - [Changes that are common for the whole library](https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#Common-Changes).\n *\n * @param {Date|Number} dateLeft - the first date to compare\n * @param {Date|Number} dateRight - the second date to compare\n * @returns {Number} the result of the comparison\n * @throws {TypeError} 2 arguments required\n *\n * @example\n * // Compare 11 February 1987 and 10 July 1989:\n * const result = compareAsc(new Date(1987, 1, 11), new Date(1989, 6, 10))\n * //=> -1\n *\n * @example\n * // Sort the array of dates:\n * const result = [\n *   new Date(1995, 6, 2),\n *   new Date(1987, 1, 11),\n *   new Date(1989, 6, 10)\n * ].sort(compareAsc)\n * //=> [\n * //   Wed Feb 11 1987 00:00:00,\n * //   Mon Jul 10 1989 00:00:00,\n * //   Sun Jul 02 1995 00:00:00\n * // ]\n */\n\nexport default function compareAsc(dirtyDateLeft, dirtyDateRight) {\n  requiredArgs(2, arguments);\n  var dateLeft = toDate(dirtyDateLeft);\n  var dateRight = toDate(dirtyDateRight);\n  var diff = dateLeft.getTime() - dateRight.getTime();\n\n  if (diff < 0) {\n    return -1;\n  } else if (diff > 0) {\n    return 1; // Return 0 if diff is 0; return NaN if diff is NaN\n  } else {\n    return diff;\n  }\n}","export default function assign(target, dirtyObject) {\n  if (target == null) {\n    throw new TypeError('assign requires that input parameter not be null or undefined');\n  }\n\n  dirtyObject = dirtyObject || {};\n\n  for (var property in dirtyObject) {\n    if (Object.prototype.hasOwnProperty.call(dirtyObject, property)) {\n      target[property] = dirtyObject[property];\n    }\n  }\n\n  return target;\n}","import assign from \"../assign/index.js\";\nexport default function cloneObject(dirtyObject) {\n  return assign({}, dirtyObject);\n}","import getTimezoneOffsetInMilliseconds from \"../_lib/getTimezoneOffsetInMilliseconds/index.js\";\nimport compareAsc from \"../compareAsc/index.js\";\nimport toDate from \"../toDate/index.js\";\nimport cloneObject from \"../_lib/cloneObject/index.js\";\nimport defaultLocale from \"../locale/en-US/index.js\";\nimport requiredArgs from \"../_lib/requiredArgs/index.js\";\nvar MILLISECONDS_IN_MINUTE = 1000 * 60;\nvar MINUTES_IN_DAY = 60 * 24;\nvar MINUTES_IN_MONTH = MINUTES_IN_DAY * 30;\nvar MINUTES_IN_YEAR = MINUTES_IN_DAY * 365;\n/**\n * @name formatDistanceStrict\n * @category Common Helpers\n * @summary Return the distance between the given dates in words.\n *\n * @description\n * Return the distance between the given dates in words, using strict units.\n * This is like `formatDistance`, but does not use helpers like 'almost', 'over',\n * 'less than' and the like.\n *\n * | Distance between dates | Result              |\n * |------------------------|---------------------|\n * | 0 ... 59 secs          | [0..59] seconds     |\n * | 1 ... 59 mins          | [1..59] minutes     |\n * | 1 ... 23 hrs           | [1..23] hours       |\n * | 1 ... 29 days          | [1..29] days        |\n * | 1 ... 11 months        | [1..11] months      |\n * | 1 ... N years          | [1..N]  years       |\n *\n * ### v2.0.0 breaking changes:\n *\n * - [Changes that are common for the whole library](https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#Common-Changes).\n *\n * - The function was renamed from `distanceInWordsStrict` to `formatDistanceStrict`\n *   to make its name consistent with `format` and `formatRelative`.\n *\n * - The order of arguments is swapped to make the function\n *   consistent with `differenceIn...` functions.\n *\n *   ```javascript\n *   // Before v2.0.0\n *\n *   distanceInWordsStrict(\n *     new Date(2015, 0, 2),\n *     new Date(2014, 6, 2)\n *   ) //=> '6 months'\n *\n *   // v2.0.0 onward\n *\n *   formatDistanceStrict(\n *     new Date(2014, 6, 2),\n *     new Date(2015, 0, 2)\n *   ) //=> '6 months'\n *   ```\n *\n * - `partialMethod` option is renamed to `roundingMethod`.\n *\n *   ```javascript\n *   // Before v2.0.0\n *\n *   distanceInWordsStrict(\n *     new Date(1986, 3, 4, 10, 32, 0),\n *     new Date(1986, 3, 4, 10, 33, 1),\n *     { partialMethod: 'ceil' }\n *   ) //=> '2 minutes'\n *\n *   // v2.0.0 onward\n *\n *   formatDistanceStrict(\n *     new Date(1986, 3, 4, 10, 33, 1),\n *     new Date(1986, 3, 4, 10, 32, 0),\n *     { roundingMethod: 'ceil' }\n *   ) //=> '2 minutes'\n *   ```\n *\n * - If `roundingMethod` is not specified, it now defaults to `round` instead of `floor`.\n *\n * - `unit` option now accepts one of the strings:\n *   'second', 'minute', 'hour', 'day', 'month' or 'year' instead of 's', 'm', 'h', 'd', 'M' or 'Y'\n *\n *   ```javascript\n *   // Before v2.0.0\n *\n *   distanceInWordsStrict(\n *     new Date(1986, 3, 4, 10, 32, 0),\n *     new Date(1986, 3, 4, 10, 33, 1),\n *     { unit: 'm' }\n *   )\n *\n *   // v2.0.0 onward\n *\n *   formatDistanceStrict(\n *     new Date(1986, 3, 4, 10, 33, 1),\n *     new Date(1986, 3, 4, 10, 32, 0),\n *     { unit: 'minute' }\n *   )\n *   ```\n *\n * @param {Date|Number} date - the date\n * @param {Date|Number} baseDate - the date to compare with\n * @param {Object} [options] - an object with options.\n * @param {Boolean} [options.addSuffix=false] - result indicates if the second date is earlier or later than the first\n * @param {'second'|'minute'|'hour'|'day'|'month'|'year'} [options.unit] - if specified, will force a unit\n * @param {'floor'|'ceil'|'round'} [options.roundingMethod='round'] - which way to round partial units\n * @param {Locale} [options.locale=defaultLocale] - the locale object. See [Locale]{@link https://date-fns.org/docs/Locale}\n * @returns {String} the distance in words\n * @throws {TypeError} 2 arguments required\n * @throws {RangeError} `date` must not be Invalid Date\n * @throws {RangeError} `baseDate` must not be Invalid Date\n * @throws {RangeError} `options.roundingMethod` must be 'floor', 'ceil' or 'round'\n * @throws {RangeError} `options.unit` must be 'second', 'minute', 'hour', 'day', 'month' or 'year'\n * @throws {RangeError} `options.locale` must contain `formatDistance` property\n *\n * @example\n * // What is the distance between 2 July 2014 and 1 January 2015?\n * const result = formatDistanceStrict(new Date(2014, 6, 2), new Date(2015, 0, 2))\n * //=> '6 months'\n *\n * @example\n * // What is the distance between 1 January 2015 00:00:15\n * // and 1 January 2015 00:00:00?\n * const result = formatDistanceStrict(\n *   new Date(2015, 0, 1, 0, 0, 15),\n *   new Date(2015, 0, 1, 0, 0, 0)\n * )\n * //=> '15 seconds'\n *\n * @example\n * // What is the distance from 1 January 2016\n * // to 1 January 2015, with a suffix?\n * const result = formatDistanceStrict(new Date(2015, 0, 1), new Date(2016, 0, 1), {\n *   addSuffix: true\n * })\n * //=> '1 year ago'\n *\n * @example\n * // What is the distance from 1 January 2016\n * // to 1 January 2015, in minutes?\n * const result = formatDistanceStrict(new Date(2016, 0, 1), new Date(2015, 0, 1), {\n *   unit: 'minute'\n * })\n * //=> '525600 minutes'\n *\n * @example\n * // What is the distance from 1 January 2015\n * // to 28 January 2015, in months, rounded up?\n * const result = formatDistanceStrict(new Date(2015, 0, 28), new Date(2015, 0, 1), {\n *   unit: 'month',\n *   roundingMethod: 'ceil'\n * })\n * //=> '1 month'\n *\n * @example\n * // What is the distance between 1 August 2016 and 1 January 2015 in Esperanto?\n * import { eoLocale } from 'date-fns/locale/eo'\n * const result = formatDistanceStrict(new Date(2016, 7, 1), new Date(2015, 0, 1), {\n *   locale: eoLocale\n * })\n * //=> '1 jaro'\n */\n\nexport default function formatDistanceStrict(dirtyDate, dirtyBaseDate) {\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  requiredArgs(2, arguments);\n  var locale = options.locale || defaultLocale;\n\n  if (!locale.formatDistance) {\n    throw new RangeError('locale must contain localize.formatDistance property');\n  }\n\n  var comparison = compareAsc(dirtyDate, dirtyBaseDate);\n\n  if (isNaN(comparison)) {\n    throw new RangeError('Invalid time value');\n  }\n\n  var localizeOptions = cloneObject(options);\n  localizeOptions.addSuffix = Boolean(options.addSuffix);\n  localizeOptions.comparison = comparison;\n  var dateLeft;\n  var dateRight;\n\n  if (comparison > 0) {\n    dateLeft = toDate(dirtyBaseDate);\n    dateRight = toDate(dirtyDate);\n  } else {\n    dateLeft = toDate(dirtyDate);\n    dateRight = toDate(dirtyBaseDate);\n  }\n\n  var roundingMethod = options.roundingMethod == null ? 'round' : String(options.roundingMethod);\n  var roundingMethodFn;\n\n  if (roundingMethod === 'floor') {\n    roundingMethodFn = Math.floor;\n  } else if (roundingMethod === 'ceil') {\n    roundingMethodFn = Math.ceil;\n  } else if (roundingMethod === 'round') {\n    roundingMethodFn = Math.round;\n  } else {\n    throw new RangeError(\"roundingMethod must be 'floor', 'ceil' or 'round'\");\n  }\n\n  var milliseconds = dateRight.getTime() - dateLeft.getTime();\n  var minutes = milliseconds / MILLISECONDS_IN_MINUTE;\n  var timezoneOffset = getTimezoneOffsetInMilliseconds(dateRight) - getTimezoneOffsetInMilliseconds(dateLeft); // Use DST-normalized difference in minutes for years, months and days;\n  // use regular difference in minutes for hours, minutes and seconds.\n\n  var dstNormalizedMinutes = (milliseconds - timezoneOffset) / MILLISECONDS_IN_MINUTE;\n  var unit;\n\n  if (options.unit == null) {\n    if (minutes < 1) {\n      unit = 'second';\n    } else if (minutes < 60) {\n      unit = 'minute';\n    } else if (minutes < MINUTES_IN_DAY) {\n      unit = 'hour';\n    } else if (dstNormalizedMinutes < MINUTES_IN_MONTH) {\n      unit = 'day';\n    } else if (dstNormalizedMinutes < MINUTES_IN_YEAR) {\n      unit = 'month';\n    } else {\n      unit = 'year';\n    }\n  } else {\n    unit = String(options.unit);\n  } // 0 up to 60 seconds\n\n\n  if (unit === 'second') {\n    var seconds = roundingMethodFn(milliseconds / 1000);\n    return locale.formatDistance('xSeconds', seconds, localizeOptions); // 1 up to 60 mins\n  } else if (unit === 'minute') {\n    var roundedMinutes = roundingMethodFn(minutes);\n    return locale.formatDistance('xMinutes', roundedMinutes, localizeOptions); // 1 up to 24 hours\n  } else if (unit === 'hour') {\n    var hours = roundingMethodFn(minutes / 60);\n    return locale.formatDistance('xHours', hours, localizeOptions); // 1 up to 30 days\n  } else if (unit === 'day') {\n    var days = roundingMethodFn(dstNormalizedMinutes / MINUTES_IN_DAY);\n    return locale.formatDistance('xDays', days, localizeOptions); // 1 up to 12 months\n  } else if (unit === 'month') {\n    var months = roundingMethodFn(dstNormalizedMinutes / MINUTES_IN_MONTH);\n    return months === 12 && options.unit !== 'month' ? locale.formatDistance('xYears', 1, localizeOptions) : locale.formatDistance('xMonths', months, localizeOptions); // 1 year up to max Date\n  } else if (unit === 'year') {\n    var years = roundingMethodFn(dstNormalizedMinutes / MINUTES_IN_YEAR);\n    return locale.formatDistance('xYears', years, localizeOptions);\n  }\n\n  throw new RangeError(\"unit must be 'second', 'minute', 'hour', 'day', 'month' or 'year'\");\n}","import toDate from \"../toDate/index.js\";\nimport requiredArgs from \"../_lib/requiredArgs/index.js\";\n/**\n * @name max\n * @category Common Helpers\n * @summary Return the latest of the given dates.\n *\n * @description\n * Return the latest of the given dates.\n *\n * ### v2.0.0 breaking changes:\n *\n * - [Changes that are common for the whole library](https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#Common-Changes).\n *\n * - `max` function now accepts an array of dates rather than spread arguments.\n *\n *   ```javascript\n *   // Before v2.0.0\n *   var date1 = new Date(1989, 6, 10)\n *   var date2 = new Date(1987, 1, 11)\n *   var maxDate = max(date1, date2)\n *\n *   // v2.0.0 onward:\n *   var dates = [new Date(1989, 6, 10), new Date(1987, 1, 11)]\n *   var maxDate = max(dates)\n *   ```\n *\n * @param {Date[]|Number[]} datesArray - the dates to compare\n * @returns {Date} the latest of the dates\n * @throws {TypeError} 1 argument required\n *\n * @example\n * // Which of these dates is the latest?\n * var result = max([\n *   new Date(1989, 6, 10),\n *   new Date(1987, 1, 11),\n *   new Date(1995, 6, 2),\n *   new Date(1990, 0, 1)\n * ])\n * //=> Sun Jul 02 1995 00:00:00\n */\n\nexport default function max(dirtyDatesArray) {\n  requiredArgs(1, arguments);\n  var datesArray; // `dirtyDatesArray` is Array, Set or Map, or object with custom `forEach` method\n\n  if (dirtyDatesArray && typeof dirtyDatesArray.forEach === 'function') {\n    datesArray = dirtyDatesArray; // If `dirtyDatesArray` is Array-like Object, convert to Array.\n  } else if (typeof dirtyDatesArray === 'object' && dirtyDatesArray !== null) {\n    datesArray = Array.prototype.slice.call(dirtyDatesArray);\n  } else {\n    // `dirtyDatesArray` is non-iterable, return Invalid Date\n    return new Date(NaN);\n  }\n\n  var result;\n  datesArray.forEach(function (dirtyDate) {\n    var currentDate = toDate(dirtyDate);\n\n    if (result === undefined || result < currentDate || isNaN(Number(currentDate))) {\n      result = currentDate;\n    }\n  });\n  return result || new Date(NaN);\n}","import { ref } from 'vue'\n\nconst tickerDate = ref(new Date())\n\n// This date object is updated every 15 seconds\n// So it's not an accurate 'now', but will change frequently enough\n// that it can be used as a reactive trigger for relative date displays\nsetInterval(() => { tickerDate.value = new Date() }, 15_000)\n\nexport default function () {\n  return {\n    tickerDate\n  }\n}\n","import { render } from \"./DateFriendly.vue?vue&type=template&id=789d7969\"\nimport script from \"./DateFriendly.vue?vue&type=script&lang=js\"\nexport * from \"./DateFriendly.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/media/riven/projects/aavegotchi/realm/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./DataFetcherBaazaarListings.vue?vue&type=template&id=5c8cde2e\"\nimport script from \"./DataFetcherBaazaarListings.vue?vue&type=script&lang=js\"\nexport * from \"./DataFetcherBaazaarListings.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/media/riven/projects/aavegotchi/realm/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <div>\n    <div\n      v-if=\"fetchStatus.loaded\"\n      style=\"margin-bottom: 5px; font-style: italic; font-size: 0.95em;\"\n    >\n      Parcel owners fetched\n      <DateFriendly :date=\"lastFetchDate\" />\n    </div>\n\n    <div>\n      <button\n        type=\"button\"\n        :disabled=\"!canSubmitFetch\"\n        @click=\"fetchOwners\"\n      >\n        Get Latest Parcel Owners\n      </button>\n      <div style=\"margin-top: 5px;\">\n        <span v-if=\"fetchStatus.loading\">\n          <LoadingSpinner style=\"position: relative; top: 2px; margin-right: 2px;\" />\n          loading owners...\n        </span>\n        <span v-if=\"fetchStatus.error\">\n          Error loading owners: {{ fetchStatus.errorMessage }}\n        </span>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport useParcelOwners from '@/data/useParcelOwners'\nimport DateFriendly from './DateFriendly'\nimport LoadingSpinner from './LoadingSpinner.vue'\n\nexport default {\n  components: {\n    DateFriendly,\n    LoadingSpinner\n  },\n  setup (props) {\n    const {\n      canSubmitFetch,\n      fetchStatus,\n      fetchOwners,\n      lastFetchDate\n    } = useParcelOwners()\n\n    return {\n      canSubmitFetch,\n      fetchStatus,\n      fetchOwners,\n      lastFetchDate\n    }\n  }\n}\n</script>\n\n<style scoped>\n</style>\n","import { render } from \"./DataFetcherParcelOwners.vue?vue&type=template&id=4a1881da\"\nimport script from \"./DataFetcherParcelOwners.vue?vue&type=script&lang=js\"\nexport * from \"./DataFetcherParcelOwners.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/media/riven/projects/aavegotchi/realm/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <details class=\"filter-container\">\n    <summary>\n      <h3>Filter by Baazaar Listings</h3>\n    </summary>\n\n    <div\n      v-for=\"{ id, label } in OPTIONS\"\n      :key=\"id\"\n    >\n      <label>\n        <input\n          type=\"radio\"\n          :value=\"id\"\n          name=\"baazaarFilterOptions\"\n          :checked=\"modelValue === id\"\n          @change=\"$emit('update:modelValue', id)\"\n        />\n        <span>\n          {{ label }}\n        </span>\n      </label>\n    </div>\n  </details>\n</template>\n\n<script>\n\nconst OPTIONS = [\n  { id: 'all', label: 'All parcels' },\n  { id: 'listed', label: 'Parcels listed on Baazaar' },\n  { id: 'unlisted', label: 'Parcels that are not listed on Baazaar' }\n]\n\nconst getDefaultValue = () => 'all'\n\nconst getFilter = function (listingsByParcel, filterBaazaar) {\n  return function (parcel) {\n    if (filterBaazaar === 'all') { return true }\n    if (filterBaazaar === 'listed') { return !!listingsByParcel[parcel.id] }\n    return !listingsByParcel[parcel.id]\n  }\n}\nexport { getDefaultValue, getFilter }\n\nexport default {\n  props: {\n    modelValue: { type: String, default: 'all' }\n  },\n  computed: {\n    OPTIONS () { return OPTIONS }\n  }\n}\n</script>\n\n<style scoped>\n</style>\n","import { render } from \"./FilterBaazaar.vue?vue&type=template&id=1f1dc203\"\nimport script from \"./FilterBaazaar.vue?vue&type=script&lang=js\"\nexport * from \"./FilterBaazaar.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/media/riven/projects/aavegotchi/realm/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <details class=\"filter-container\">\n    <summary>\n      <h3>Filter by Owner</h3>\n    </summary>\n\n    <label>\n      <div>\n        Owner addresses\n      </div>\n      <TextareaList\n        class=\"addresses-textarea\"\n        :modelValue=\"modelValue\"\n        :delimiterRegexp=\"/[^x0-9a-f]+/\"\n        @update:modelValue=\"$emit('update:modelValue', $event)\"\n      />\n    </label>\n  </details>\n</template>\n\n<script>\nimport TextareaList from './TextareaList.vue'\n\nconst getFilter = function (ownersByParcelId, idsArray) {\n  if (idsArray?.length) {\n    return (parcel) => {\n      const owner = ownersByParcelId[parcel.id]\n      return owner && idsArray.includes(owner)\n    }\n  }\n  return () => true\n}\nexport { getFilter }\n\nexport default {\n  components: {\n    TextareaList\n  },\n  props: {\n    modelValue: { type: Array, default: () => [] }\n  }\n}\n</script>\n\n<style scoped>\n  label {\n    margin-top: 10px;\n  }\n  .addresses-textarea {\n    width: 90%;\n    height: 70px;\n    margin-top: 5px;\n  }\n</style>\n","import { render } from \"./FilterOwners.vue?vue&type=template&id=efddcedc&scoped=true\"\nimport script from \"./FilterOwners.vue?vue&type=script&lang=js\"\nexport * from \"./FilterOwners.vue?vue&type=script&lang=js\"\n\nimport \"./FilterOwners.vue?vue&type=style&index=0&id=efddcedc&scoped=true&lang=css\"\n\nimport exportComponent from \"/media/riven/projects/aavegotchi/realm/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-efddcedc\"]])\n\nexport default __exports__","import { render } from \"./CitaadelPage.vue?vue&type=template&id=0a40eea5&scoped=true\"\nimport script from \"./CitaadelPage.vue?vue&type=script&lang=js\"\nexport * from \"./CitaadelPage.vue?vue&type=script&lang=js\"\n\nimport \"./CitaadelPage.vue?vue&type=style&index=0&id=0a40eea5&scoped=true&lang=css\"\n\nimport exportComponent from \"/media/riven/projects/aavegotchi/realm/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-0a40eea5\"]])\n\nexport default __exports__","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./CitaadelPage.vue?vue&type=style&index=0&id=0a40eea5&scoped=true&lang=css\"","import { ref, computed } from 'vue'\nimport useStatus from '@/data/useStatus'\nimport BigNumber from 'bignumber.js'\n\n// We need to fetch all listings in full to get accurate info.\n// Use cached results just for development\n// import initialListings from './baazaar/listings.json'\n// import initialSales from './baazaar/sales.json'\n// Object.values(initialListings).map(item => {\n//   item.priceInGhst = new BigNumber(item.priceInGhst)\n//   item.dateCreated = new Date(item.dateCreated)\n// })\n// Object.values(initialSales).map(item => {\n//   item.priceInGhst = new BigNumber(item.priceInGhst)\n//   item.datePurchased = new Date(item.datePurchased)\n// })\n// const listingsByParcelId = ref(initialListings)\n// const salesByParcelId = ref(initialSales)\n\nconst listingsByParcelId = ref({})\nconst salesByParcelId = ref({})\n\nconst SUBGRAPH_URL = 'https://api.thegraph.com/subgraphs/name/aavegotchi/aavegotchi-core-matic'\nconst FETCH_PAGE_SIZE = 1000\n\nconst resetListings = function () {\n  listingsByParcelId.value = {}\n  salesByParcelId.value = {}\n  lastFetchDate.value = null\n}\n\nconst setListings = function (listings) {\n  for (const listing of listings) {\n    const priceInGhst = (new BigNumber(listing.priceInWei)).dividedBy(10e17)\n    if (listing.timePurchased !== '0') {\n      salesByParcelId.value[listing.tokenId] = {\n        id: listing.id,\n        priceInGhst,\n        priceInGhstJsNum: priceInGhst.toNumber(),\n        datePurchased: new Date(listing.timePurchased * 1000)\n      }\n    } else {\n      listingsByParcelId.value[listing.tokenId] = {\n        id: listing.id,\n        priceInGhst,\n        priceInGhstJsNum: priceInGhst.toNumber(),\n        dateCreated: new Date(listing.timeCreated * 1000)\n      }\n    }\n  }\n}\n\nconst { status: fetchStatus, setLoading } = useStatus()\n\nconst canSubmitFetch = computed(() => !fetchStatus.value.loading)\nconst lastFetchDate = ref(null)\n\nconst fetchListings = function () {\n  const [isStale, setLoaded, setError] = setLoading()\n  let listings = []\n  let lastTimeCreated = 0\n  const fetchListingsFromSubgraph = function () {\n    fetch(SUBGRAPH_URL, {\n      method: 'POST',\n      body: JSON.stringify({\n        query: `{\n          erc721Listings(first: ${FETCH_PAGE_SIZE}, orderBy: timeCreated, where: { timeCreated_gte: ${lastTimeCreated}, category: \"4\", cancelled: false }) {\n            id\n            tokenId\n            timeCreated\n            timePurchased\n            priceInWei\n          }\n        }`\n      })\n    }).then(async response => {\n      if (isStale()) { console.log('Stale request, ignoring'); return }\n      if (!response.ok) {\n        setError('There was an error fetching listings')\n        return\n      }\n      const responseJson = await response.json()\n      if (responseJson.data?.erc721Listings) {\n        listings = listings.concat(responseJson.data.erc721Listings)\n        if (responseJson.data.erc721Listings.length < FETCH_PAGE_SIZE) {\n          // finished fetching all pages\n          resetListings()\n          setListings(listings)\n          lastFetchDate.value = new Date()\n          setLoaded()\n          return\n        }\n        // fetch the next page of results\n        lastTimeCreated = listings[listings.length - 1].timeCreated\n        fetchListingsFromSubgraph()\n      } else {\n        setError('Unexpected response')\n      }\n    }).catch(error => {\n      console.error(error)\n      setError('There was an error fetching listings')\n    })\n  }\n\n  fetchListingsFromSubgraph()\n}\n\nexport default function useBaazaarListings () {\n  return {\n    listingsByParcelId,\n    salesByParcelId,\n    canSubmitFetch,\n    fetchStatus,\n    fetchListings,\n    lastFetchDate\n  }\n}\n","import { ref, computed } from 'vue'\nimport useStatus from '@/data/useStatus'\n\n// We need to fetch all parcels in full to get accurate info.\n// Use cached results just for development\n// import initialOwners from './parcels/parcelOwners.json'\n// const ownersByParcelId = ref(initialOwners)\n\nconst ownersByParcelId = ref({})\n\nconst SUBGRAPH_URL = 'https://api.thegraph.com/subgraphs/name/aavegotchi/aavegotchi-core-matic'\nconst FETCH_PAGE_SIZE = 1000\n\nconst resetOwners = function () {\n  ownersByParcelId.value = {}\n  lastFetchDate.value = null\n}\n\nconst setOwners = function (parcels) {\n  for (const parcel of parcels) {\n    ownersByParcelId.value[parcel.tokenId] = parcel.owner?.id\n  }\n}\n\nconst { status: fetchStatus, setLoading } = useStatus()\n\nconst canSubmitFetch = computed(() => !fetchStatus.value.loading)\nconst lastFetchDate = ref(null)\n\nconst fetchOwners = function () {\n  const [isStale, setLoaded, setError] = setLoading()\n  let lastIdNum = 0\n  let parcels = []\n  const fetchOwnersFromSubgraph = function () {\n    fetch(SUBGRAPH_URL, {\n      method: 'POST',\n      body: JSON.stringify({\n        query: `{\n          parcels(first: ${FETCH_PAGE_SIZE}, orderBy: tokenId, where: { tokenId_gt: ${lastIdNum} }) {\n            tokenId\n            owner {\n              id\n            }\n          }\n        }`\n      })\n    }).then(async response => {\n      if (isStale()) { console.log('Stale request, ignoring'); return }\n      if (!response.ok) {\n        setError('There was an error fetching parcel owners')\n        return\n      }\n      const responseJson = await response.json()\n      if (responseJson.data?.parcels) {\n        parcels = parcels.concat(responseJson.data.parcels)\n        if (responseJson.data.parcels.length < FETCH_PAGE_SIZE) {\n          // finished fetching all pages\n          resetOwners()\n          setOwners(parcels)\n          lastFetchDate.value = new Date()\n          setLoaded()\n          return\n        }\n        // fetch the next page of results\n        lastIdNum = responseJson.data.parcels[responseJson.data.parcels.length - 1].tokenId - 0\n        fetchOwnersFromSubgraph()\n      } else {\n        setError('Unexpected response')\n      }\n    }).catch(error => {\n      console.error(error)\n      setError('There was an error fetching parcel owners')\n    })\n  }\n\n  fetchOwnersFromSubgraph()\n}\n\nexport default function useParcelOwners () {\n  return {\n    ownersByParcelId,\n    canSubmitFetch,\n    fetchStatus,\n    fetchOwners,\n    lastFetchDate\n  }\n}\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./FilterOwners.vue?vue&type=style&index=0&id=efddcedc&scoped=true&lang=css\""],"sourceRoot":""}