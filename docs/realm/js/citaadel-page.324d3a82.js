(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["citaadel-page"],{1297:function(e,t,a){"use strict";a.r(t);a("d3b7"),a("25f0");var c=a("7a23"),r=function(e){return Object(c["y"])("data-v-32706973"),e=e(),Object(c["w"])(),e},n=r((function(){return Object(c["g"])("h1",null,"The Citaadel",-1)})),l={style:{"margin-bottom":"20px"}},i={class:"filter-container"},o={style:{"margin-bottom":"10px"}},u=Object(c["i"])(" Color by: "),s=["value"],b={key:0},d={style:{"text-transform":"capitalize"}},f={style:{"margin-bottom":"10px"}},O=Object(c["i"])(" Color Scheme: "),j=["onUpdate:modelValue"],v=["value"],m=Object(c["i"])(" Min: "),p=["onUpdate:modelValue"],h=Object(c["i"])(" Max: "),g=["onUpdate:modelValue"],y={key:1},P={style:{"text-transform":"capitalize"}},S={style:{"margin-bottom":"10px"}},w=Object(c["i"])(" Color Scheme: "),F=["onUpdate:modelValue"],k=["value"],x=Object(c["i"])(" Min: "),D=["onUpdate:modelValue"],B=Object(c["i"])(" Max: "),I=["onUpdate:modelValue"],N={key:2},V=Object(c["i"])(" Color Scheme: "),z=["value"],L={key:3},M=Object(c["i"])(" Color Scheme: "),A=["value"],C={style:{"margin-top":"8px"}},E=Object(c["i"])(" Min: "),T=Object(c["i"])(" Max: "),U={key:4},G=Object(c["i"])(" Parcel color: "),_=["value"],R={key:0,class:"selected-parcel-details"},H=r((function(){return Object(c["g"])("h2",null,"Selected Parcel details:",-1)})),q=r((function(){return Object(c["g"])("br",null,null,-1)})),J=r((function(){return Object(c["g"])("br",null,null,-1)})),K=r((function(){return Object(c["g"])("br",null,null,-1)})),W={key:0},Y=Object(c["i"])(" Owner: "),$={key:1},Q=["href"],X={key:2},Z=["href"],ee={key:3},te=Object(c["i"])(" Boosts: "),ae={style:{"margin-left":"10px"}},ce={key:0},re={key:1},ne={key:2},le={key:3},ie=Object(c["i"])(" None "),oe={key:0},ue=Object(c["i"])(" No parcels found. "),se={key:1,class:"parcels-list"},be=["onClick"],de={key:0,style:{margin:"0 10px"}},fe=["href"],Oe={key:1},je=Object(c["i"])(" Last sold on Baazaar on "),ve=["href"],me={key:2};function pe(e,t,a,r,pe,he){var ge=Object(c["D"])("DataFetcherBaazaarListings"),ye=Object(c["D"])("DataFetcherParcelOwners"),Pe=Object(c["D"])("MapConfig"),Se=Object(c["D"])("FilterBaazaar"),we=Object(c["D"])("FilterSize"),Fe=Object(c["D"])("FilterWalls"),ke=Object(c["D"])("FilterDistricts"),xe=Object(c["D"])("FilterRoads"),De=Object(c["D"])("FilterParcelIds"),Be=Object(c["D"])("FilterParcelNames"),Ie=Object(c["D"])("FilterBoosts"),Ne=Object(c["D"])("FilterOwners"),Ve=Object(c["D"])("EthAddress"),ze=Object(c["D"])("CitaadelMap"),Le=Object(c["D"])("LayoutMapWithFilters"),Me=Object(c["D"])("PrereqParcels");return Object(c["v"])(),Object(c["d"])(Me,null,{default:Object(c["N"])((function(){return[Object(c["j"])(Le,null,{sidebar:Object(c["N"])((function(){return[n,Object(c["g"])("div",l,[Object(c["j"])(ge,{style:{"margin-bottom":"10px"}}),Object(c["j"])(ye,{style:{"margin-bottom":"10px"}})]),Object(c["g"])("details",i,[Object(c["g"])("summary",null,[Object(c["g"])("h3",null,"Color Scheme: "+Object(c["F"])(r.colorSchemeLabel),1)]),Object(c["g"])("div",o,[u,(Object(c["v"])(!0),Object(c["f"])(c["a"],null,Object(c["B"])(r.colorSchemeOptions,(function(e){return Object(c["v"])(),Object(c["f"])("div",{key:e.id},[Object(c["g"])("label",null,[Object(c["O"])(Object(c["g"])("input",{"onUpdate:modelValue":t[0]||(t[0]=function(e){return r.colorScheme.colorBy=e}),type:"radio",name:"colorBy",value:e.id},null,8,s),[[c["I"],r.colorScheme.colorBy]]),Object(c["i"])(" "+Object(c["F"])(e.label),1)])])})),128))]),"lastPrice"===r.colorScheme.colorBy?(Object(c["v"])(),Object(c["f"])("div",b,[(Object(c["v"])(),Object(c["f"])(c["a"],null,Object(c["B"])(["humble","reasonable","spacious"],(function(e){return Object(c["g"])("div",{key:e,style:{"margin-bottom":"20px"}},[Object(c["g"])("h4",d,Object(c["F"])(e)+": ",1),Object(c["g"])("div",f,[Object(c["g"])("label",null,[O,Object(c["O"])(Object(c["g"])("select",{"onUpdate:modelValue":function(t){return r.colorScheme.lastPrice[e].scaleName=t}},[(Object(c["v"])(!0),Object(c["f"])(c["a"],null,Object(c["B"])(r.SCALE_NAMES,(function(e){return Object(c["v"])(),Object(c["f"])("option",{key:e,value:e},Object(c["F"])(e),9,v)})),128))],8,j),[[c["J"],r.colorScheme.lastPrice[e].scaleName]])]),Object(c["g"])("div",{class:"scale-color-display",style:Object(c["q"])({background:r.SCALE_GRADIENTS[r.colorScheme.lastPrice[e].scaleName]})},null,4)]),Object(c["g"])("div",null,[Object(c["g"])("label",null,[m,Object(c["O"])(Object(c["g"])("input",{"onUpdate:modelValue":function(t){return r.colorScheme.lastPrice[e].min=t},type:"number",class:"range-input"},null,8,p),[[c["K"],r.colorScheme.lastPrice[e].min]])]),Object(c["g"])("label",null,[h,Object(c["O"])(Object(c["g"])("input",{"onUpdate:modelValue":function(t){return r.colorScheme.lastPrice[e].max=t},type:"number",class:"range-input"},null,8,g),[[c["K"],r.colorScheme.lastPrice[e].max]])])])])})),64))])):Object(c["e"])("",!0),"baazaarPrice"===r.colorScheme.colorBy?(Object(c["v"])(),Object(c["f"])("div",y,[(Object(c["v"])(),Object(c["f"])(c["a"],null,Object(c["B"])(["humble","reasonable","spacious"],(function(e){return Object(c["g"])("div",{key:e,style:{"margin-bottom":"20px"}},[Object(c["g"])("h4",P,Object(c["F"])(e)+": ",1),Object(c["g"])("div",S,[Object(c["g"])("label",null,[w,Object(c["O"])(Object(c["g"])("select",{"onUpdate:modelValue":function(t){return r.colorScheme.baazaarPrice[e].scaleName=t}},[(Object(c["v"])(!0),Object(c["f"])(c["a"],null,Object(c["B"])(r.SCALE_NAMES,(function(e){return Object(c["v"])(),Object(c["f"])("option",{key:e,value:e},Object(c["F"])(e),9,k)})),128))],8,F),[[c["J"],r.colorScheme.baazaarPrice[e].scaleName]])]),Object(c["g"])("div",{class:"scale-color-display",style:Object(c["q"])({background:r.SCALE_GRADIENTS[r.colorScheme.baazaarPrice[e].scaleName]})},null,4)]),Object(c["g"])("div",null,[Object(c["g"])("label",null,[x,Object(c["O"])(Object(c["g"])("input",{"onUpdate:modelValue":function(t){return r.colorScheme.baazaarPrice[e].min=t},type:"number",class:"range-input"},null,8,D),[[c["K"],r.colorScheme.baazaarPrice[e].min]])]),Object(c["g"])("label",null,[B,Object(c["O"])(Object(c["g"])("input",{"onUpdate:modelValue":function(t){return r.colorScheme.baazaarPrice[e].max=t},type:"number",class:"range-input"},null,8,I),[[c["K"],r.colorScheme.baazaarPrice[e].max]])])])])})),64))])):Object(c["e"])("",!0),"owner"===r.colorScheme.colorBy?(Object(c["v"])(),Object(c["f"])("div",N,[Object(c["g"])("div",null,[Object(c["g"])("label",null,[V,Object(c["O"])(Object(c["g"])("select",{"onUpdate:modelValue":t[1]||(t[1]=function(e){return r.colorScheme.owner.scaleName=e})},[(Object(c["v"])(!0),Object(c["f"])(c["a"],null,Object(c["B"])(r.SCALE_NAMES,(function(e){return Object(c["v"])(),Object(c["f"])("option",{key:e,value:e},Object(c["F"])(e),9,z)})),128))],512),[[c["J"],r.colorScheme.owner.scaleName]])]),Object(c["g"])("div",{class:"scale-color-display",style:Object(c["q"])({background:r.SCALE_GRADIENTS[r.colorScheme.owner.scaleName]})},null,4)])])):Object(c["e"])("",!0),"whalePx"===r.colorScheme.colorBy?(Object(c["v"])(),Object(c["f"])("div",L,[Object(c["g"])("div",null,[Object(c["g"])("label",null,[M,Object(c["O"])(Object(c["g"])("select",{"onUpdate:modelValue":t[2]||(t[2]=function(e){return r.colorScheme.whalePx.scaleName=e})},[(Object(c["v"])(!0),Object(c["f"])(c["a"],null,Object(c["B"])(r.SCALE_NAMES,(function(e){return Object(c["v"])(),Object(c["f"])("option",{key:e,value:e},Object(c["F"])(e),9,A)})),128))],512),[[c["J"],r.colorScheme.whalePx.scaleName]])]),Object(c["g"])("div",{class:"scale-color-display",style:Object(c["q"])({background:r.SCALE_GRADIENTS[r.colorScheme.whalePx.scaleName]})},null,4),Object(c["g"])("div",C,[Object(c["g"])("label",null,[E,Object(c["O"])(Object(c["g"])("input",{"onUpdate:modelValue":t[3]||(t[3]=function(e){return r.colorScheme.whalePx.min=e}),type:"number",class:"range-input"},null,512),[[c["K"],r.colorScheme.whalePx.min]])]),Object(c["g"])("label",null,[T,Object(c["O"])(Object(c["g"])("input",{"onUpdate:modelValue":t[4]||(t[4]=function(e){return r.colorScheme.whalePx.max=e}),type:"number",class:"range-input"},null,512),[[c["K"],r.colorScheme.whalePx.max]])])])])])):Object(c["e"])("",!0),"highlight"===r.colorScheme.colorBy?(Object(c["v"])(),Object(c["f"])("div",U,[Object(c["g"])("label",null,[G,Object(c["g"])("input",{type:"color",value:r.colorScheme.highlight,onInput:t[5]||(t[5]=function(e){return r.debouncedSetHighlight(e.target.value)})},null,40,_)])])):Object(c["e"])("",!0)]),Object(c["j"])(Pe,{modelValue:r.mapConfig,"onUpdate:modelValue":t[6]||(t[6]=function(e){return r.mapConfig=e})},null,8,["modelValue"]),Object(c["j"])(Se,{modelValue:r.filters.baazaar,"onUpdate:modelValue":t[7]||(t[7]=function(e){return r.filters.baazaar=e})},null,8,["modelValue"]),Object(c["j"])(we,{modelValue:r.filters.size,"onUpdate:modelValue":t[8]||(t[8]=function(e){return r.filters.size=e})},null,8,["modelValue"]),Object(c["j"])(Fe,{modelValue:r.filters.walls,"onUpdate:modelValue":t[9]||(t[9]=function(e){return r.filters.walls=e})},null,8,["modelValue"]),Object(c["j"])(ke,{modelValue:r.filters.districts,"onUpdate:modelValue":t[10]||(t[10]=function(e){return r.filters.districts=e})},null,8,["modelValue"]),Object(c["j"])(xe,{modelValue:r.filters.roads,"onUpdate:modelValue":t[11]||(t[11]=function(e){return r.filters.roads=e})},null,8,["modelValue"]),Object(c["j"])(De,{modelValue:r.filters.parcelIds,"onUpdate:modelValue":t[12]||(t[12]=function(e){return r.filters.parcelIds=e})},null,8,["modelValue"]),Object(c["j"])(Be,{modelValue:r.filters.parcelNames,"onUpdate:modelValue":t[13]||(t[13]=function(e){return r.filters.parcelNames=e})},null,8,["modelValue"]),Object(c["j"])(Ie,{modelValue:r.filters.boosts,"onUpdate:modelValue":t[14]||(t[14]=function(e){return r.filters.boosts=e})},null,8,["modelValue"]),Object(c["j"])(Ne,{modelValue:r.filters.owners,"onUpdate:modelValue":t[15]||(t[15]=function(e){return r.filters.owners=e})},null,8,["modelValue"]),Object(c["g"])("section",null,[r.selectedParcel?(Object(c["v"])(),Object(c["f"])("div",R,[Object(c["g"])("button",{type:"button",style:{float:"right"},onClick:t[16]||(t[16]=function(e){return r.selectedParcelId=null})}," Close "),H,Object(c["i"])(" ID: "+Object(c["F"])(r.selectedParcel.id)+" ",1),q,Object(c["i"])("Name: "+Object(c["F"])(r.selectedParcel.parcelHash)+" ",1),J,Object(c["i"])("Size: "+Object(c["F"])(r.selectedParcel.sizeLabel)+" ",1),K,Object(c["i"])("District: "+Object(c["F"])(r.selectedParcel.district)+" ",1),r.selectedParcel.owner?(Object(c["v"])(),Object(c["f"])("div",W,[Y,Object(c["j"])(Ve,{address:r.selectedParcel.owner},null,8,["address"])])):Object(c["e"])("",!0),r.selectedParcel.currentListing?(Object(c["v"])(),Object(c["f"])("div",$,[Object(c["g"])("a",{href:"https://aavegotchi.com/baazaar/erc721/".concat(r.selectedParcel.currentListing.id),target:"_blank"}," Currently listed on Baazaar for: "+Object(c["F"])(r.selectedParcel.currentListing.priceInGhst.toString())+" GHST ",9,Q)])):Object(c["e"])("",!0),r.selectedParcel.lastSale?(Object(c["v"])(),Object(c["f"])("div",X,[Object(c["g"])("a",{href:"https://aavegotchi.com/baazaar/erc721/".concat(r.selectedParcel.lastSale.id),target:"_blank"}," Last sold on Baazaar on "+Object(c["F"])(r.selectedParcel.lastSale.formattedDate)+" for: "+Object(c["F"])(r.selectedParcel.lastSale.priceInGhst.toString())+" GHST ",9,Z)])):Object(c["e"])("",!0),r.selectedParcel.auctionPrice?(Object(c["v"])(),Object(c["f"])("div",ee," Auction price: "+Object(c["F"])(r.selectedParcel.auctionPrice)+" GHST ",1)):Object(c["e"])("",!0),Object(c["g"])("div",null,[te,Object(c["g"])("div",ae,[r.selectedParcel.hasBoost?(Object(c["v"])(),Object(c["f"])(c["a"],{key:0},["0"!==r.selectedParcel.fudBoost?(Object(c["v"])(),Object(c["f"])("div",ce," FUD: "+Object(c["F"])(r.selectedParcel.fudBoost),1)):Object(c["e"])("",!0),"0"!==r.selectedParcel.fomoBoost?(Object(c["v"])(),Object(c["f"])("div",re," FOMO: "+Object(c["F"])(r.selectedParcel.fomoBoost),1)):Object(c["e"])("",!0),"0"!==r.selectedParcel.alphaBoost?(Object(c["v"])(),Object(c["f"])("div",ne," ALPHA: "+Object(c["F"])(r.selectedParcel.alphaBoost),1)):Object(c["e"])("",!0),"0"!==r.selectedParcel.kekBoost?(Object(c["v"])(),Object(c["f"])("div",le," KEK: "+Object(c["F"])(r.selectedParcel.kekBoost),1)):Object(c["e"])("",!0)],64)):(Object(c["v"])(),Object(c["f"])(c["a"],{key:1},[ie],64))])])])):Object(c["e"])("",!0)])]})),top:Object(c["N"])((function(){return[100===r.percentParcelsMatchingFilters?(Object(c["v"])(),Object(c["f"])(c["a"],{key:0},[Object(c["i"])(" Matched all "+Object(c["F"])(r.numParcelsMatchingFilters)+" parcels ",1)],64)):0===r.percentParcelsMatchingFilters?(Object(c["v"])(),Object(c["f"])(c["a"],{key:1},[Object(c["i"])(" No parcels matched your filters, out of "+Object(c["F"])(r.numParcelsToDisplay)+" parcels ",1)],64)):(Object(c["v"])(),Object(c["f"])(c["a"],{key:2},[Object(c["i"])(" Matched "+Object(c["F"])(r.numParcelsMatchingFilters)+" parcels ("+Object(c["F"])(r.percentParcelsMatchingFilters)+"% of "+Object(c["F"])(r.numParcelsToDisplay)+" currently available) ",1)],64))]})),main:Object(c["N"])((function(e){var a=e.viewMode;return[Object(c["O"])(Object(c["j"])(ze,{mapConfig:r.mapConfig,parcels:r.parcelsToDisplay,parcelsMatchingFilters:r.parcelsMatchingFilters.result,parcelColors:r.parcelColors,selectedParcel:r.selectedParcel,"onClick:parcel":r.onClickParcel},null,8,["mapConfig","parcels","parcelsMatchingFilters","parcelColors","selectedParcel","onClick:parcel"]),[[c["L"],"map"===a]]),"list"===a?(Object(c["v"])(),Object(c["f"])("div",oe,[r.listParcelsToDisplay.length?(Object(c["v"])(),Object(c["f"])("ul",se,[(Object(c["v"])(!0),Object(c["f"])(c["a"],null,Object(c["B"])(r.listParcelsToDisplay,(function(e){return Object(c["v"])(),Object(c["f"])("li",{key:e.id},[Object(c["g"])("a",{href:"#",onClick:Object(c["P"])((function(t){return r.onClickParcel(e)}),["prevent"])},Object(c["F"])(e.id),9,be),Object(c["i"])(" "+Object(c["F"])(e.parcelHash)+" "+Object(c["F"])(e.sizeLabel)+" district "+Object(c["F"])(e.district)+" ",1),r.listingsByParcelId[e.id]?(Object(c["v"])(),Object(c["f"])("span",de,[Object(c["g"])("a",{href:"https://aavegotchi.com/baazaar/erc721/".concat(r.listingsByParcelId[e.id].id),target:"_blank"}," Baazaar "+Object(c["F"])(r.listingsByParcelId[e.id].priceInGhst.toString())+" GHST ",9,fe)])):Object(c["e"])("",!0),r.salesByParcelId[e.id]?(Object(c["v"])(),Object(c["f"])("span",Oe,[je,Object(c["g"])("a",{href:"https://aavegotchi.com/baazaar/erc721/".concat(r.salesByParcelId[e.id].id),target:"_blank"},Object(c["F"])(r.salesByParcelId[e.id].formattedDate)+" for "+Object(c["F"])(r.salesByParcelId[e.id].priceInGhst.toString())+" GHST ",9,ve)])):Object(c["e"])("",!0)])})),128))])):(Object(c["v"])(),Object(c["f"])(c["a"],{key:0},[ue],64)),r.numParcelsMatchingFilters>r.listParcelsToDisplay.length&&!r.listParcelsShowAll?(Object(c["v"])(),Object(c["f"])("div",me,[Object(c["g"])("button",{type:"button",onClick:t[17]||(t[17]=function(e){return r.listParcelsShowAll=!0})}," Show all "+Object(c["F"])(r.numParcelsMatchingFilters)+" matching parcels ",1)])):Object(c["e"])("",!0)])):Object(c["e"])("",!0)]})),_:1})]})),_:1})}var he=a("5530"),ge=a("2909"),ye=(a("d81d"),a("7db0"),a("caad"),a("4e82"),a("4fad"),a("07ac"),a("fb6a"),a("c1f9"),a("4de4"),a("b166")),Pe=function(e){return function(t,a,c){return e(t,a,c)*c}},Se=function(e,t){if(e)throw Error("Invalid sort config: "+t)},we=function(e){var t=e||{},a=t.asc,c=t.desc,r=a?1:-1,n=a||c;Se(!n,"Expected `asc` or `desc` property"),Se(a&&c,"Ambiguous object with `asc` and `desc` config properties");var l=e.comparer&&Pe(e.comparer);return{order:r,sortBy:n,comparer:l}},Fe=function(e){return function t(a,c,r,n,l,i,o){var u,s;if("string"===typeof a)u=i[a],s=o[a];else{if("function"!==typeof a){var b=we(a);return t(b.sortBy,c,r,b.order,b.comparer||e,i,o)}u=a(i),s=a(o)}var d=l(u,s,n);return(0===d||null==u&&null==s)&&c.length>r?t(c[r],c,r+1,n,l,i,o):d}};function ke(e,t,a){if(void 0===e||!0===e)return function(e,c){return t(e,c,a)};if("string"===typeof e)return Se(e.includes("."),"String syntax not allowed for nested properties."),function(c,r){return t(c[e],r[e],a)};if("function"===typeof e)return function(c,r){return t(e(c),e(r),a)};if(Array.isArray(e)){var c=Fe(t);return function(r,n){return c(e[0],e,1,a,t,r,n)}}var r=we(e);return ke(r.sortBy,r.comparer||t,r.order)}var xe=function(e,t,a,c){var r;return Array.isArray(t)?(Array.isArray(a)&&a.length<2&&(r=a,a=r[0]),t.sort(ke(a,c,e))):t};function De(e){var t=Pe(e.comparer);return function(a){var c=Array.isArray(a)&&!e.inPlaceSorting?a.slice():a;return{asc:function(e){return xe(1,c,e,t)},desc:function(e){return xe(-1,c,e,t)},by:function(e){return xe(1,c,e,t)}}}}var Be=function(e,t,a){return null==e?a:null==t?-a:e<t?-1:e===t?0:1},Ie=(De({comparer:Be}),De({comparer:Be,inPlaceSorting:!0})),Ne=a("f7fe"),Ve=a.n(Ne),ze=a("9220"),Le=a("86f5"),Me=a("3835"),Ae=(a("3ca3"),a("ddb0"),a("2e7a")),Ce=Object(ze["a"])(),Ee=Ce.parcelsById,Te=Ce.fetchStatus,Ue=Object(Le["a"])(),Ge=Ue.salesByParcelId,_e=Object(Ae["a"])(),Re=_e.status,He=_e.setLoading,qe={},Je=He(),Ke=Object(Me["a"])(Je,3),We=Ke[0],Ye=Ke[1],$e=Ke[2];a.e("auctionpricesjson").then(a.t.bind(null,"9fdc",3)).then((function(e){var t=e.default;We()||(qe=t,Ye())})).catch((function(e){console.error(e),$e("Error loading auction prices")}));var Qe=Object(c["b"])((function(){var e={};if(!Te.value.loaded||!Re.value.loaded)return e;for(var t in Ee.value){var a,c=(null===(a=Ge.value[t])||void 0===a?void 0:a.priceInGhst.toString())||qe[t]||null;e[t]={lastPrice:c?c-0:null,auctionPrice:qe[t]}}return e}));function Xe(){return{pricesByParcelId:Qe}}var Ze=a("b967"),et=a("d4bd"),tt=a("9e37"),at={key:0,style:{"margin-bottom":"5px","font-style":"italic","font-size":"0.95em"}},ct=Object(c["i"])(" Baazaar listings fetched "),rt=["disabled"],nt={style:{"margin-top":"5px"}},lt={key:0},it=Object(c["i"])(" loading listings... "),ot={key:1};function ut(e,t,a,r,n,l){var i=Object(c["D"])("DateFriendly"),o=Object(c["D"])("LoadingSpinner");return Object(c["v"])(),Object(c["f"])("div",null,[r.fetchStatus.loaded?(Object(c["v"])(),Object(c["f"])("div",at,[ct,Object(c["j"])(i,{date:r.lastFetchDate},null,8,["date"])])):Object(c["e"])("",!0),Object(c["g"])("div",null,[Object(c["g"])("button",{type:"button",disabled:!r.canSubmitFetch,onClick:t[0]||(t[0]=function(){return r.fetchListings&&r.fetchListings.apply(r,arguments)})}," Get Latest Baazaar Listings ",8,rt),Object(c["g"])("div",nt,[r.fetchStatus.loading?(Object(c["v"])(),Object(c["f"])("span",lt,[Object(c["j"])(o,{style:{position:"relative",top:"2px","margin-right":"2px"}}),it])):Object(c["e"])("",!0),r.fetchStatus.error?(Object(c["v"])(),Object(c["f"])("span",ot," Error loading listings: "+Object(c["F"])(r.fetchStatus.errorMessage),1)):Object(c["e"])("",!0)])])])}function st(e,t,a,r,n,l){return Object(c["v"])(),Object(c["f"])("span",null,Object(c["F"])(r.friendlyDate),1)}var bt=a("2420"),dt=a("fd3a"),ft=a("8c86");function Ot(e,t){Object(ft["a"])(2,arguments);var a=Object(dt["a"])(e),c=Object(dt["a"])(t),r=a.getTime()-c.getTime();return r<0?-1:r>0?1:r}function jt(e,t){if(null==e)throw new TypeError("assign requires that input parameter not be null or undefined");for(var a in t=t||{},t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}function vt(e){return jt({},e)}var mt=a("8923"),pt=6e4,ht=1440,gt=30*ht,yt=365*ht;function Pt(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(ft["a"])(2,arguments);var c=a.locale||mt["a"];if(!c.formatDistance)throw new RangeError("locale must contain localize.formatDistance property");var r=Ot(e,t);if(isNaN(r))throw new RangeError("Invalid time value");var n,l,i=vt(a);i.addSuffix=Boolean(a.addSuffix),i.comparison=r,r>0?(n=Object(dt["a"])(t),l=Object(dt["a"])(e)):(n=Object(dt["a"])(e),l=Object(dt["a"])(t));var o,u=null==a.roundingMethod?"round":String(a.roundingMethod);if("floor"===u)o=Math.floor;else if("ceil"===u)o=Math.ceil;else{if("round"!==u)throw new RangeError("roundingMethod must be 'floor', 'ceil' or 'round'");o=Math.round}var s,b=l.getTime()-n.getTime(),d=b/pt,f=Object(bt["a"])(l)-Object(bt["a"])(n),O=(b-f)/pt;if(s=null==a.unit?d<1?"second":d<60?"minute":d<ht?"hour":O<gt?"day":O<yt?"month":"year":String(a.unit),"second"===s){var j=o(b/1e3);return c.formatDistance("xSeconds",j,i)}if("minute"===s){var v=o(d);return c.formatDistance("xMinutes",v,i)}if("hour"===s){var m=o(d/60);return c.formatDistance("xHours",m,i)}if("day"===s){var p=o(O/ht);return c.formatDistance("xDays",p,i)}if("month"===s){var h=o(O/gt);return 12===h&&"month"!==a.unit?c.formatDistance("xYears",1,i):c.formatDistance("xMonths",h,i)}if("year"===s){var g=o(O/yt);return c.formatDistance("xYears",g,i)}throw new RangeError("unit must be 'second', 'minute', 'hour', 'day', 'month' or 'year'")}function St(e){var t,a;if(Object(ft["a"])(1,arguments),e&&"function"===typeof e.forEach)t=e;else{if("object"!==typeof e||null===e)return new Date(NaN);t=Array.prototype.slice.call(e)}return t.forEach((function(e){var t=Object(dt["a"])(e);(void 0===a||a<t||isNaN(Number(t)))&&(a=t)})),a||new Date(NaN)}var wt=Object(c["A"])(new Date);setInterval((function(){wt.value=new Date}),15e3);var Ft=function(){return{tickerDate:wt}},kt={props:{date:{type:Date,required:!0}},setup:function(e){var t=Ft(),a=t.tickerDate,r=Object(c["b"])((function(){return Pt(e.date,St([a.value,new Date]),{addSuffix:!0})}));return{friendlyDate:r}}},xt=a("6b0d"),Dt=a.n(xt);const Bt=Dt()(kt,[["render",st]]);var It=Bt,Nt=a("d76c"),Vt={components:{DateFriendly:It,LoadingSpinner:Nt["a"]},setup:function(e){var t=Object(Le["a"])(),a=t.canSubmitFetch,c=t.fetchStatus,r=t.fetchListings,n=t.lastFetchDate;return{canSubmitFetch:a,fetchStatus:c,fetchListings:r,lastFetchDate:n}}};const zt=Dt()(Vt,[["render",ut]]);var Lt=zt,Mt={key:0,style:{"margin-bottom":"5px","font-style":"italic","font-size":"0.95em"}},At=Object(c["i"])(" Parcel owners fetched "),Ct=["disabled"],Et={style:{"margin-top":"5px"}},Tt={key:0},Ut=Object(c["i"])(" loading owners... "),Gt={key:1};function _t(e,t,a,r,n,l){var i=Object(c["D"])("DateFriendly"),o=Object(c["D"])("LoadingSpinner");return Object(c["v"])(),Object(c["f"])("div",null,[r.fetchStatus.loaded?(Object(c["v"])(),Object(c["f"])("div",Mt,[At,Object(c["j"])(i,{date:r.lastFetchDate},null,8,["date"])])):Object(c["e"])("",!0),Object(c["g"])("div",null,[Object(c["g"])("button",{type:"button",disabled:!r.canSubmitFetch,onClick:t[0]||(t[0]=function(){return r.fetchOwners&&r.fetchOwners.apply(r,arguments)})}," Get Latest Parcel Owners ",8,Ct),Object(c["g"])("div",Et,[r.fetchStatus.loading?(Object(c["v"])(),Object(c["f"])("span",Tt,[Object(c["j"])(o,{style:{position:"relative",top:"2px","margin-right":"2px"}}),Ut])):Object(c["e"])("",!0),r.fetchStatus.error?(Object(c["v"])(),Object(c["f"])("span",Gt," Error loading owners: "+Object(c["F"])(r.fetchStatus.errorMessage),1)):Object(c["e"])("",!0)])])])}var Rt={components:{DateFriendly:It,LoadingSpinner:Nt["a"]},setup:function(e){var t=Object(Ze["a"])(),a=t.canSubmitFetch,c=t.fetchStatus,r=t.fetchOwners,n=t.lastFetchDate;return{canSubmitFetch:a,fetchStatus:c,fetchOwners:r,lastFetchDate:n}}};const Ht=Dt()(Rt,[["render",_t]]);var qt=Ht,Jt=a("12b9"),Kt=a("5789"),Wt=a("e004"),Yt=a("fe8e"),$t=a("8af4"),Qt={class:"filter-container"},Xt=Object(c["g"])("summary",null,[Object(c["g"])("h3",null,"Filter by Baazaar Listings")],-1),Zt=["value","checked","onChange"];function ea(e,t,a,r,n,l){return Object(c["v"])(),Object(c["f"])("details",Qt,[Xt,(Object(c["v"])(!0),Object(c["f"])(c["a"],null,Object(c["B"])(l.OPTIONS,(function(t){var r=t.id,n=t.label;return Object(c["v"])(),Object(c["f"])("div",{key:r},[Object(c["g"])("label",null,[Object(c["g"])("input",{type:"radio",value:r,name:"baazaarFilterOptions",checked:a.modelValue===r,onChange:function(t){return e.$emit("update:modelValue",r)}},null,40,Zt),Object(c["g"])("span",null,Object(c["F"])(n),1)])])})),128))])}var ta=[{id:"all",label:"All parcels"},{id:"listed",label:"Parcels listed on Baazaar"},{id:"unlisted",label:"Parcels that are not listed on Baazaar"}],aa=function(){return"all"},ca=function(e,t){return function(a){return"all"===t||("listed"===t?!!e[a.id]:!e[a.id])}},ra={props:{modelValue:{type:String,default:"all"}},computed:{OPTIONS:function(){return ta}}};const na=Dt()(ra,[["render",ea]]);var la=na,ia=a("23df"),oa=a("4a49"),ua=a("b89e"),sa=a("78a7"),ba=a("8dd4"),da=a("8fa9"),fa=a("3d41"),Oa=function(e){return Object(c["y"])("data-v-efddcedc"),e=e(),Object(c["w"])(),e},ja={class:"filter-container"},va=Oa((function(){return Object(c["g"])("summary",null,[Object(c["g"])("h3",null,"Filter by Owner")],-1)})),ma=Oa((function(){return Object(c["g"])("div",null," Owner addresses ",-1)}));function pa(e,t,a,r,n,l){var i=Object(c["D"])("TextareaList");return Object(c["v"])(),Object(c["f"])("details",ja,[va,Object(c["g"])("label",null,[ma,Object(c["j"])(i,{class:"addresses-textarea",modelValue:a.modelValue,delimiterRegexp:/[^x0-9a-f]+/,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.$emit("update:modelValue",t)})},null,8,["modelValue"])])])}a("2532");var ha=a("3b4e"),ga=function(e,t){return null!==t&&void 0!==t&&t.length?function(a){var c=e[a.id];return c&&t.includes(c)}:function(){return!0}},ya={components:{TextareaList:ha["a"]},props:{modelValue:{type:Array,default:function(){return[]}}}};a("e44b");const Pa=Dt()(ya,[["render",pa],["__scopeId","data-v-efddcedc"]]);var Sa=Pa,wa={components:{PrereqParcels:Jt["a"],LayoutMapWithFilters:Kt["a"],DataFetcherBaazaarListings:Lt,DataFetcherParcelOwners:qt,EthAddress:Wt["a"],CitaadelMap:Yt["a"],MapConfig:$t["a"],FilterBaazaar:la,FilterSize:ia["b"],FilterWalls:oa["a"],FilterDistricts:ua["b"],FilterRoads:sa["a"],FilterParcelIds:ba["a"],FilterParcelNames:da["a"],FilterBoosts:fa["a"],FilterOwners:Sa},setup:function(){var e=Object(Le["a"])(),t=e.listingsByParcelId,a=e.salesByParcelId,r=e.fetchStatus,n=e.fetchListings,l=Xe(),i=l.pricesByParcelId,o=Object(Ze["a"])(),u=o.ownersByParcelId,s=o.fetchStatus,b=o.fetchOwners,d=Object(c["A"])(Object($t["b"])()),f=Object(c["A"])({baazaar:aa(),size:Object(ge["a"])(ia["a"]),walls:et["a"].map((function(e){return e.id})),districts:Object(ua["c"])(Object(ge["a"])(ua["a"])),roads:Object(sa["b"])(),parcelIds:[],parcelNames:[],boosts:Object(fa["b"])(),owners:[]}),O=[{id:"lastPrice",label:"Last Sold Price (GHST)"},{id:"baazaarPrice",label:"Baazaar Listing Price (GHST)"},{id:"owner",label:"Owner Address"},{id:"whalePx",label:"Whales (total pixel area)"},{id:"highlight",label:"Simple highlight"}],j=Object(c["A"])({colorBy:"lastPrice",lastPrice:{humble:{min:88,max:500,scaleName:"viridis"},reasonable:{min:180,max:1e3,scaleName:"viridis"},spacious:{min:1025,max:3e3,scaleName:"viridis"}},baazaarPrice:{humble:{min:88,max:500,scaleName:"viridis"},reasonable:{min:180,max:1e3,scaleName:"viridis"},spacious:{min:1025,max:3e3,scaleName:"viridis"}},owner:{scaleName:"rainbow",min:0,max:parseInt("0xffffffffffffffffffffffffffffffffffffffff",16)},whalePx:{scaleName:"inferno",min:0,max:15e4},highlight:"#ffa500"}),v=Object(c["b"])((function(){var e;return null===(e=O.find((function(e){return e.id===j.value.colorBy})))||void 0===e?void 0:e.label})),m=Ve()((function(e){j.value.highlight=e}),300),p=function(){r.value.loaded||r.value.loading||n()},h=function(){s.value.loaded||s.value.loading||b()};Object(c["M"])((function(){return j.value.colorBy}),(function(e){["baazaarPrice","lastPrice"].includes(e)&&p(),["owner","whalePx"].includes(e)&&h()}),{immediate:!0}),Object(c["M"])((function(){return f.value.baazaar}),(function(e){"all"!==e&&p()})),Object(c["M"])((function(){return f.value.owners}),(function(e){null!==e&&void 0!==e&&e.length&&h()}));var g=Object(c["b"])((function(){var e={},t=j.value.lastPrice;for(var a in t){var c=t[a];e[a]=Object(tt["c"])(c)}return e})),y=Object(c["b"])((function(){var e={},t=j.value.baazaarPrice;for(var a in t){var c=t[a];e[a]=Object(tt["c"])(c)}return e})),P=Object(c["b"])((function(){return Object(tt["c"])(j.value.owner)})),S=10,w=Object(c["b"])((function(){return Object(tt["c"])({scaleName:j.value.owner.scaleName,min:0,max:S})})),F=Object(c["b"])((function(){return Object(tt["c"])(j.value.whalePx)})),k=Object(c["b"])((function(){var e={},t={humble:64,reasonable:256,spacious:2048};for(var a in u.value){var c=u.value[a];e[c]||(e[c]=0);var r=B.value[a];r&&(e[c]+=t[r.sizeLabel]||0)}return e})),x=Object(c["b"])((function(){return Object.entries(k.value).sort((function(e,t){return e[1]===t[1]?0:e[1]<t[1]?1:-1}))})),D=Object(ze["a"])(),B=D.parcelsById,I=D.fetchStatus,N=Object(c["b"])((function(){return Object.values(B.value)})),V=Object(c["b"])((function(){return N.value.length})),z=Object(c["b"])((function(){var e=j.value.colorBy,a=function(){return null};if("lastPrice"===e)a=function(e){var t,a=g.value[e.sizeLabel];if(!a)return null;var c=null===(t=i.value[e.id])||void 0===t?void 0:t.lastPrice;return c?a(c-0):null};else if("baazaarPrice"===e)a=function(e){var a=y.value[e.sizeLabel];if(!a)return null;var c=t.value[e.id];return c?a(c.priceInGhst.toNumber()):null};else if("owner"===e){var c=x.value.slice(0,S).map((function(e){return e[0]}));a=function(e){var t=u.value[e.id],a=c.indexOf(t);return-1!==a?w.value(a):P.value(parseInt(t,16))}}else"whalePx"===e?a=function(e){var t=u.value[e.id];return F.value(k.value[t]||0)}:"highlight"===e&&(a=function(e){return j.value.highlight});var r=Object.fromEntries(N.value.map((function(e){return[e.id,a(e)||null]})));return r})),L=Object(c["b"])((function(){var e=Object(ba["b"])(f.value.parcelIds),a=Object(da["b"])(f.value.parcelNames),c=ca(t.value,f.value.baazaar),r=Object(ia["c"])(f.value.size),n=Object(oa["b"])(f.value.walls),l=Object(ua["d"])(ua["a"],f.value.districts),i=Object(sa["c"])(f.value.roads),o=Object(fa["c"])(f.value.boosts),s=ga(u.value,f.value.owners),b=[e,a,c,s,r,n,l,i,o],d=0,O=Object.fromEntries(N.value.map((function(e){for(var t=!0,a=0;t&&a<b.length;a++)b[a](e)||(t=!1);return t&&d++,[e.id,t]})));return{result:O,numMatches:d}})),M=Object(c["b"])((function(){return L.value.numMatches})),A=Object(c["b"])((function(){var e=M.value/V.value*100,t=Math.round(e);return t>5?t:Math.round(100*e)/100})),C=Object(c["A"])(null),E=Object(c["b"])((function(){var e,c=C.value;if(!c)return null;var r=t.value[c],n=a.value[c];n&&(n.formattedDate=Object(ye["a"])(n.datePurchased,"yyyy/MM/dd HH:mm:ss"));var l=null===(e=i.value[c])||void 0===e?void 0:e.auctionPrice,o=u.value[c];return Object(he["a"])(Object(he["a"])({},B.value[c]),{},{currentListing:r,lastSale:n,auctionPrice:l,owner:o})})),T=function(e){C.value=e.id},U=Object(c["b"])((function(){var e=N.value.filter((function(e){return L.value.result[e.id]}));return Ie(e).by([{asc:function(e){var a;return null===(a=t.value[e.id])||void 0===a?void 0:a.priceInGhstJsNum}},{asc:function(e){return e.district-0}},{asc:function(e){return e.id-0}}]),e})),G=Object(c["A"])(!1);Object(c["M"])((function(){return M.value}),(function(){G.value=!1}));var _=Object(c["b"])((function(){return G.value?U.value:U.value.slice(0,100)}));return{parcelsFetchStatus:I,mapConfig:d,filters:f,colorScheme:j,colorSchemeLabel:v,colorSchemeOptions:O,debouncedSetHighlight:m,SCALE_NAMES:tt["b"],SCALE_GRADIENTS:tt["a"],baazaarListingsFetchStatus:r,parcelsToDisplay:N,parcelsMatchingFilters:L,numParcelsToDisplay:V,numParcelsMatchingFilters:M,percentParcelsMatchingFilters:A,parcelColors:z,onClickParcel:T,selectedParcelId:C,selectedParcel:E,listParcelsShowAll:G,listParcelsToDisplay:_,listingsByParcelId:t,salesByParcelId:a}}};a("62a3");const Fa=Dt()(wa,[["render",pe],["__scopeId","data-v-32706973"]]);t["default"]=Fa},"2bb8":function(e,t,a){},"3a60":function(e,t,a){},"62a3":function(e,t,a){"use strict";a("2bb8")},"86f5":function(e,t,a){"use strict";a.d(t,"a",(function(){return P}));var c=a("1da1"),r=a("3835"),n=a("b85c"),l=(a("96cf"),a("d3b7"),a("e9c4"),a("99af"),a("7a23")),i=a("2e7a"),o=a("901e"),u=a.n(o),s=Object(l["A"])({}),b=Object(l["A"])({}),d="https://api.thegraph.com/subgraphs/name/aavegotchi/aavegotchi-core-matic",f=1e3,O=function(){s.value={},b.value={},g.value=null},j=function(e){var t,a=Object(n["a"])(e);try{for(a.s();!(t=a.n()).done;){var c=t.value,r=new u.a(c.priceInWei).dividedBy(1e18);"0"!==c.timePurchased?b.value[c.tokenId]={id:c.id,priceInGhst:r,priceInGhstJsNum:r.toNumber(),datePurchased:new Date(1e3*c.timePurchased)}:s.value[c.tokenId]={id:c.id,priceInGhst:r,priceInGhstJsNum:r.toNumber(),dateCreated:new Date(1e3*c.timeCreated)}}}catch(l){a.e(l)}finally{a.f()}},v=Object(i["a"])(),m=v.status,p=v.setLoading,h=Object(l["b"])((function(){return!m.value.loading})),g=Object(l["A"])(null),y=function(){var e=p(),t=Object(r["a"])(e,3),a=t[0],n=t[1],l=t[2],i=[],o=0,u=function e(){fetch(d,{method:"POST",body:JSON.stringify({query:"{\n          erc721Listings(first: ".concat(f,", orderBy: timeCreated, where: { timeCreated_gte: ").concat(o,', category: "4", cancelled: false }) {\n            id\n            tokenId\n            timeCreated\n            timePurchased\n            priceInWei\n          }\n        }')})}).then(function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(c){var r,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a()){t.next=3;break}return console.log("Stale request, ignoring"),t.abrupt("return");case 3:if(c.ok){t.next=6;break}return l("There was an error fetching listings"),t.abrupt("return");case 6:return t.next=8,c.json();case 8:if(u=t.sent,null===(r=u.data)||void 0===r||!r.erc721Listings){t.next=21;break}if(i=i.concat(u.data.erc721Listings),!(u.data.erc721Listings.length<f)){t.next=17;break}return O(),j(i),g.value=new Date,n(),t.abrupt("return");case 17:o=i[i.length-1].timeCreated,e(),t.next=22;break;case 21:l("Unexpected response");case 22:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){console.error(e),l("There was an error fetching listings")}))};u()};function P(){return{listingsByParcelId:s,salesByParcelId:b,canSubmitFetch:h,fetchStatus:m,fetchListings:y,lastFetchDate:g}}},b967:function(e,t,a){"use strict";a.d(t,"a",(function(){return h}));var c=a("1da1"),r=a("3835"),n=a("b85c"),l=(a("96cf"),a("d3b7"),a("e9c4"),a("99af"),a("7a23")),i=a("2e7a"),o=Object(l["A"])({}),u="https://api.thegraph.com/subgraphs/name/aavegotchi/aavegotchi-core-matic",s=1e3,b=function(){o.value={},m.value=null},d=function(e){var t,a=Object(n["a"])(e);try{for(a.s();!(t=a.n()).done;){var c,r=t.value;o.value[r.tokenId]=null===(c=r.owner)||void 0===c?void 0:c.id}}catch(l){a.e(l)}finally{a.f()}},f=Object(i["a"])(),O=f.status,j=f.setLoading,v=Object(l["b"])((function(){return!O.value.loading})),m=Object(l["A"])(null),p=function(){var e=j(),t=Object(r["a"])(e,3),a=t[0],n=t[1],l=t[2],i=0,o=[],f=function e(){fetch(u,{method:"POST",body:JSON.stringify({query:"{\n          parcels(first: ".concat(s,", orderBy: tokenId, where: { tokenId_gt: ").concat(i," }) {\n            tokenId\n            owner {\n              id\n            }\n          }\n        }")})}).then(function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(c){var r,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a()){t.next=3;break}return console.log("Stale request, ignoring"),t.abrupt("return");case 3:if(c.ok){t.next=6;break}return l("There was an error fetching parcel owners"),t.abrupt("return");case 6:return t.next=8,c.json();case 8:if(u=t.sent,null===(r=u.data)||void 0===r||!r.parcels){t.next=21;break}if(o=o.concat(u.data.parcels),!(u.data.parcels.length<s)){t.next=17;break}return b(),d(o),m.value=new Date,n(),t.abrupt("return");case 17:i=u.data.parcels[u.data.parcels.length-1].tokenId-0,e(),t.next=22;break;case 21:l("Unexpected response");case 22:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){console.error(e),l("There was an error fetching parcel owners")}))};f()};function h(){return{ownersByParcelId:o,canSubmitFetch:v,fetchStatus:O,fetchOwners:p,lastFetchDate:m}}},e44b:function(e,t,a){"use strict";a("3a60")}}]);
//# sourceMappingURL=citaadel-page.324d3a82.js.map