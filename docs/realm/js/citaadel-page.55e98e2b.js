(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["citaadel-page"],{1297:function(e,t,a){"use strict";a.r(t);a("d3b7"),a("25f0");var c=a("7a23"),r=function(e){return Object(c["x"])("data-v-433119fc"),e=e(),Object(c["v"])(),e},n=r((function(){return Object(c["g"])("h1",null,"The Citaadel",-1)})),l={style:{"margin-bottom":"20px"}},i={class:"filter-container"},o={style:{"margin-bottom":"10px"}},u=Object(c["h"])(" Color by: "),s=["value"],b={key:0},d={style:{"text-transform":"capitalize"}},O={style:{"margin-bottom":"10px"}},f=Object(c["h"])(" Color Scheme: "),j=["onUpdate:modelValue"],m=["value"],p=Object(c["h"])(" Min: "),h=["onUpdate:modelValue"],v=Object(c["h"])(" Max: "),g=["onUpdate:modelValue"],y={key:1},P={style:{"text-transform":"capitalize"}},S={style:{"margin-bottom":"10px"}},w=Object(c["h"])(" Color Scheme: "),x=["onUpdate:modelValue"],k=["value"],C=Object(c["h"])(" Min: "),E=["onUpdate:modelValue"],I=Object(c["h"])(" Max: "),N=["onUpdate:modelValue"],z={key:2},B=Object(c["h"])(" Color Scheme: "),D=["value"],L={key:3},F=Object(c["h"])(" Color Scheme: "),V=["value"],M={style:{"margin-top":"8px"}},A=Object(c["h"])(" Min: "),T=Object(c["h"])(" Max: "),U={key:0,class:"selected-parcel-details"},G=r((function(){return Object(c["g"])("h2",null,"Selected Parcel details:",-1)})),_=r((function(){return Object(c["g"])("br",null,null,-1)})),R=r((function(){return Object(c["g"])("br",null,null,-1)})),H=r((function(){return Object(c["g"])("br",null,null,-1)})),J={key:0},q=Object(c["h"])(" Owner: "),W={key:1},K=["href"],Y={key:2},$=["href"],Q={key:3},X=Object(c["h"])(" Boosts: "),Z={style:{"margin-left":"10px"}},ee={key:0},te={key:1},ae={key:2},ce={key:3},re=Object(c["h"])(" None "),ne={key:0},le=Object(c["h"])(" No parcels found. "),ie={class:"parcels-list"},oe=["onClick"],ue={key:0,style:{margin:"0 10px"}},se=["href"],be={key:1},de=Object(c["h"])(" Last sold on Baazaar on "),Oe=["href"],fe={key:2};function je(e,t,a,r,je,me){var pe=Object(c["C"])("DataFetcherBaazaarListings"),he=Object(c["C"])("DataFetcherParcelOwners"),ve=Object(c["C"])("MapConfigDisplayMode"),ge=Object(c["C"])("FilterBaazaar"),ye=Object(c["C"])("FilterSize"),Pe=Object(c["C"])("FilterWalls"),Se=Object(c["C"])("FilterDistricts"),we=Object(c["C"])("FilterParcelIds"),xe=Object(c["C"])("FilterParcelNames"),ke=Object(c["C"])("FilterBoosts"),Ce=Object(c["C"])("FilterOwners"),Ee=Object(c["C"])("EthAddress"),Ie=Object(c["C"])("CitaadelMap"),Ne=Object(c["C"])("LayoutMapWithFilters"),ze=Object(c["C"])("PrereqParcels");return Object(c["u"])(),Object(c["d"])(ze,null,{default:Object(c["M"])((function(){return[Object(c["i"])(Ne,null,{sidebar:Object(c["M"])((function(){return[n,Object(c["g"])("div",l,[Object(c["i"])(pe,{style:{"margin-bottom":"10px"}}),Object(c["i"])(he,{style:{"margin-bottom":"10px"}})]),Object(c["g"])("details",i,[Object(c["g"])("summary",null,[Object(c["g"])("h3",null,"Color Scheme: "+Object(c["E"])(r.colorSchemeLabel),1)]),Object(c["g"])("div",o,[u,(Object(c["u"])(!0),Object(c["f"])(c["a"],null,Object(c["A"])(r.colorSchemeOptions,(function(e){return Object(c["u"])(),Object(c["f"])("div",{key:e.id},[Object(c["g"])("label",null,[Object(c["N"])(Object(c["g"])("input",{"onUpdate:modelValue":t[0]||(t[0]=function(e){return r.colorScheme.colorBy=e}),type:"radio",name:"colorBy",value:e.id},null,8,s),[[c["H"],r.colorScheme.colorBy]]),Object(c["h"])(" "+Object(c["E"])(e.label),1)])])})),128))]),"lastPrice"===r.colorScheme.colorBy?(Object(c["u"])(),Object(c["f"])("div",b,[(Object(c["u"])(),Object(c["f"])(c["a"],null,Object(c["A"])(["humble","reasonable","spacious"],(function(e){return Object(c["g"])("div",{key:e,style:{"margin-bottom":"20px"}},[Object(c["g"])("h4",d,Object(c["E"])(e)+": ",1),Object(c["g"])("div",O,[Object(c["g"])("label",null,[f,Object(c["N"])(Object(c["g"])("select",{"onUpdate:modelValue":function(t){return r.colorScheme.lastPrice[e].scaleName=t}},[(Object(c["u"])(!0),Object(c["f"])(c["a"],null,Object(c["A"])(r.SCALE_NAMES,(function(e){return Object(c["u"])(),Object(c["f"])("option",{key:e,value:e},Object(c["E"])(e),9,m)})),128))],8,j),[[c["I"],r.colorScheme.lastPrice[e].scaleName]])]),Object(c["g"])("div",{class:"scale-color-display",style:Object(c["p"])({background:r.SCALE_GRADIENTS[r.colorScheme.lastPrice[e].scaleName]})},null,4)]),Object(c["g"])("div",null,[Object(c["g"])("label",null,[p,Object(c["N"])(Object(c["g"])("input",{"onUpdate:modelValue":function(t){return r.colorScheme.lastPrice[e].min=t},type:"number",class:"range-input"},null,8,h),[[c["J"],r.colorScheme.lastPrice[e].min]])]),Object(c["g"])("label",null,[v,Object(c["N"])(Object(c["g"])("input",{"onUpdate:modelValue":function(t){return r.colorScheme.lastPrice[e].max=t},type:"number",class:"range-input"},null,8,g),[[c["J"],r.colorScheme.lastPrice[e].max]])])])])})),64))])):Object(c["e"])("",!0),"baazaarPrice"===r.colorScheme.colorBy?(Object(c["u"])(),Object(c["f"])("div",y,[(Object(c["u"])(),Object(c["f"])(c["a"],null,Object(c["A"])(["humble","reasonable","spacious"],(function(e){return Object(c["g"])("div",{key:e,style:{"margin-bottom":"20px"}},[Object(c["g"])("h4",P,Object(c["E"])(e)+": ",1),Object(c["g"])("div",S,[Object(c["g"])("label",null,[w,Object(c["N"])(Object(c["g"])("select",{"onUpdate:modelValue":function(t){return r.colorScheme.baazaarPrice[e].scaleName=t}},[(Object(c["u"])(!0),Object(c["f"])(c["a"],null,Object(c["A"])(r.SCALE_NAMES,(function(e){return Object(c["u"])(),Object(c["f"])("option",{key:e,value:e},Object(c["E"])(e),9,k)})),128))],8,x),[[c["I"],r.colorScheme.baazaarPrice[e].scaleName]])]),Object(c["g"])("div",{class:"scale-color-display",style:Object(c["p"])({background:r.SCALE_GRADIENTS[r.colorScheme.baazaarPrice[e].scaleName]})},null,4)]),Object(c["g"])("div",null,[Object(c["g"])("label",null,[C,Object(c["N"])(Object(c["g"])("input",{"onUpdate:modelValue":function(t){return r.colorScheme.baazaarPrice[e].min=t},type:"number",class:"range-input"},null,8,E),[[c["J"],r.colorScheme.baazaarPrice[e].min]])]),Object(c["g"])("label",null,[I,Object(c["N"])(Object(c["g"])("input",{"onUpdate:modelValue":function(t){return r.colorScheme.baazaarPrice[e].max=t},type:"number",class:"range-input"},null,8,N),[[c["J"],r.colorScheme.baazaarPrice[e].max]])])])])})),64))])):Object(c["e"])("",!0),"owner"===r.colorScheme.colorBy?(Object(c["u"])(),Object(c["f"])("div",z,[Object(c["g"])("div",null,[Object(c["g"])("label",null,[B,Object(c["N"])(Object(c["g"])("select",{"onUpdate:modelValue":t[1]||(t[1]=function(e){return r.colorScheme.owner.scaleName=e})},[(Object(c["u"])(!0),Object(c["f"])(c["a"],null,Object(c["A"])(r.SCALE_NAMES,(function(e){return Object(c["u"])(),Object(c["f"])("option",{key:e,value:e},Object(c["E"])(e),9,D)})),128))],512),[[c["I"],r.colorScheme.owner.scaleName]])]),Object(c["g"])("div",{class:"scale-color-display",style:Object(c["p"])({background:r.SCALE_GRADIENTS[r.colorScheme.owner.scaleName]})},null,4)])])):Object(c["e"])("",!0),"whalePx"===r.colorScheme.colorBy?(Object(c["u"])(),Object(c["f"])("div",L,[Object(c["g"])("div",null,[Object(c["g"])("label",null,[F,Object(c["N"])(Object(c["g"])("select",{"onUpdate:modelValue":t[2]||(t[2]=function(e){return r.colorScheme.whalePx.scaleName=e})},[(Object(c["u"])(!0),Object(c["f"])(c["a"],null,Object(c["A"])(r.SCALE_NAMES,(function(e){return Object(c["u"])(),Object(c["f"])("option",{key:e,value:e},Object(c["E"])(e),9,V)})),128))],512),[[c["I"],r.colorScheme.whalePx.scaleName]])]),Object(c["g"])("div",{class:"scale-color-display",style:Object(c["p"])({background:r.SCALE_GRADIENTS[r.colorScheme.whalePx.scaleName]})},null,4),Object(c["g"])("div",M,[Object(c["g"])("label",null,[A,Object(c["N"])(Object(c["g"])("input",{"onUpdate:modelValue":t[3]||(t[3]=function(e){return r.colorScheme.whalePx.min=e}),type:"number",class:"range-input"},null,512),[[c["J"],r.colorScheme.whalePx.min]])]),Object(c["g"])("label",null,[T,Object(c["N"])(Object(c["g"])("input",{"onUpdate:modelValue":t[4]||(t[4]=function(e){return r.colorScheme.whalePx.max=e}),type:"number",class:"range-input"},null,512),[[c["J"],r.colorScheme.whalePx.max]])])])])])):Object(c["e"])("",!0)]),Object(c["i"])(ve,{modelValue:r.mapConfig.displayMode,"onUpdate:modelValue":t[5]||(t[5]=function(e){return r.mapConfig.displayMode=e})},null,8,["modelValue"]),Object(c["i"])(ge,{modelValue:r.filters.baazaar,"onUpdate:modelValue":t[6]||(t[6]=function(e){return r.filters.baazaar=e})},null,8,["modelValue"]),Object(c["i"])(ye,{modelValue:r.filters.size,"onUpdate:modelValue":t[7]||(t[7]=function(e){return r.filters.size=e})},null,8,["modelValue"]),Object(c["i"])(Pe,{modelValue:r.filters.walls,"onUpdate:modelValue":t[8]||(t[8]=function(e){return r.filters.walls=e})},null,8,["modelValue"]),Object(c["i"])(Se,{modelValue:r.filters.districts,"onUpdate:modelValue":t[9]||(t[9]=function(e){return r.filters.districts=e})},null,8,["modelValue"]),Object(c["i"])(we,{modelValue:r.filters.parcelIds,"onUpdate:modelValue":t[10]||(t[10]=function(e){return r.filters.parcelIds=e})},null,8,["modelValue"]),Object(c["i"])(xe,{modelValue:r.filters.parcelNames,"onUpdate:modelValue":t[11]||(t[11]=function(e){return r.filters.parcelNames=e})},null,8,["modelValue"]),Object(c["i"])(ke,{modelValue:r.filters.boosts,"onUpdate:modelValue":t[12]||(t[12]=function(e){return r.filters.boosts=e})},null,8,["modelValue"]),Object(c["i"])(Ce,{modelValue:r.filters.owners,"onUpdate:modelValue":t[13]||(t[13]=function(e){return r.filters.owners=e})},null,8,["modelValue"]),Object(c["g"])("section",null,[r.selectedParcel?(Object(c["u"])(),Object(c["f"])("div",U,[Object(c["g"])("button",{type:"button",style:{float:"right"},onClick:t[14]||(t[14]=function(e){return r.selectedParcelId=null})}," Close "),G,Object(c["h"])(" ID: "+Object(c["E"])(r.selectedParcel.id)+" ",1),_,Object(c["h"])("Name: "+Object(c["E"])(r.selectedParcel.parcelHash)+" ",1),R,Object(c["h"])("Size: "+Object(c["E"])(r.selectedParcel.sizeLabel)+" ",1),H,Object(c["h"])("District: "+Object(c["E"])(r.selectedParcel.district)+" ",1),r.selectedParcel.owner?(Object(c["u"])(),Object(c["f"])("div",J,[q,Object(c["i"])(Ee,{address:r.selectedParcel.owner},null,8,["address"])])):Object(c["e"])("",!0),r.selectedParcel.currentListing?(Object(c["u"])(),Object(c["f"])("div",W,[Object(c["g"])("a",{href:"https://aavegotchi.com/baazaar/erc721/".concat(r.selectedParcel.currentListing.id),target:"_blank"}," Currently listed on Baazaar for: "+Object(c["E"])(r.selectedParcel.currentListing.priceInGhst.toString())+" GHST ",9,K)])):Object(c["e"])("",!0),r.selectedParcel.lastSale?(Object(c["u"])(),Object(c["f"])("div",Y,[Object(c["g"])("a",{href:"https://aavegotchi.com/baazaar/erc721/".concat(r.selectedParcel.lastSale.id),target:"_blank"}," Last sold on Baazaar on "+Object(c["E"])(r.selectedParcel.lastSale.formattedDate)+" for: "+Object(c["E"])(r.selectedParcel.lastSale.priceInGhst.toString())+" GHST ",9,$)])):Object(c["e"])("",!0),r.selectedParcel.auctionPrice?(Object(c["u"])(),Object(c["f"])("div",Q," Auction price: "+Object(c["E"])(r.selectedParcel.auctionPrice)+" GHST ",1)):Object(c["e"])("",!0),Object(c["g"])("div",null,[X,Object(c["g"])("div",Z,[r.selectedParcel.hasBoost?(Object(c["u"])(),Object(c["f"])(c["a"],{key:0},["0"!==r.selectedParcel.fudBoost?(Object(c["u"])(),Object(c["f"])("div",ee," FUD: "+Object(c["E"])(r.selectedParcel.fudBoost),1)):Object(c["e"])("",!0),"0"!==r.selectedParcel.fomoBoost?(Object(c["u"])(),Object(c["f"])("div",te," FOMO: "+Object(c["E"])(r.selectedParcel.fomoBoost),1)):Object(c["e"])("",!0),"0"!==r.selectedParcel.alphaBoost?(Object(c["u"])(),Object(c["f"])("div",ae," ALPHA: "+Object(c["E"])(r.selectedParcel.alphaBoost),1)):Object(c["e"])("",!0),"0"!==r.selectedParcel.kekBoost?(Object(c["u"])(),Object(c["f"])("div",ce," KEK: "+Object(c["E"])(r.selectedParcel.kekBoost),1)):Object(c["e"])("",!0)],64)):(Object(c["u"])(),Object(c["f"])(c["a"],{key:1},[re],64))])])])):Object(c["e"])("",!0)])]})),main:Object(c["M"])((function(e){var a=e.viewMode;return[Object(c["N"])(Object(c["i"])(Ie,{viewBox:r.mapConfig.viewBox,aspectRatio:r.mapConfig.aspectRatio,filterDisplayMode:r.mapConfig.displayMode,parcels:r.parcelsToDisplay,parcelsMatchingFilters:r.parcelsMatchingFilters,parcelColors:r.parcelColors,selectedParcel:r.selectedParcel,"onClick:parcel":r.onClickParcel},null,8,["viewBox","aspectRatio","filterDisplayMode","parcels","parcelsMatchingFilters","parcelColors","selectedParcel","onClick:parcel"]),[[c["K"],"map"===a]]),"list"===a?(Object(c["u"])(),Object(c["f"])("div",ne,[r.listParcelsToDisplay.length?(Object(c["u"])(),Object(c["f"])(c["a"],{key:1},[Object(c["h"])(Object(c["E"])(r.listParcelsTotal)+" parcels found. ",1),Object(c["g"])("ul",ie,[(Object(c["u"])(!0),Object(c["f"])(c["a"],null,Object(c["A"])(r.listParcelsToDisplay,(function(e){return Object(c["u"])(),Object(c["f"])("li",{key:e.id},[Object(c["g"])("a",{href:"#",onClick:Object(c["O"])((function(t){return r.onClickParcel(e)}),["prevent"])},Object(c["E"])(e.id),9,oe),Object(c["h"])(" "+Object(c["E"])(e.parcelHash)+" "+Object(c["E"])(e.sizeLabel)+" district "+Object(c["E"])(e.district)+" ",1),r.listingsByParcelId[e.id]?(Object(c["u"])(),Object(c["f"])("span",ue,[Object(c["g"])("a",{href:"https://aavegotchi.com/baazaar/erc721/".concat(r.listingsByParcelId[e.id].id),target:"_blank"}," Baazaar "+Object(c["E"])(r.listingsByParcelId[e.id].priceInGhst.toString())+" GHST ",9,se)])):Object(c["e"])("",!0),r.salesByParcelId[e.id]?(Object(c["u"])(),Object(c["f"])("span",be,[de,Object(c["g"])("a",{href:"https://aavegotchi.com/baazaar/erc721/".concat(r.salesByParcelId[e.id].id),target:"_blank"},Object(c["E"])(r.salesByParcelId[e.id].formattedDate)+" for "+Object(c["E"])(r.salesByParcelId[e.id].priceInGhst.toString())+" GHST ",9,Oe)])):Object(c["e"])("",!0)])})),128))])],64)):(Object(c["u"])(),Object(c["f"])(c["a"],{key:0},[le],64)),r.listParcelsTotal>r.listParcelsToDisplay.length&&!r.listParcelsShowAll?(Object(c["u"])(),Object(c["f"])("div",fe,[Object(c["g"])("button",{type:"button",onClick:t[15]||(t[15]=function(e){return r.listParcelsShowAll=!0})}," Show all "+Object(c["E"])(r.listParcelsTotal)+" parcels ",1)])):Object(c["e"])("",!0)])):Object(c["e"])("",!0)]})),_:1})]})),_:1})}var me=a("5530"),pe=a("2909"),he=(a("d81d"),a("7db0"),a("caad"),a("4e82"),a("4fad"),a("07ac"),a("fb6a"),a("c1f9"),a("4de4"),a("b166")),ve=a("9220"),ge=a("86f5"),ye=a("3835"),Pe=(a("3ca3"),a("ddb0"),a("2e7a")),Se=Object(ve["a"])(),we=Se.parcelsById,xe=Se.fetchStatus,ke=Object(ge["a"])(),Ce=ke.salesByParcelId,Ee=Object(Pe["a"])(),Ie=Ee.status,Ne=Ee.setLoading,ze={},Be=Ne(),De=Object(ye["a"])(Be,3),Le=De[0],Fe=De[1],Ve=De[2];a.e("auctionpricesjson").then(a.t.bind(null,"9fdc",3)).then((function(e){var t=e.default;Le()||(ze=t,Fe())})).catch((function(e){console.error(e),Ve("Error loading auction prices")}));var Me=Object(c["b"])((function(){var e={};if(!xe.value.loaded||!Ie.value.loaded)return e;for(var t in we.value){var a,c=(null===(a=Ce.value[t])||void 0===a?void 0:a.priceInGhst.toString())||ze[t]||null;e[t]={lastPrice:c?c-0:null,auctionPrice:ze[t]}}return e}));function Ae(){return{pricesByParcelId:Me}}var Te=a("b967"),Ue=a("d4bd"),Ge=a("9e37"),_e={key:0,style:{"margin-bottom":"5px","font-style":"italic","font-size":"0.95em"}},Re=Object(c["h"])(" Baazaar listings fetched "),He=["disabled"],Je={style:{"margin-top":"5px"}},qe={key:0},We=Object(c["h"])(" loading listings... "),Ke={key:1};function Ye(e,t,a,r,n,l){var i=Object(c["C"])("DateFriendly"),o=Object(c["C"])("LoadingSpinner");return Object(c["u"])(),Object(c["f"])("div",null,[r.fetchStatus.loaded?(Object(c["u"])(),Object(c["f"])("div",_e,[Re,Object(c["i"])(i,{date:r.lastFetchDate},null,8,["date"])])):Object(c["e"])("",!0),Object(c["g"])("div",null,[Object(c["g"])("button",{type:"button",disabled:!r.canSubmitFetch,onClick:t[0]||(t[0]=function(){return r.fetchListings&&r.fetchListings.apply(r,arguments)})}," Get Latest Baazaar Listings ",8,He),Object(c["g"])("div",Je,[r.fetchStatus.loading?(Object(c["u"])(),Object(c["f"])("span",qe,[Object(c["i"])(o,{style:{position:"relative",top:"2px","margin-right":"2px"}}),We])):Object(c["e"])("",!0),r.fetchStatus.error?(Object(c["u"])(),Object(c["f"])("span",Ke," Error loading listings: "+Object(c["E"])(r.fetchStatus.errorMessage),1)):Object(c["e"])("",!0)])])])}function $e(e,t,a,r,n,l){return Object(c["u"])(),Object(c["f"])("span",null,Object(c["E"])(r.friendlyDate),1)}var Qe=a("2420"),Xe=a("fd3a"),Ze=a("8c86");function et(e,t){Object(Ze["a"])(2,arguments);var a=Object(Xe["a"])(e),c=Object(Xe["a"])(t),r=a.getTime()-c.getTime();return r<0?-1:r>0?1:r}function tt(e,t){if(null==e)throw new TypeError("assign requires that input parameter not be null or undefined");for(var a in t=t||{},t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}function at(e){return tt({},e)}var ct=a("8923"),rt=6e4,nt=1440,lt=30*nt,it=365*nt;function ot(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(Ze["a"])(2,arguments);var c=a.locale||ct["a"];if(!c.formatDistance)throw new RangeError("locale must contain localize.formatDistance property");var r=et(e,t);if(isNaN(r))throw new RangeError("Invalid time value");var n,l,i=at(a);i.addSuffix=Boolean(a.addSuffix),i.comparison=r,r>0?(n=Object(Xe["a"])(t),l=Object(Xe["a"])(e)):(n=Object(Xe["a"])(e),l=Object(Xe["a"])(t));var o,u=null==a.roundingMethod?"round":String(a.roundingMethod);if("floor"===u)o=Math.floor;else if("ceil"===u)o=Math.ceil;else{if("round"!==u)throw new RangeError("roundingMethod must be 'floor', 'ceil' or 'round'");o=Math.round}var s,b=l.getTime()-n.getTime(),d=b/rt,O=Object(Qe["a"])(l)-Object(Qe["a"])(n),f=(b-O)/rt;if(s=null==a.unit?d<1?"second":d<60?"minute":d<nt?"hour":f<lt?"day":f<it?"month":"year":String(a.unit),"second"===s){var j=o(b/1e3);return c.formatDistance("xSeconds",j,i)}if("minute"===s){var m=o(d);return c.formatDistance("xMinutes",m,i)}if("hour"===s){var p=o(d/60);return c.formatDistance("xHours",p,i)}if("day"===s){var h=o(f/nt);return c.formatDistance("xDays",h,i)}if("month"===s){var v=o(f/lt);return 12===v&&"month"!==a.unit?c.formatDistance("xYears",1,i):c.formatDistance("xMonths",v,i)}if("year"===s){var g=o(f/it);return c.formatDistance("xYears",g,i)}throw new RangeError("unit must be 'second', 'minute', 'hour', 'day', 'month' or 'year'")}function ut(e){var t,a;if(Object(Ze["a"])(1,arguments),e&&"function"===typeof e.forEach)t=e;else{if("object"!==typeof e||null===e)return new Date(NaN);t=Array.prototype.slice.call(e)}return t.forEach((function(e){var t=Object(Xe["a"])(e);(void 0===a||a<t||isNaN(Number(t)))&&(a=t)})),a||new Date(NaN)}var st=Object(c["z"])(new Date);setInterval((function(){st.value=new Date}),15e3);var bt=function(){return{tickerDate:st}},dt={props:{date:{type:Date,required:!0}},setup:function(e){var t=bt(),a=t.tickerDate,r=Object(c["b"])((function(){return ot(e.date,ut([a.value,new Date]),{addSuffix:!0})}));return{friendlyDate:r}}},Ot=a("6b0d"),ft=a.n(Ot);const jt=ft()(dt,[["render",$e]]);var mt=jt,pt=a("d76c"),ht={components:{DateFriendly:mt,LoadingSpinner:pt["a"]},setup:function(e){var t=Object(ge["a"])(),a=t.canSubmitFetch,c=t.fetchStatus,r=t.fetchListings,n=t.lastFetchDate;return{canSubmitFetch:a,fetchStatus:c,fetchListings:r,lastFetchDate:n}}};const vt=ft()(ht,[["render",Ye]]);var gt=vt,yt={key:0,style:{"margin-bottom":"5px","font-style":"italic","font-size":"0.95em"}},Pt=Object(c["h"])(" Parcel owners fetched "),St=["disabled"],wt={style:{"margin-top":"5px"}},xt={key:0},kt=Object(c["h"])(" loading owners... "),Ct={key:1};function Et(e,t,a,r,n,l){var i=Object(c["C"])("DateFriendly"),o=Object(c["C"])("LoadingSpinner");return Object(c["u"])(),Object(c["f"])("div",null,[r.fetchStatus.loaded?(Object(c["u"])(),Object(c["f"])("div",yt,[Pt,Object(c["i"])(i,{date:r.lastFetchDate},null,8,["date"])])):Object(c["e"])("",!0),Object(c["g"])("div",null,[Object(c["g"])("button",{type:"button",disabled:!r.canSubmitFetch,onClick:t[0]||(t[0]=function(){return r.fetchOwners&&r.fetchOwners.apply(r,arguments)})}," Get Latest Parcel Owners ",8,St),Object(c["g"])("div",wt,[r.fetchStatus.loading?(Object(c["u"])(),Object(c["f"])("span",xt,[Object(c["i"])(o,{style:{position:"relative",top:"2px","margin-right":"2px"}}),kt])):Object(c["e"])("",!0),r.fetchStatus.error?(Object(c["u"])(),Object(c["f"])("span",Ct," Error loading owners: "+Object(c["E"])(r.fetchStatus.errorMessage),1)):Object(c["e"])("",!0)])])])}var It={components:{DateFriendly:mt,LoadingSpinner:pt["a"]},setup:function(e){var t=Object(Te["a"])(),a=t.canSubmitFetch,c=t.fetchStatus,r=t.fetchOwners,n=t.lastFetchDate;return{canSubmitFetch:a,fetchStatus:c,fetchOwners:r,lastFetchDate:n}}};const Nt=ft()(It,[["render",Et]]);var zt=Nt,Bt=a("12b9"),Dt=a("5789"),Lt=a("e004"),Ft=a("fe8e"),Vt=a("0020"),Mt={class:"filter-container"},At=Object(c["g"])("summary",null,[Object(c["g"])("h3",null,"Filter by Baazaar Listings")],-1),Tt=["value","checked","onChange"];function Ut(e,t,a,r,n,l){return Object(c["u"])(),Object(c["f"])("details",Mt,[At,(Object(c["u"])(!0),Object(c["f"])(c["a"],null,Object(c["A"])(l.OPTIONS,(function(t){var r=t.id,n=t.label;return Object(c["u"])(),Object(c["f"])("div",{key:r},[Object(c["g"])("label",null,[Object(c["g"])("input",{type:"radio",value:r,name:"baazaarFilterOptions",checked:a.modelValue===r,onChange:function(t){return e.$emit("update:modelValue",r)}},null,40,Tt),Object(c["g"])("span",null,Object(c["E"])(n),1)])])})),128))])}var Gt=[{id:"all",label:"All parcels"},{id:"listed",label:"Parcels listed on Baazaar"},{id:"unlisted",label:"Parcels that are not listed on Baazaar"}],_t=function(){return"all"},Rt=function(e,t){return function(a){return"all"===t||("listed"===t?!!e[a.id]:!e[a.id])}},Ht={props:{modelValue:{type:String,default:"all"}},computed:{OPTIONS:function(){return Gt}}};const Jt=ft()(Ht,[["render",Ut]]);var qt=Jt,Wt=a("23df"),Kt=a("4a49"),Yt=a("b89e"),$t=a("8dd4"),Qt=a("8fa9"),Xt=a("3d41"),Zt=function(e){return Object(c["x"])("data-v-efddcedc"),e=e(),Object(c["v"])(),e},ea={class:"filter-container"},ta=Zt((function(){return Object(c["g"])("summary",null,[Object(c["g"])("h3",null,"Filter by Owner")],-1)})),aa=Zt((function(){return Object(c["g"])("div",null," Owner addresses ",-1)}));function ca(e,t,a,r,n,l){var i=Object(c["C"])("TextareaList");return Object(c["u"])(),Object(c["f"])("details",ea,[ta,Object(c["g"])("label",null,[aa,Object(c["i"])(i,{class:"addresses-textarea",modelValue:a.modelValue,delimiterRegexp:/[^x0-9a-f]+/,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.$emit("update:modelValue",t)})},null,8,["modelValue"])])])}a("2532");var ra=a("3b4e"),na=function(e,t){return null!==t&&void 0!==t&&t.length?function(a){var c=e[a.id];return c&&t.includes(c)}:function(){return!0}},la={components:{TextareaList:ra["a"]},props:{modelValue:{type:Array,default:function(){return[]}}}};a("e44b");const ia=ft()(la,[["render",ca],["__scopeId","data-v-efddcedc"]]);var oa=ia,ua={components:{PrereqParcels:Bt["a"],LayoutMapWithFilters:Dt["a"],DataFetcherBaazaarListings:gt,DataFetcherParcelOwners:zt,EthAddress:Lt["a"],CitaadelMap:Ft["a"],MapConfigDisplayMode:Vt["a"],FilterBaazaar:qt,FilterSize:Wt["b"],FilterWalls:Kt["a"],FilterDistricts:Yt["b"],FilterParcelIds:$t["a"],FilterParcelNames:Qt["a"],FilterBoosts:Xt["a"],FilterOwners:oa},setup:function(){var e=Object(ge["a"])(),t=e.listingsByParcelId,a=e.salesByParcelId,r=e.fetchStatus,n=e.fetchListings,l=Ae(),i=l.pricesByParcelId,o=Object(Te["a"])(),u=o.ownersByParcelId,s=o.fetchStatus,b=o.fetchOwners,d=Object(c["z"])({displayMode:"outline",viewBox:"0 0 9000 6000",aspectRatio:"9 / 6"}),O=Object(c["z"])({baazaar:_t(),size:Object(pe["a"])(Wt["a"]),walls:Ue["a"].map((function(e){return e.id})),districts:Object(Yt["c"])(Object(pe["a"])(Yt["a"])),parcelIds:[],parcelNames:[],boosts:Object(Xt["b"])(),owners:[]}),f=[{id:"lastPrice",label:"Last Sold Price (GHST)"},{id:"baazaarPrice",label:"Baazaar Listing Price (GHST)"},{id:"owner",label:"Owner Address"},{id:"whalePx",label:"Whales (total pixel area)"}],j=Object(c["z"])({colorBy:"lastPrice",lastPrice:{humble:{min:88,max:500,scaleName:"viridis"},reasonable:{min:180,max:1e3,scaleName:"viridis"},spacious:{min:1025,max:3e3,scaleName:"viridis"}},baazaarPrice:{humble:{min:88,max:500,scaleName:"viridis"},reasonable:{min:180,max:1e3,scaleName:"viridis"},spacious:{min:1025,max:3e3,scaleName:"viridis"}},owner:{scaleName:"rainbow",min:0,max:parseInt("0xffffffffffffffffffffffffffffffffffffffff",16)},whalePx:{scaleName:"inferno",min:0,max:15e4}}),m=Object(c["b"])((function(){var e;return null===(e=f.find((function(e){return e.id===j.value.colorBy})))||void 0===e?void 0:e.label})),p=function(){r.value.loaded||r.value.loading||n()},h=function(){s.value.loaded||s.value.loading||b()};Object(c["L"])((function(){return j.value.colorBy}),(function(e){["baazaarPrice","lastPrice"].includes(e)&&p(),["owner","whalePx"].includes(e)&&h()}),{immediate:!0}),Object(c["L"])((function(){return O.value.baazaar}),(function(e){"all"!==e&&p()})),Object(c["L"])((function(){return O.value.owners}),(function(e){null!==e&&void 0!==e&&e.length&&h()}));var v=Object(c["b"])((function(){var e={},t=j.value.lastPrice;for(var a in t){var c=t[a];e[a]=Object(Ge["c"])(c)}return e})),g=Object(c["b"])((function(){var e={},t=j.value.baazaarPrice;for(var a in t){var c=t[a];e[a]=Object(Ge["c"])(c)}return e})),y=Object(c["b"])((function(){return Object(Ge["c"])(j.value.owner)})),P=10,S=Object(c["b"])((function(){return Object(Ge["c"])({scaleName:j.value.owner.scaleName,min:0,max:P})})),w=Object(c["b"])((function(){return Object(Ge["c"])(j.value.whalePx)})),x=Object(c["b"])((function(){var e={},t={humble:64,reasonable:256,spacious:2048};for(var a in u.value){var c=u.value[a];e[c]||(e[c]=0);var r=E.value[a];r&&(e[c]+=t[r.sizeLabel]||0)}return e})),k=Object(c["b"])((function(){return Object.entries(x.value).sort((function(e,t){return e[1]===t[1]?0:e[1]<t[1]?1:-1}))})),C=Object(ve["a"])(),E=C.parcelsById,I=C.fetchStatus,N=Object(c["b"])((function(){return Object.values(E.value).map((function(e){return Object(me["a"])(Object(me["a"])({},e),{},{color:null})}))})),z=Object(c["b"])((function(){var e=j.value.colorBy,a=function(){return null};if("lastPrice"===e)a=function(e){var t,a=v.value[e.sizeLabel];if(!a)return null;var c=null===(t=i.value[e.id])||void 0===t?void 0:t.lastPrice;return c?a(c-0):null};else if("baazaarPrice"===e)a=function(e){var a=g.value[e.sizeLabel];if(!a)return null;var c=t.value[e.id];return c?a(c.priceInGhst.toNumber()):null};else if("owner"===e){var c=k.value.slice(0,P).map((function(e){return e[0]}));a=function(e){var t=u.value[e.id],a=c.indexOf(t);return-1!==a?S.value(a):y.value(parseInt(t,16))}}else"whalePx"===e&&(a=function(e){var t=u.value[e.id];return w.value(x.value[t]||0)});var r=Object.fromEntries(N.value.map((function(e){return[e.id,a(e)||null]})));return r})),B=Object(c["b"])((function(){var e=Object($t["b"])(O.value.parcelIds),a=Object(Qt["b"])(O.value.parcelNames),c=Rt(t.value,O.value.baazaar),r=Object(Wt["c"])(O.value.size),n=Object(Kt["b"])(O.value.walls),l=Object(Yt["d"])(Yt["a"],O.value.districts),i=Object(Xt["c"])(O.value.boosts),o=na(u.value,O.value.owners),s=[e,a,c,o,r,n,l,i],b=Object.fromEntries(N.value.map((function(e){for(var t=!0,a=0;t&&a<s.length;a++)s[a](e)||(t=!1);return[e.id,t]})));return b})),D=Object(c["z"])(null),L=Object(c["b"])((function(){var e,c=D.value;if(!c)return null;var r=t.value[c],n=a.value[c];n&&(n.formattedDate=Object(he["a"])(n.datePurchased,"yyyy/MM/dd HH:mm:ss"));var l=null===(e=i.value[c])||void 0===e?void 0:e.auctionPrice,o=u.value[c];return Object(me["a"])(Object(me["a"])({},E.value[c]),{},{currentListing:r,lastSale:n,auctionPrice:l,owner:o})})),F=function(e){D.value=e.id},V=function(e,t){return e.id===t.id?0:e.id-0<t.id-0?-1:1},M=function(e,t,a){return e.district===t.district?a?a(e,t):0:e.district-0<t.district-0?-1:1},A=Object(c["b"])((function(){var e=N.value.filter((function(e){return B.value[e.id]}));return e.sort((function(e,a){var c=t.value[e.id],r=t.value[a.id];return c||r?c&&!r?-1:r&&!c?1:c.priceInGhst.isEqualTo(r.priceInGhst)?M(e,a,V):c.priceInGhst.isLessThan(r.priceInGhst)?-1:1:M(e,a,V)})),e})),T=Object(c["z"])(!1),U=Object(c["b"])((function(){return A.value.length}));Object(c["L"])((function(){return U.value}),(function(){T.value=!1}));var G=Object(c["b"])((function(){return T.value?A.value:A.value.slice(0,100)}));return{parcelsFetchStatus:I,mapConfig:d,filters:O,colorScheme:j,colorSchemeLabel:m,colorSchemeOptions:f,SCALE_NAMES:Ge["b"],SCALE_GRADIENTS:Ge["a"],baazaarListingsFetchStatus:r,parcelsToDisplay:N,parcelsMatchingFilters:B,parcelColors:z,onClickParcel:F,selectedParcelId:D,selectedParcel:L,listParcelsShowAll:T,listParcelsToDisplay:G,listParcelsTotal:U,listingsByParcelId:t,salesByParcelId:a}}};a("52fc");const sa=ft()(ua,[["render",je],["__scopeId","data-v-433119fc"]]);t["default"]=sa},"1a7e":function(e,t,a){},"3a60":function(e,t,a){},"52fc":function(e,t,a){"use strict";a("1a7e")},"86f5":function(e,t,a){"use strict";a.d(t,"a",(function(){return P}));var c=a("1da1"),r=a("3835"),n=a("b85c"),l=(a("96cf"),a("d3b7"),a("e9c4"),a("99af"),a("7a23")),i=a("2e7a"),o=a("901e"),u=a.n(o),s=Object(l["z"])({}),b=Object(l["z"])({}),d="https://api.thegraph.com/subgraphs/name/aavegotchi/aavegotchi-core-matic",O=1e3,f=function(){s.value={},b.value={},g.value=null},j=function(e){var t,a=Object(n["a"])(e);try{for(a.s();!(t=a.n()).done;){var c=t.value,r=new u.a(c.priceInWei).dividedBy(1e18);"0"!==c.timePurchased?b.value[c.tokenId]={id:c.id,priceInGhst:r,datePurchased:new Date(1e3*c.timePurchased)}:s.value[c.tokenId]={id:c.id,priceInGhst:r,dateCreated:new Date(1e3*c.timeCreated)}}}catch(l){a.e(l)}finally{a.f()}},m=Object(i["a"])(),p=m.status,h=m.setLoading,v=Object(l["b"])((function(){return!p.value.loading})),g=Object(l["z"])(null),y=function(){var e=h(),t=Object(r["a"])(e,3),a=t[0],n=t[1],l=t[2],i=0,o=[],u=function e(){fetch(d,{method:"POST",body:JSON.stringify({query:"{\n          erc721Listings(first: ".concat(O,", skip: ").concat(i,', orderBy: timeCreated, where: { category: "4", cancelled: false }) {\n            id\n            tokenId\n            timeCreated\n            timePurchased\n            priceInWei\n          }\n        }')})}).then(function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(c){var r,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a()){t.next=3;break}return console.log("Stale request, ignoring"),t.abrupt("return");case 3:if(c.ok){t.next=6;break}return l("There was an error fetching listings"),t.abrupt("return");case 6:return t.next=8,c.json();case 8:if(u=t.sent,null===(r=u.data)||void 0===r||!r.erc721Listings){t.next=21;break}if(o=o.concat(u.data.erc721Listings),!(u.data.erc721Listings.length<O)){t.next=17;break}return f(),j(o),g.value=new Date,n(),t.abrupt("return");case 17:i+=O,e(),t.next=22;break;case 21:l("Unexpected response");case 22:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){console.error(e),l("There was an error fetching listings")}))};u()};function P(){return{listingsByParcelId:s,salesByParcelId:b,canSubmitFetch:v,fetchStatus:p,fetchListings:y,lastFetchDate:g}}},b967:function(e,t,a){"use strict";a.d(t,"a",(function(){return v}));var c=a("1da1"),r=a("3835"),n=a("b85c"),l=(a("96cf"),a("d3b7"),a("e9c4"),a("99af"),a("7a23")),i=a("2e7a"),o=Object(l["z"])({}),u="https://api.thegraph.com/subgraphs/name/aavegotchi/aavegotchi-core-matic",s=1e3,b=function(){o.value={},p.value=null},d=function(e){var t,a=Object(n["a"])(e);try{for(a.s();!(t=a.n()).done;){var c,r=t.value;o.value[r.tokenId]=null===(c=r.owner)||void 0===c?void 0:c.id}}catch(l){a.e(l)}finally{a.f()}},O=Object(i["a"])(),f=O.status,j=O.setLoading,m=Object(l["b"])((function(){return!f.value.loading})),p=Object(l["z"])(null),h=function(){var e=j(),t=Object(r["a"])(e,3),a=t[0],n=t[1],l=t[2],i=0,o=[],O=function e(){fetch(u,{method:"POST",body:JSON.stringify({query:"{\n          parcels(first: ".concat(s,", orderBy: tokenId, where: { tokenId_gt: ").concat(i," }) {\n            tokenId\n            owner {\n              id\n            }\n          }\n        }")})}).then(function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(c){var r,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a()){t.next=3;break}return console.log("Stale request, ignoring"),t.abrupt("return");case 3:if(c.ok){t.next=6;break}return l("There was an error fetching parcel owners"),t.abrupt("return");case 6:return t.next=8,c.json();case 8:if(u=t.sent,null===(r=u.data)||void 0===r||!r.parcels){t.next=21;break}if(o=o.concat(u.data.parcels),!(u.data.parcels.length<s)){t.next=17;break}return b(),d(o),p.value=new Date,n(),t.abrupt("return");case 17:i=u.data.parcels[u.data.parcels.length-1].tokenId-0,e(),t.next=22;break;case 21:l("Unexpected response");case 22:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){console.error(e),l("There was an error fetching parcel owners")}))};O()};function v(){return{ownersByParcelId:o,canSubmitFetch:m,fetchStatus:f,fetchOwners:h,lastFetchDate:p}}},e44b:function(e,t,a){"use strict";a("3a60")}}]);
//# sourceMappingURL=citaadel-page.55e98e2b.js.map